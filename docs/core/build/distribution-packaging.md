---
title: ".NET Core の配布パッケージ"
description: ".NET Core を配布用にパッケージ化、名前付け、およびバージョン管理する方法について説明します。"
keywords: ".NET, .NET Core, ソース, ビルド"
author: bleroy
ms.author: mairaw
ms.date: 06/28/2017
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: 71b9d722-c5a8-4271-9ce1-d87e7ae2494d
ms.openlocfilehash: 7ff5ed127ad0d4f435c697a8f35b33c7ba3b56ff
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2017
---
# <a name="net-core-distribution-packaging"></a><span data-ttu-id="f5733-104">.NET Core の配布パッケージ</span><span class="sxs-lookup"><span data-stu-id="f5733-104">.NET Core distribution packaging</span></span>

<span data-ttu-id="f5733-105">.NET Core はますます多くのプラットフォームで使用できるようになってきているため、.NET Core をパッケージ化し、名前を付け、バージョン管理する方法を知っていると便利です。</span><span class="sxs-lookup"><span data-stu-id="f5733-105">As .NET Core becomes available on more and more platforms, it's useful to learn how to package, name, and version it.</span></span> <span data-ttu-id="f5733-106">そうすることで、パッケージの管理者は、ユーザーの .NET の実行環境に左右されることなく一貫した体験が保証されるようにサポートできます。</span><span class="sxs-lookup"><span data-stu-id="f5733-106">This way, package maintainers can help ensure a consistent experience no matter where users choose to run .NET.</span></span>

## <a name="net-core-components"></a><span data-ttu-id="f5733-107">.NET Core コンポーネント</span><span class="sxs-lookup"><span data-stu-id="f5733-107">.NET Core components</span></span>

<span data-ttu-id="f5733-108">.NET core は、パッケージ化が必要な 3 つの主要部から構成されています。</span><span class="sxs-lookup"><span data-stu-id="f5733-108">.NET Core is made of three major parts that need to be packaged:</span></span>

1. <span data-ttu-id="f5733-109">**ホスト** (別名 "muxer (マルチプレクサー)") には 2 つの異なるロールがあります。アプリケーションを起動するランタイムのアクティブ化と、コマンドをディスパッチする SDK のアクティブ化です。</span><span class="sxs-lookup"><span data-stu-id="f5733-109">**The host** (also known as the "muxer") has two distinct roles: activate a runtime to launch an application, and activate an SDK to dispatch commands to it.</span></span> <span data-ttu-id="f5733-110">ホストは、ネイティブの実行可能ファイル (`dotnet.exe`) とその対応するポリシー ライブラリ (`host/fxr` にインストールされています) です。</span><span class="sxs-lookup"><span data-stu-id="f5733-110">The host is a native executable (`dotnet.exe`) and its supporting policy libraries (installed in `host/fxr`).</span></span> <span data-ttu-id="f5733-111">[`dotnet/core-setup`](https://github.com/dotnet/core-setup/) リポジトリ内のコードからビルドされます。</span><span class="sxs-lookup"><span data-stu-id="f5733-111">It's built from the code in the [`dotnet/core-setup`](https://github.com/dotnet/core-setup/) repository.</span></span> <span data-ttu-id="f5733-112">厳密な要件ではありませんが、通常、特定のマシンに存在するホストは 1 つのみです。</span><span class="sxs-lookup"><span data-stu-id="f5733-112">There is typically only one host on a given machine, although that isn't a strict requirement.</span></span>
2. <span data-ttu-id="f5733-113">**フレームワーク**は、ランタイムと対応するマネージ ライブラリで構成されます。</span><span class="sxs-lookup"><span data-stu-id="f5733-113">**The framework** is made of a runtime and supporting managed libraries.</span></span> <span data-ttu-id="f5733-114">フレームワークは、アプリケーションの一部としてインストールされる場合と、複数のアプリケーションで再利用可能な中心となる場所に、共有フレームワークとしてインストールされる場合があります。</span><span class="sxs-lookup"><span data-stu-id="f5733-114">The framework may be installed as part of an application, or as a shared framework in a central location that can be reused by multiple applications.</span></span> <span data-ttu-id="f5733-115">特定のマシンにインストールできる共有フレームワークの数に制限はありません。</span><span class="sxs-lookup"><span data-stu-id="f5733-115">There may be any number of shared frameworks installed on a given machine.</span></span> <span data-ttu-id="f5733-116">共有フレームワークは `shared/Microsoft.NETCore.App/<version>` にあります。</span><span class="sxs-lookup"><span data-stu-id="f5733-116">Shared frameworks live under `shared/Microsoft.NETCore.App/<version>`.</span></span> <span data-ttu-id="f5733-117">ホストは、パッチ バージョン間でロール フォワードされます。</span><span class="sxs-lookup"><span data-stu-id="f5733-117">The host rolls forward across patch versions.</span></span> <span data-ttu-id="f5733-118">アプリケーションの対象が `Microsoft.NETCore.App` 1.0.0 で、1.0.4 のみが存在する場合、アプリケーションは 1.0.4 に対して起動します。</span><span class="sxs-lookup"><span data-stu-id="f5733-118">If an application targets `Microsoft.NETCore.App` 1.0.0, and only 1.0.4 is present, the app is launched against 1.0.4.</span></span>
3. <span data-ttu-id="f5733-119">**SDK** (別名 "the tooling (ツール)") は、.NET Core のライブラリやアプリケーションを記述およびビルドするために使用できるマネージ ツールのセットです。</span><span class="sxs-lookup"><span data-stu-id="f5733-119">**The SDK** (also known as "the tooling") is a set of managed tools that can be used to write and build .NET Core libraries and applications.</span></span> <span data-ttu-id="f5733-120">SDK には、CLI、MSBuild、関連するビルド タスクおよびターゲット、NuGet、新しいプロジェクト テンプレートなどが含まれています。1 つのマシンに複数の SDK を設定できますが (たとえば、明示的に以前のバージョンを必要とするプロジェクトを構築する場合など)、最新リリースのツールを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f5733-120">The SDK includes the CLI, MSBuild, and associated build tasks and targets, NuGet, new project templates, etc. It's possible to have multiple SDKs on a machine (for example, to build projects that explicitly require an older version), but the recommendation is to use the latest released tools.</span></span>

## <a name="recommended-package-names"></a><span data-ttu-id="f5733-121">推奨されるパッケージ名</span><span class="sxs-lookup"><span data-stu-id="f5733-121">Recommended package names</span></span>

<span data-ttu-id="f5733-122">次のガイダンスは、推奨するパッケージ名についてです。</span><span class="sxs-lookup"><span data-stu-id="f5733-122">The following guidance is our recommendation for package names.</span></span> <span data-ttu-id="f5733-123">パッケージ管理者は、さまざまな理由 (対象とする特定の配布では慣習が異なるなど) から分岐を選択することがあります。</span><span class="sxs-lookup"><span data-stu-id="f5733-123">A package maintainer may choose to diverge from it based on various reasons, such as, a different tradition of the specific distribution they're targeting.</span></span>

### <a name="minimum-package-set"></a><span data-ttu-id="f5733-124">最小パッケージ セット</span><span class="sxs-lookup"><span data-stu-id="f5733-124">Minimum package set</span></span>

* <span data-ttu-id="f5733-125">`dotnet-runtime-[major].[minor]`: 指定したバージョンの共有フレームワーク (パッケージ マネージャーでは、指定したメジャーとマイナーの組み合わせからなる最新パッチ バージョンのみ使用可能)。</span><span class="sxs-lookup"><span data-stu-id="f5733-125">`dotnet-runtime-[major].[minor]`: a shared framework with the specified version (only the latest patch version for a given major+minor combination should be available in the package manager).</span></span> <span data-ttu-id="f5733-126">**依存関係**: `dotnet-host`</span><span class="sxs-lookup"><span data-stu-id="f5733-126">**dependencies**: `dotnet-host`</span></span>
* <span data-ttu-id="f5733-127">`dotnet-sdk`: 最新の SDK</span><span class="sxs-lookup"><span data-stu-id="f5733-127">`dotnet-sdk`: the latest SDK.</span></span> <span data-ttu-id="f5733-128">**依存関係**: 最新の `dotnet-sdk-[major].[minor]`</span><span class="sxs-lookup"><span data-stu-id="f5733-128">**dependencies**: the latest `dotnet-sdk-[major].[minor]`.</span></span>
* <span data-ttu-id="f5733-129">`dotnet-sdk-[major].[minor]`: 指定したバージョンの SDK</span><span class="sxs-lookup"><span data-stu-id="f5733-129">`dotnet-sdk-[major].[minor]`: the SDK with the specified version.</span></span> <span data-ttu-id="f5733-130">指定するバージョンは、ユーザーが共有フレームワークに SDK を簡単に関連付けられるように、同梱する共有フレームワークの中で最も高いバージョンを含むものにします。</span><span class="sxs-lookup"><span data-stu-id="f5733-130">The version specified is the highest included version of included shared frameworks, so that users can easily relate an SDK to a shared framework.</span></span> <span data-ttu-id="f5733-131">**依存関係**: `dotnet-host`、1 つまたは複数の `dotnet-runtime-[major].[minor]` (ランタイムのうちの 1 つは SDK コード自体で使用され、それ以外はユーザーの構築および実行のためにこの場所にあります)。</span><span class="sxs-lookup"><span data-stu-id="f5733-131">**dependencies**: `dotnet-host`, one or more `dotnet-runtime-[major].[minor]` (one of the runtimes is used by the SDK code itself, the others are here for users to build and run against).</span></span>
* <span data-ttu-id="f5733-132">`dotnet-host`: 最新のホスト</span><span class="sxs-lookup"><span data-stu-id="f5733-132">`dotnet-host`: the latest host.</span></span>

#### <a name="preview-versions"></a><span data-ttu-id="f5733-133">プレビュー バージョン</span><span class="sxs-lookup"><span data-stu-id="f5733-133">Preview versions</span></span>

<span data-ttu-id="f5733-134">パッケージ管理者は、共有フレームワークと SDK のプレビュー バージョンを含めるという選択もできます。</span><span class="sxs-lookup"><span data-stu-id="f5733-134">Package maintainers may decide to include preview versions of the shared framework and SDK.</span></span> <span data-ttu-id="f5733-135">それらはバージョン管理されない `dotnet-sdk` パッケージに含めるべきではありませんが、名前のメジャーおよびマイナー バージョン セクションにプレビュー マーカーを追加して、バージョン管理されたパッケージとしてリリースできます。</span><span class="sxs-lookup"><span data-stu-id="f5733-135">Those should never be included in the unversioned `dotnet-sdk` package, but may be released as versioned packages with an additional preview marker appended to the major and minor version sections of the name.</span></span> <span data-ttu-id="f5733-136">たとえば、`dotnet-sdk-2.0-preview-final` のようなパッケージが可能です。</span><span class="sxs-lookup"><span data-stu-id="f5733-136">For example, there may be a `dotnet-sdk-2.0-preview-final` package.</span></span>

### <a name="optional-additional-packages"></a><span data-ttu-id="f5733-137">オプションの追加パッケージ</span><span class="sxs-lookup"><span data-stu-id="f5733-137">Optional additional packages</span></span>

<span data-ttu-id="f5733-138">管理者は、次のような追加パッケージの提供を選ぶこともできます。</span><span class="sxs-lookup"><span data-stu-id="f5733-138">Some maintainers may choose to provide additional packages such as:</span></span>

* <span data-ttu-id="f5733-139">`dotnet-lts`: 共有フレームワークの最新の長期サポート (LTS) バージョン。</span><span class="sxs-lookup"><span data-stu-id="f5733-139">`dotnet-lts`: the latest Long-Term Support (LTS) version of the shared framework.</span></span> <span data-ttu-id="f5733-140">[LTS および最新のリリース トレイン](~/docs/core/versions/lts-current.md)は、.NET Core がリリースされるさまざまな周期に対応しています。</span><span class="sxs-lookup"><span data-stu-id="f5733-140">[LTS and Current release trains](~/docs/core/versions/lts-current.md) correspond to different cadences at which .NET Core gets released.</span></span> <span data-ttu-id="f5733-141">ユーザーは更新の頻度に基づいて、採用するトレインを選択できます。</span><span class="sxs-lookup"><span data-stu-id="f5733-141">Users have a choice of adopting one or the other train, based on how often they are willing to update.</span></span> <span data-ttu-id="f5733-142">これはサポート レベルにも関連する概念であるため、検討しているディストリビューションによっては、有効な場合もあれば無効な場合があります。</span><span class="sxs-lookup"><span data-stu-id="f5733-142">This is a concept that is also tied to support levels, so it may or may not make sense depending on the distro being considered.</span></span>

## <a name="disk-layout"></a><span data-ttu-id="f5733-143">ディスク レイアウト</span><span class="sxs-lookup"><span data-stu-id="f5733-143">Disk layout</span></span>

<span data-ttu-id="f5733-144">.NET Core パッケージをインストールするときの、ディスクのインストール先における相対的な配置。</span><span class="sxs-lookup"><span data-stu-id="f5733-144">When installing .NET Core packages, the relative placement of their target destinations on disk matter.</span></span>
<span data-ttu-id="f5733-145">`dotnet.exe` ホストは、`dotnet-sdk` SDK パッケージのバージョン管理されたコンテンツと `dotnet-runtime` 共有フレームワーク パッケージを含む `sdk` および `shared` フォルダーのそばに配置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f5733-145">The `dotnet.exe` host should be placed next to `sdk` and `shared` folders that contain the versioned contents of the `dotnet-sdk` SDK packages, and `dotnet-runtime` shared framework packages.</span></span>

<span data-ttu-id="f5733-146">パッケージ内のファイルとディレクトリのディスク レイアウトはバージョン管理されます。</span><span class="sxs-lookup"><span data-stu-id="f5733-146">The disk layout of files and directories inside the packages is versioned.</span></span> <span data-ttu-id="f5733-147">つまり、最新の `dotnet-runtime` に更新すると、新しいバージョンが以前のバージョンと共存してインストールされます。これにより、パッケージの更新によって既存のアプリケーションが壊れる可能性が低くなります。</span><span class="sxs-lookup"><span data-stu-id="f5733-147">This means that updating to the latest `dotnet-runtime` installs the new version side by side with previous versions, reducing the possibility of breaking existing applications by updating the package.</span></span> <span data-ttu-id="f5733-148">パッケージの更新では、以前のバージョンは削除されません。</span><span class="sxs-lookup"><span data-stu-id="f5733-148">Package updates should not remove previous versions.</span></span>

## <a name="update-policies"></a><span data-ttu-id="f5733-149">ポリシーの更新</span><span class="sxs-lookup"><span data-stu-id="f5733-149">Update policies</span></span>

<span data-ttu-id="f5733-150">`update` が実行されると、各パッケージの動作は次のようになります。</span><span class="sxs-lookup"><span data-stu-id="f5733-150">When an `update` is performed, the behavior of each package is as follows:</span></span>

* <span data-ttu-id="f5733-151">`dotnet-runtime-[major].[minor]`: 新しいパッチ バージョンでパッケージを更新しますが、新しいマイナーまたはメジャー バージョンは別のパッケージとなります。</span><span class="sxs-lookup"><span data-stu-id="f5733-151">`dotnet-runtime-[major].[minor]`: new patch versions update the package, but new minor or major versions are separate packages.</span></span>
* <span data-ttu-id="f5733-152">`dotnet-sdk`: `update` がメジャー、マイナー、およびパッチ バージョンをロール フォワードします。</span><span class="sxs-lookup"><span data-stu-id="f5733-152">`dotnet-sdk`: `update` rolls forward major, minor, and patch versions.</span></span>
* <span data-ttu-id="f5733-153">`dotnet-sdk-[major].[minor]`: 新しいパッチ バージョンでパッケージを更新しますが、新しいマイナーまたはメジャー バージョンは別のパッケージとなります。</span><span class="sxs-lookup"><span data-stu-id="f5733-153">`dotnet-sdk-[major].[minor]`: new patch versions update the package, but new minor or major versions are separate packages.</span></span>
* <span data-ttu-id="f5733-154">`dotnet-lts`: `update` がメジャー、マイナー、およびパッチ バージョンをロール フォワードします。</span><span class="sxs-lookup"><span data-stu-id="f5733-154">`dotnet-lts`: `update` rolls forward major, minor, and patch versions.</span></span>

<span data-ttu-id="f5733-155">このトピックでは .NET Core のパッケージ化の推奨事項を示しましたが、各ディストリビューションで提供するバージョンと時期は、自由に選択できます。</span><span class="sxs-lookup"><span data-stu-id="f5733-155">This topic has presented our recommendations for packaging .NET Core, however each distro is free to choose what versions to offer and when.</span></span> <span data-ttu-id="f5733-156">たとえば、最新であることよりも安定性を重視するディストリビューションでは、LTS リリース トレインのあるバージョンのみをリリースするように選択できます。</span><span class="sxs-lookup"><span data-stu-id="f5733-156">For example, a distro that values stability more than being up-to-date may choose to release only versions that snap with the LTS release train.</span></span>