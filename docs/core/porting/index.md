---
title: .NET Framework から .NET Core にコードを移植する
description: 移植プロセスを理解し、.NET Framework プロジェクトを .NET Core に移植する際に役立つツールを確認します。
author: cartermp
ms.date: 09/13/2019
ms.custom: seodec18
ms.openlocfilehash: c349f7df3726e7a9814e5ad5e738742ab1bb9ff8
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2019
ms.locfileid: "72522987"
---
# <a name="port-your-code-from-net-framework-to-net-core"></a><span data-ttu-id="e2502-103">.NET Framework から .NET Core にコードを移植する</span><span class="sxs-lookup"><span data-stu-id="e2502-103">Port your code from .NET Framework to .NET Core</span></span>

<span data-ttu-id="e2502-104">.NET Framework 上で実行されるコードがある場合は、.NET Core 上でコードを実行することにも関心があるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="e2502-104">If you've got code that runs on the .NET Framework, you may be interested in running your code on .NET Core, too.</span></span> <span data-ttu-id="e2502-105">ここでは、移植プロセスの概要と、コードを .NET Core に移植するときに役立つツールの一覧を示します。</span><span class="sxs-lookup"><span data-stu-id="e2502-105">Here's an overview of the porting process and a list of the tools you may find helpful when porting your code to .NET Core.</span></span>

## <a name="overview-of-the-porting-process"></a><span data-ttu-id="e2502-106">移植プロセスの概要</span><span class="sxs-lookup"><span data-stu-id="e2502-106">Overview of the porting process</span></span>

<span data-ttu-id="e2502-107">プロジェクトを .NET Core に移植する場合、次のプロセスを実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e2502-107">This is the process we recommend you take when porting your project to .NET Core.</span></span> <span data-ttu-id="e2502-108">プロセスの各手順については、他の記事で詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="e2502-108">Each step of the process is covered in more detail in further articles.</span></span>

1. <span data-ttu-id="e2502-109">サードパーティの依存関係を識別し、理解します。</span><span class="sxs-lookup"><span data-stu-id="e2502-109">Identify and account for your third-party dependencies.</span></span>

   <span data-ttu-id="e2502-110">この手順では、サードパーティの依存関係がどのようなものか、それらにどのように依存しているか、それらが .NET Core でも実行されるかどうかを確認する方法、および実行されない場合に従う手順について理解します。</span><span class="sxs-lookup"><span data-stu-id="e2502-110">This step involves understanding what your third-party dependencies are, how you depend on them, how to check if they also run on .NET Core, and steps you can take if they don't.</span></span> <span data-ttu-id="e2502-111">またここでは、.NET Core で使われる [PackageReference](/nuget/consume-packages/package-references-in-project-files) 形式に依存関係を移行する方法についても説明しています。</span><span class="sxs-lookup"><span data-stu-id="e2502-111">It also covers how you can migrate your dependencies over to the [PackageReference](/nuget/consume-packages/package-references-in-project-files) format that is used in .NET Core.</span></span>

2. <span data-ttu-id="e2502-112">移植するすべてのプロジェクトを、.NET Framework 4.7.2 以降をターゲットとするように再ターゲットします。</span><span class="sxs-lookup"><span data-stu-id="e2502-112">Retarget all projects you wish to port to target the .NET Framework 4.7.2 or higher.</span></span>

   <span data-ttu-id="e2502-113">この手順により、.NET Core で特定の API がサポートされない場合に、.NET Framework 固有のターゲットに対して API の代替を確実に使用できます。</span><span class="sxs-lookup"><span data-stu-id="e2502-113">This step ensures that you can use API alternatives for .NET Framework-specific targets when .NET Core doesn't support a particular API.</span></span>

3. <span data-ttu-id="e2502-114">[.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md)使用して、アセンブリを分析し、その結果に基づいて移植を行う計画を作成します。</span><span class="sxs-lookup"><span data-stu-id="e2502-114">Use the [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) to analyze your assemblies and develop a plan to port based on its results.</span></span>

   <span data-ttu-id="e2502-115">API Portability Analyzer ツールは、コンパイル済みアセンブリを分析し、レポートを生成します。これには、移植性に関する大まかな概要と、ターゲットの .NET Core プラットフォームのパブリック公開領域にない使用中の各 API の内訳が記載されています。</span><span class="sxs-lookup"><span data-stu-id="e2502-115">The API Portability Analyzer tool analyzes your compiled assemblies and generates a report that shows a high-level portability summary and a breakdown of each API you're using that isn't available on targeted .NET Core platform public surface.</span></span> <span data-ttu-id="e2502-116">このレポートをコードベースの分析と共に使用して、コードを移植する方法の計画を作成します。</span><span class="sxs-lookup"><span data-stu-id="e2502-116">You can use this report alongside an analysis of your codebase to develop a plan for how you'll port your code over.</span></span>

4. <span data-ttu-id="e2502-117">ターゲットの .NET Core バージョンにお使いのプロジェクト ファイルを変換したら、Roslyn ベースの [.NET API アナライザー](../../standard/analyzers/api-analyzer.md)を使用して、一部のプラットフォームに <xref:System.PlatformNotSupportedException> をスローする API と、発生する可能性のあるその他の互換性の問題を識別します。</span><span class="sxs-lookup"><span data-stu-id="e2502-117">Once you have your project file converted to your targeted .NET Core version, you can use Roslyn based [.NET API analyzer](../../standard/analyzers/api-analyzer.md) to identify APIs throwing <xref:System.PlatformNotSupportedException> on some platforms and some other potential compatibility issues.</span></span>

5. <span data-ttu-id="e2502-118">テスト コードを移植します。</span><span class="sxs-lookup"><span data-stu-id="e2502-118">Port your tests code.</span></span>

   <span data-ttu-id="e2502-119">.NET Core への移植はコードベースにとって大きな変更となるため、コードの移植時にテストを実行できるように、テストを移植することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e2502-119">Because porting to .NET Core is such a significant change to your codebase, it's highly recommended to get your tests ported, so that you can run tests as you port your code over.</span></span> <span data-ttu-id="e2502-120">MSTest、xUnit、NUnit はすべて .NET Core をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="e2502-120">MSTest, xUnit, and NUnit all support .NET Core.</span></span>

6. <span data-ttu-id="e2502-121">移植の計画を実行します。</span><span class="sxs-lookup"><span data-stu-id="e2502-121">Execute your plan for porting!</span></span>

<span data-ttu-id="e2502-122">移植プロセス中に使うと役立つツールを、次の一覧に示します。</span><span class="sxs-lookup"><span data-stu-id="e2502-122">The following list shows tools you might find helpful to use during the porting process:</span></span>

- <span data-ttu-id="e2502-123">.NET Portability Analyzer - [コマンド ライン ツール](https://github.com/Microsoft/dotnet-apiport/releases)または [Visual Studio 拡張機能](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)。.NET Framework とターゲットの .NET Core プラットフォームの間のコードの移植性に関するレポートを生成できるツールです。</span><span class="sxs-lookup"><span data-stu-id="e2502-123">.NET Portability Analyzer - [command-line tool](https://github.com/Microsoft/dotnet-apiport/releases) or [Visual Studio Extension](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer), a tool that can generate a report of how portable your code is between .NET Framework and your target .NET Core platform.</span></span> <span data-ttu-id="e2502-124">レポートには、ターゲットの .NET Core プラットフォームにない型と API のアセンブリごとの内訳が含まれています。</span><span class="sxs-lookup"><span data-stu-id="e2502-124">The report contains an assembly-by-assembly breakdown of the Type and APIs missing on the target .NET Core platform.</span></span> <span data-ttu-id="e2502-125">詳細については、[.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md) に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e2502-125">For more information, see [.NET Portability Analyzer](../../standard/analyzers/portability-analyzer.md).</span></span> <span data-ttu-id="e2502-126">.NET Portability Analyzer ツールでは、特定のターゲットの .NET プラットフォームのパブリック公開領域で不足している API を特定できるため、移植を開始する前に実行することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="e2502-126">It is recommended to run the .NET Portability Analyzer tool before you start porting, as it will help you identify any gaps in missing APIs in specific targeted .NET platform public surface.</span></span>
- <span data-ttu-id="e2502-127">.NET API アナライザー - プラットフォームに <xref:System.PlatformNotSupportedException> をスローし、非推奨の API の呼び出しを検出し、さまざまなプラットフォームでの C# API の互換性リスクの可能性を検出する .NET Standard API を検出する Roslyn アナライザー。</span><span class="sxs-lookup"><span data-stu-id="e2502-127">.NET API Analyzer - A Roslyn analyzer that discovers .NET Standard API that throws <xref:System.PlatformNotSupportedException> on some platforms, detects calls to deprecated APIs, and discovers some other potential compatibility risks for C# APIs on different platforms.</span></span> <span data-ttu-id="e2502-128">詳細については、「[.NET API アナライザー](../../standard/analyzers/api-analyzer.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="e2502-128">For more information, see [.NET API analyzer](../../standard/analyzers/api-analyzer.md).</span></span> <span data-ttu-id="e2502-129">このアナライザーは .NET Core プロジェクトを作成した後、異なるプラットフォームでのランタイムの動作の違いを特定するために役立ちます。</span><span class="sxs-lookup"><span data-stu-id="e2502-129">This analyzer is helpful after you already created your .NET Core project to identify runtime behavior differences on different platforms.</span></span>
- <span data-ttu-id="e2502-130">Reverse Package Search - 型を検索し、その型を含むパッケージを検索するための[便利な Web サービス](https://packagesearch.azurewebsites.net)。</span><span class="sxs-lookup"><span data-stu-id="e2502-130">Reverse Package Search - A [useful web service](https://packagesearch.azurewebsites.net) that allows you to search for a type and find packages containing that type.</span></span>

<span data-ttu-id="e2502-131">さらに、[CsprojToVs2017](https://github.com/hvanbakel/CsprojToVs2017) ツールを使って、小規模なソリューションや個々のプロジェクトを .NET Core プロジェクトのファイル形式に移植してみることが可能です。</span><span class="sxs-lookup"><span data-stu-id="e2502-131">Additionally, you can attempt to port smaller solutions or individual projects to the .NET Core project file format with the [CsprojToVs2017](https://github.com/hvanbakel/CsprojToVs2017) tool.</span></span>

> [!WARNING]
> <span data-ttu-id="e2502-132">CsprojToVs2017 はサードパーティ製のツールです。</span><span class="sxs-lookup"><span data-stu-id="e2502-132">CsprojToVs2017 is a third-party tool.</span></span> <span data-ttu-id="e2502-133">すべてのプロジェクトに対してこれが動作する保証はありません。また、依存している動作に微妙な変更が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e2502-133">There is no guarantee that it will work for all of your projects, and it may cause subtle changes in behavior that you depend on.</span></span> <span data-ttu-id="e2502-134">CsprojToVs2017 は、自動化できる基本的なことを自動化するための "_開始点_" として使う必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2502-134">CsprojToVs2017 should be used as a _starting point_ that automates the basic things that can be automated.</span></span> <span data-ttu-id="e2502-135">これは、プロジェクトのファイル形式の移行に対する保証されたソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="e2502-135">It is not a guaranteed solution to migrating project file formats.</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="e2502-136">次へ</span><span class="sxs-lookup"><span data-stu-id="e2502-136">Next</span></span>](net-framework-tech-unavailable.md)
