---
title: スレッド処理 (C#)
ms.date: 07/20/2015
ms.assetid: 236d157d-37c0-4ee8-89fc-721e6c596325
ms.openlocfilehash: 35f0ee3bfd67104d9eaab7c4dde7e35a28a374c5
ms.sourcegitcommit: e614e0f3b031293e4107f37f752be43652f3f253
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/26/2018
ms.locfileid: "42934702"
---
# <a name="threading-c"></a><span data-ttu-id="46653-102">スレッド処理 (C#)</span><span class="sxs-lookup"><span data-stu-id="46653-102">Threading (C#)</span></span>
<span data-ttu-id="46653-103">スレッド処理により、C# プログラムが同時処理を実行できるようになり、一度に複数の操作を行うことが可能になります。</span><span class="sxs-lookup"><span data-stu-id="46653-103">Threading enables your C# program to perform concurrent processing so that you can do more than one operation at a time.</span></span> <span data-ttu-id="46653-104">たとえば、スレッド処理を使用してユーザーの入力を監視したり、バックグラウンド タスクを実行したり、入力の同時ストリームを処理したりできます。</span><span class="sxs-lookup"><span data-stu-id="46653-104">For example, you can use threading to monitor input from the user, perform background tasks, and handle simultaneous streams of input.</span></span>  
  
 <span data-ttu-id="46653-105">スレッドには次のようなプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="46653-105">Threads have the following properties:</span></span>  
  
-   <span data-ttu-id="46653-106">スレッドにより、プログラムの同時処理の実行が可能になります。</span><span class="sxs-lookup"><span data-stu-id="46653-106">Threads enable your program to perform concurrent processing.</span></span>  
  
-   <span data-ttu-id="46653-107">.NET Framework の <xref:System.Threading> 名前空間により、スレッドの使用が簡単になります。</span><span class="sxs-lookup"><span data-stu-id="46653-107">The .NET Framework <xref:System.Threading> namespace makes using threads easier.</span></span>  
  
-   <span data-ttu-id="46653-108">スレッドは、アプリケーションのリソースを共有します。</span><span class="sxs-lookup"><span data-stu-id="46653-108">Threads share the application's resources.</span></span> <span data-ttu-id="46653-109">詳細については、「[Using Threads and Threading](../../../../../docs/standard/threading/using-threads-and-threading.md)」(スレッドの使用とスレッド処理) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="46653-109">For more information, see [Using Threads and Threading](../../../../../docs/standard/threading/using-threads-and-threading.md).</span></span>  
  
 <span data-ttu-id="46653-110">既定では、C# プログラムにはスレッドが 1 つあります。</span><span class="sxs-lookup"><span data-stu-id="46653-110">By default, a C# program has one thread.</span></span> <span data-ttu-id="46653-111">ただし、補助スレッドを作成し、プライマリ スレッドと並行してコードを実行するために使用することができます。</span><span class="sxs-lookup"><span data-stu-id="46653-111">However, auxiliary threads can be created and used to execute code in parallel with the primary thread.</span></span> <span data-ttu-id="46653-112">このようなスレッドは、よく*ワーカー スレッド*と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="46653-112">These threads are often called *worker threads*.</span></span>  
  
 <span data-ttu-id="46653-113">ワーカー スレッドを使用すると、プライマリ スレッドに拘束されることなく、時間がかかるタスクやタイム クリティカルなタスクを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="46653-113">Worker threads can be used to perform time-consuming or time-critical tasks without tying up the primary thread.</span></span> <span data-ttu-id="46653-114">たとえば、ワーカー スレッドは、前の要求が完了するのを待たずに受信する要求を処理するために、サーバー アプリケーションで多く使用されます。</span><span class="sxs-lookup"><span data-stu-id="46653-114">For example, worker threads are often used in server applications to fulfill incoming requests without waiting for the previous request to be completed.</span></span> <span data-ttu-id="46653-115">ワーカー スレッドは、デスクトップ アプリケーションで "バックグラウンド" タスクを実行するためにも使用されます。これにより、ユーザー インターフェイス要素を動かすメイン スレッドは引き続きユーザー操作に応答できます。</span><span class="sxs-lookup"><span data-stu-id="46653-115">Worker threads are also used to perform "background" tasks in desktop applications so that the main thread--which drives user interface elements--remains responsive to user actions.</span></span>  
  
 <span data-ttu-id="46653-116">スレッド処理はスループットと応答速度の問題を解決しますが、その一方で、デッドロックや競合状態のようなリソース共有の問題を発生させます。</span><span class="sxs-lookup"><span data-stu-id="46653-116">Threading solves problems with throughput and responsiveness, but it can also introduce resource-sharing issues such as deadlocks and race conditions.</span></span> <span data-ttu-id="46653-117">複数のスレッドは、ファイル ハンドルやネットワーク接続など、さまざまなリソースを必要とするタスクに最適です。</span><span class="sxs-lookup"><span data-stu-id="46653-117">Multiple threads are best for tasks that require different resources such as file handles and network connections.</span></span> <span data-ttu-id="46653-118">複数のスレッドを 1 つのリソースに割り当てると、同期の問題が発生しやすくなり、他のスレッドの待機中に頻繁にブロックされるスレッドがあると、複数のスレッドを使用する目的が果たされなくなります。</span><span class="sxs-lookup"><span data-stu-id="46653-118">Assigning multiple threads to a single resource is likely to cause synchronization issues, and having threads frequently blocked when waiting for other threads defeats the purpose of using multiple threads.</span></span>  
  
 <span data-ttu-id="46653-119">一般的な方法としては、ワーカー スレッドを使用して、他のスレッドで使用されるリソースをあまり必要としない、時間がかかるタスクやタイム クリティカルなタスクを実行します。</span><span class="sxs-lookup"><span data-stu-id="46653-119">A common strategy is to use worker threads to perform time-consuming or time-critical tasks that do not require many of the resources used by other threads.</span></span> <span data-ttu-id="46653-120">当然ながら、プログラムの一部のリソースは、複数のスレッドによってアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="46653-120">Naturally, some resources in your program must be accessed by multiple threads.</span></span> <span data-ttu-id="46653-121">このような場合に、<xref:System.Threading> 名前空間によってスレッドを同期するためのクラスが提供されます。</span><span class="sxs-lookup"><span data-stu-id="46653-121">For these cases, the <xref:System.Threading> namespace provides classes for synchronizing threads.</span></span> <span data-ttu-id="46653-122">これらのクラスには、<xref:System.Threading.Mutex>、<xref:System.Threading.Monitor>、<xref:System.Threading.Interlocked>、<xref:System.Threading.AutoResetEvent>、および <xref:System.Threading.ManualResetEvent> があります。</span><span class="sxs-lookup"><span data-stu-id="46653-122">These classes include <xref:System.Threading.Mutex>, <xref:System.Threading.Monitor>, <xref:System.Threading.Interlocked>, <xref:System.Threading.AutoResetEvent>, and <xref:System.Threading.ManualResetEvent>.</span></span>  
  
 <span data-ttu-id="46653-123">これらのクラスの一部またはすべてを使用して、複数のスレッドのアクティビティを同期できますが、スレッド処理一部のサポートは C# 言語によりサポートされています。</span><span class="sxs-lookup"><span data-stu-id="46653-123">You can use some or all these classes to synchronize the activities of multiple threads, but some support for threading is supported by the C# language.</span></span> <span data-ttu-id="46653-124">たとえば、[lock ステートメント](../../../../csharp/language-reference/keywords/lock-statement.md)は、<xref:System.Threading.Monitor> を暗黙的に使用することで同期機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="46653-124">For example, the [Lock Statement](../../../../csharp/language-reference/keywords/lock-statement.md) provides synchronization features through implicit use of <xref:System.Threading.Monitor>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="46653-125">[!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)] 以降では、<xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> クラスおよび <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> クラス、[Parallel LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688)、<xref:System.Collections.Concurrent?displayProperty=nameWithType> 名前空間の新しい同時実行コレクション クラス、スレッドではなくタスクの概念をベースにした新しいプログラミング モデルにより、マルチスレッド プログラミングが大幅に簡略化されています。</span><span class="sxs-lookup"><span data-stu-id="46653-125">Beginning with the [!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)], multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="46653-126">詳細については、[並列プログラミング](../../../../../docs/standard/parallel-programming/index.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="46653-126">For more information, see [Parallel Programming](../../../../../docs/standard/parallel-programming/index.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="46653-127">関連トピック</span><span class="sxs-lookup"><span data-stu-id="46653-127">Related Topics</span></span>  
  
|<span data-ttu-id="46653-128">Title</span><span class="sxs-lookup"><span data-stu-id="46653-128">Title</span></span>|<span data-ttu-id="46653-129">説明</span><span class="sxs-lookup"><span data-stu-id="46653-129">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="46653-130">スレッドの同期 (C#)</span><span class="sxs-lookup"><span data-stu-id="46653-130">Thread Synchronization (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-synchronization.md)|<span data-ttu-id="46653-131">スレッドの相互作用を制御する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="46653-131">Describes how to control the interactions of threads.</span></span>|  
|[<span data-ttu-id="46653-132">スレッド化</span><span class="sxs-lookup"><span data-stu-id="46653-132">Threading</span></span>](../../../../../docs/standard/threading/index.md)|<span data-ttu-id="46653-133">.NET Framework でのスレッドの実装方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="46653-133">Describes how to implement threading in the .NET Framework.</span></span>|
