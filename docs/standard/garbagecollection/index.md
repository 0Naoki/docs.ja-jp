---
title: "ガベージ コレクション"
description: "ガベージ コレクション"
keywords: .NET, .NET Core
author: richlander
manager: wpickett
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.technology: .net-core-technologies
ms.devlang: dotnet
ms.assetid: db39a0f5-e363-490f-a7e6-adb9a6ff2a8c
translationtype: Human Translation
ms.sourcegitcommit: 213ce098bcc2b5e31c55e759d895254d5ca33caa
ms.openlocfilehash: 2406a03fa64eb02c70f05c1e8240e4bc5981e98d

---

# <a name="garbage-collection"></a>ガベージ コレクション

ガベージ コレクションは、.NET マネージ コードのプラットフォームの最も重要な機能の 1 つです。 ガベージ コレクター (GC) は、メモリの割り当てと解放を管理します。 メモリの割り当てと解放、およびそのメモリを使用するオブジェクトの有効期間の管理方法を把握する必要はありません。 割り当ては、オブジェクトの_新規作成_、または値型がボックス化されるたびに行われます。 通常、割り当てはすぐに行われます。 オブジェクトを割り当てるための十分なメモリがない場合、GC はガベージ メモリの収集や破棄を行って、新しい割り当てのためのメモリを確保する必要があります。 このプロセスが、“ガベージ コレクション“ と呼ばれます。

ガベージ コレクターは自動メモリ マネージャーとして機能します。 次のような利点があります。

*   アプリケーションを開発するときにメモリを解放する必要がありません。
*   オブジェクトが効率的にマネージ ヒープに割り当てられます。
*   使用されなくなったオブジェクトが解放され、メモリがクリアされてその後の割り当てに使用できるようになります。 マネージ オブジェクトは自動的にクリーンな内容で開始されるため、コンストラクターでデータ フィールドごとに初期化する必要はありません。
*   オブジェクトで別のオブジェクトの内容を使用できなくすることで、メモリの安全が確保されます。

.NET GC はジェネレーション別で、3 つのジェネレーションがあります。 各世代には、割り当てられたオブジェクトのストレージを使用する、独自のヒープがあります。 ほとんどのオブジェクトが存続期間が短いか長いかのどちらかであるという基本原則があります。 オブジェクトが最初に割り当てられるのが、ジェネレーション 0 です。 多くの場合、オブジェクトの存続期間は第一世代までです。これは、次のガベージ コレクションが発生するまでオブジェクトが使用されない (スコープ外にある) ためです。 ジェネレーション 0 の収集はすばやく行われます。この世代に関連するヒープは小さいためです。 ジェネレーション 1 は 2 番目に使用される領域です。 存続期間は短いが、ジェネレーション 0 の収集 (多くの場合偶然行われる) 時に残ったオブジェクトがジェネレーション 1 になります。ジェネレーション 1 の収集も、関連するヒープが小さいため、素早く行われます。\. オブジェクトは収集されるか、次のジェネレーションのヒープに昇格されるため、最初の 2 つのヒープは小さいままです。 存続期間の長いオブジェクトが、ジェネレーション 2 です。 ジェネレーション 2 のヒープは、とても大きくなる場合があります。含まれているオブジェクトの存続期間が長く、次にオブジェクトを昇格させるジェネレーション 3 のヒープがないためです。

GC には大きなオブジェクト ヒープ (LOH) と呼ばれる、大きなオブジェクトのための追加ヒープがあります。 このヒープは 85,000 バイト以上のオブジェクトのために予約されています。 たとえば、85,000 要素のバイト配列 (Byte[]) は、大きなオブジェクトになります。 大きなオブジェクトはジェネレーション別のヒープには割り当てられず、LOH に直接割り当てられます。

ジェネレーション 2 および LOH の収集では、実行時間が長いプログラムや、大量のデータを処理するプログラムで、著しく時間がかかる場合があります。 大規模なサーバーのプログラムには数十 GB のヒープがあるとされています。 GC は、プログラムの実行を妨げないための、時間を短縮するさまざまな手法を取り入れています。 主な手法は、プログラムの実行を妨げないように、バックグラウンド スレッドでできるだけ多くガベージ コレクションの処理を行うことです。 また、GC は開発者向けに動作に影響を与えるいくつかの方法を公開しています。これらがパフォーマンスの改善に非常に役立つ場合があります。

## <a name="related-topics"></a>関連トピック

タイトル | 説明
----- | ----------- 
[自動メモリ管理とガベージ コレクション](gc.md) | .NET のメモリ管理の基本概念について紹介します。
[ガベージ コレクションの基礎](fundamentals.md) | ガベージ コレクションの動作、マネージ ヒープに対するオブジェクトの割り当て方法、およびその他の主要な概念について説明します。
[発生したコレクション](induced.md) | ガベージ コレクションがどのように行われるかについて説明します。
[待機モード](latency.md) | ガベージ コレクションの割り込みの動作を決定するモードについて説明します。
[弱い参照](weak-references.md) | アプリケーションからオブジェクトへのアクセスを許容したまま、そのオブジェクトをガベージ コレクターが収集できるようにする機能について説明します。
 
## <a name="reference"></a>参照

[System.GC](xref:System.GC)

[System.GCCollectionMode](xref:System.GCCollectionMode)

[System.Runtime.GCLatencyMode](xref:System.Runtime.GCLatencyMode)

[System.Runtime.GCSettings](xref:System.Runtime.GCSettings)

[GCSettings.LargeObjectHeapCompactionMode](xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode)

[Object.Finalize](xref:System.Object.Finalize)

[System.IDisposable](xref:System.IDisposable)

## <a name="see-also"></a>関連項目

[アンマネージ リソースのクリーンアップ](unmanaged.md)




<!--HONumber=Nov16_HO1-->


