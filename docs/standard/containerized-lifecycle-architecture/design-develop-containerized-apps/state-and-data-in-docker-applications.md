---
title: Docker アプリケーションの状態とデータ
description: Microsoft プラットフォームとツールでコンテナー化された Docker アプリケーションのライフサイクル
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 78db191bdec4c25c11728d819d89eaaaff4bd7da
ms.sourcegitcommit: 6eac9a01ff5d70c6d18460324c016a3612c5e268
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/15/2018
ms.locfileid: "45638848"
---
# <a name="state-and-data-in-docker-applications"></a>Docker アプリケーションの状態とデータ

コンテナーのプリミティブ型では、不変性です。 VM と比較すると、コンテナーはしない共通の出現として表示されなくなります。 配信不能処理、CPU の過負荷、または完全または失敗したディスクからのさまざまな形式で、VM が失敗します。 まだ、VM を使用する予定し、RAID ドライブがドライブ障害、データの管理を保証するために一般的です。

ただし、コンテナーがプロセスのインスタンスがあると考えられます。 プロセスは、永続的な状態で保持されません。 場合でも、コンテナーは、そのローカル ストレージに書き込むことができます、ことと、そのインスタンスが無期限の周囲になりますと仮定した場合と同じことと仮定すると、メモリの単一コピーが使用されます。 プロセスなどのコンテナーが複製されます、強制終了または、移動される可能性がコンテナー オーケストレーターで管理対象、ことを想定してください。

Docker と呼ばれる機能を使用して、*オーバーレイ ファイル システム*いずれかを格納する書き込み時コピー処理を実装するには、基になる元のイメージと比較して、コンテナーのルート ファイル システムに情報を更新します。 コンテナーはその後、システムから削除する場合、これらの変更は失われます。 コンテナーであり、そのためが永続的なストレージ既定では。 コンテナーの状態を保存することはできますが、この問題を回避、システムの設計となりますコンテナー アーキテクチャの原則と競合しています。

Docker アプリケーションの永続的なデータを管理するには、一般的な解決策があります。

-   [**データ ボリューム**](https://docs.docker.com/engine/tutorials/dockervolumes/) これらのだけ説明するように、ホストにマウントします。

-   [**データ ボリューム コンテナー**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) サイクルできますを外部のコンテナーを使用して、コンテナー間で共有記憶域を提供します。

-   [**ボリューム プラグイン**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) これら長期的な永続化を提供するリモートの場所へのボリュームのマウントします。

-   **リモート データ ソース** 例は、SQL および NOSQL データベースを含めるまたは Redis のようなキャッシュ サービス。

-   [**Azure Storage**](https://docs.microsoft.com/azure/storage/) geo 再頒布可能プラットフォームはコンテナーの最適な長期的な永続化を提供するサービス (PaaS) 記憶域として提供します。

バイパスする 1 つまたは複数のコンテナー内のディレクトリを特別に指定されたデータ ボリューム、[共用体のファイル システム](https://docs.docker.com/glossary/?term=Union%20file%20system)します。 データ ボリュームは、データ、コンテナーのライフ サイクルの独立を維持するために設計されています。 Docker したがってしないと自動的に削除ボリュームはそのコンテナーによって参照されなく「ガベージ収集」のボリュームも、コンテナーは削除します。 ホスト オペレーティング システムでは、参照でき、任意のボリュームのデータを自由に編集データ ボリュームを慎重に使用するもう 1 つの理由であることができます。

A[データ ボリューム コンテナー](https://docs.docker.com/glossary/?term=volume)では、通常のデータ ボリューム。 休止コンテナー (前述) 内に作成された 1 つまたは複数のデータ ボリュームが含まれている本質的にすることをお勧めします。 データ ボリューム コンテナーを使用すると、中央のマウント ポイントからコンテナーへアクセスできます。 このアクセス方法の利点は、データ コンテナーは論理マウント ポイントの作成元のデータの場所が抽象化です。 また、"application"コンテナーの作成と破棄専用コンテナーに永続的なデータを維持しながらデータ コンテナーのボリュームにアクセスすることもできます。

図 4-5 では、通常の Docker ボリューム コンテナー自体ものの、ホスト サーバー/VM の物理的な境界内での記憶域上に配置できることを示します。 *Docker ボリュームは 1 つのホスト サーバーまたは VM から別のボリュームを使用する機能がない*します。

![](./media/image5.png)

図 4-5: データ ボリュームとコンテナー アプリ/コンテナーの外部データ ソース

別々 の物理ホスト上で実行されるコンテナー間で共有されるデータを管理することができないのためお勧め使用しないことのボリュームのビジネス データ、Docker ホストが固定ホストおよび VM、しない限り、ため、オーケストレーターで Docker コンテナーを使用する場合コンテナーは、1 から、クラスターで実行される最適化に応じて、別のホストに移動する必要があります。

そのため、通常のデータ ボリュームは、トレース ファイルやテンポラル ファイルなどの場合、または複数のホストは、コンテナーは移動されませんにはビジネス データの整合性に影響する同様の概念を使用する適切なメカニズムです。

[ボリューム プラグイン](https://docs.docker.com/engine/extend/plugins_volume/)クラスター内のすべてのホスト間でデータを提供します。 すべてのボリューム プラグインは同じように作成されますが、ボリューム プラグインは通常、不変のコンテナーから外部化されているの永続的な信頼性の高いストレージを提供します。

リモート データ ソースと SQL Database、DocumentDB、Redis のようなリモート キャッシュなどのキャッシュは、コンテナーなしで開発と同じでになります。 これは、ビジネス アプリケーションのデータを格納する優先、および実績のある方法のいずれかです。


>[!div class="step-by-step"]
[前へ](monolithic-applications.md)
[次へ](soa-applications.md)
