---
title: "状態と Docker のアプリケーションでのデータ"
description: "Microsoft プラットフォームとツールでコンテナー化された Docker アプリケーションのライフサイクル"
keywords: "Docker, マイクロサービス, ASP.NET, コンテナー"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: d4b75faffd76a85f9ca1c779ed58bfa37625cff3
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/23/2017
---
# <a name="state-and-data-in-docker-applications"></a>状態と Docker のアプリケーションでのデータ

コンテナーのプリミティブ型は不変です。 VM を比較すると、コンテナーはない共通の出現と表示されなくなります。 VM が停止しているプロセス、CPU の過負荷、または完全または障害が発生したディスクからのさまざまな形式で失敗します。 まだ、使用する VM を考えて、RAID ドライブ ドライブ エラーのデータの管理を確保するための一般的です。

ただし、コンテナーはプロセスのインスタンスにするものです。 プロセスでは、持続性のある状態を維持しません。 場合でも、コンテナーは、そのローカル ストレージに書き込むことができます、そのインスタンスがなるを無期限と仮定した場合は、メモリの単一コピーが持続的にすると仮定した場合と同じなります。 プロセスと同様に、コンテナーが重複しています、強制終了、または、それらを移動する可能性がありますコンテナー オーケストレータで管理されている、ときにことを想定する必要があります。

Docker と呼ばれる機能を使用して、*ファイル システムをオーバーレイ*いずれかを格納する書き込み時コピー処理を実装するには、基になる元のイメージと比較して、コンテナーのルート ファイル システムに情報を更新します。 コンテナーはその後、システムから削除する場合、これらの変更は失われます。 コンテナー、そのため、ありません永続的ストレージ既定では。 コンテナーの状態を保存することはできますが、この問題を回避システムの設計になりますコンテナー アーキテクチャの原則と競合しています。

Docker のアプリケーションで永続的なデータを管理するには、一般的な解決方法があります。

-   [**データ ボリューム**](https://docs.docker.com/engine/tutorials/dockervolumes/) これらのホストだけに述べたようにマウントします。

-   [**データ ボリューム コンテナー**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) 順番に表示することができますを外部のコンテナーを使用して、コンテナー間で共有記憶域を提供します。

-   [**ボリューム プラグイン**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) これら長期的な永続化を提供するリモートの場所へのボリュームのマウントします。

-   **リモート データ ソース** 例 SQL および NO SQL データベースを含めたり、Redis のようなサービスをキャッシュします。

-   [**Azure ストレージ**](https://docs.microsoft.com/azure/storage/) これにより、コンテナーの最適な長期的な永続化を提供するサービス (PaaS) 記憶域として geo 配布可能なプラットフォームです。

バイパスする 1 つまたは複数のコンテナー内のディレクトリを特別に指定されたデータ ボリューム、[共用体のファイル システム](https://docs.docker.com/v1.8/reference/glossary#union-file-system)です。 データ ボリュームは、コンテナーのライフ サイクルに関係なく、データを維持するために設計されています。 Docker したがってしないと自動的に削除ボリューム コンテナーによって参照されなく「ガベージ コレクションを」ボリュームも、コンテナーは削除します。 ホスト オペレーティング システムでは、参照でき、任意のボリュームのデータを自由に編集データ ボリュームを慎重に使用する 1 つの理由はすることができます。

A[データ ボリューム コンテナー](https://docs.docker.com/v1.8/userguide/dockervolumes/)通常のデータ ボリュームより強化されています。 基本的に休止しているコンテナー (前述のとおり) 内に作成された 1 つまたは複数のデータ ボリュームを持つことをお勧めします。 データ ボリューム コンテナーは、中央のマウント ポイントから、コンテナーにアクセスを提供します。 このアクセス方法の利点は、論理マウント ポイントのデータ コンテナーを作成元のデータの場所を分離することです。 また、"application"コンテナーを作成して、データを専用のコンテナー内で永続的に維持しながら破棄するデータ コンテナーのボリュームにアクセスすることもできます。

図 4-5 は、正規の Docker ボリュームをストレージ コンテナー自体オブはホスト サーバーまたは VM の物理的な境界内に配置できることを示します。 *Docker ボリュームは、1 つのホスト サーバー/VM から別のボリュームを使用する機能がない*です。

![](./media/image5.png)

図 4-5: データのボリュームとコンテナー/コンテナー アプリケーションの外部データ ソース

別々 の物理ホスト上で実行されるコンテナー間で共有データを管理することができない、ためお勧めしていないボリュームを使用するビジネス データの Docker ホストに固定ホスト/VM、しない限り、ために、orchestrator では、Docker コンテナーを使用する場合コンテナーは、クラスターで実行する最適化に応じて、別のホストを 1 つから移動するが必要です。

したがって、通常のデータ ボリュームは、トレース ファイル、テンポラル ファイル、または場合、または、コンテナーが複数のホスト間で移動されたときに、ビジネス データの整合性には影響しません、同様の考え方を使用する適切なメカニズムです。

ボリュームのプラグインと同様に[Flocker](https://clusterhq.com/flocker/)クラスター内のすべてのホスト間でデータを提供します。 すべてのボリューム プラグインは均等に作成されますが、ボリュームのプラグインは通常外部化された永続的な信頼性の高い記憶域の変更できないコンテナーを提供します。

リモート データ ソースと SQL データベース、DocumentDB の場合、Redis のようにリモートのキャッシュなどのキャッシュは、コンテナーなしの開発と同じではなります。 これは、ビジネス アプリケーションのデータを格納する、推奨されると、実績のある方法のいずれかです。


>[!div class="step-by-step"]
[前](モノリシック-applications.md) [次へ] (soa applications.md)
