---
title: モノリシック アプリケーション
description: Microsoft プラットフォームとツールでコンテナー化された Docker アプリケーションのライフサイクル
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: fe25fa8772c60625c5564d5e7194957366a6010a
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
ms.locfileid: "33572750"
---
# <a name="monolithic-applications"></a>モノリシック アプリケーション

このシナリオで単一引用符と単一の web アプリケーションやサービスを構築しているコンテナーとして展開します。 アプリケーション内で、構造体できない可能性がありますモノリシックです。いくつかのライブラリ、コンポーネント、または (アプリケーション レイヤーでドメイン層、データ アクセス層など) でもレイヤーを構成する場合があります。 外部で、1 つのプロセス、1 つの web アプリケーション、または 1 つのサービスと同様に、1 つのコンテナーであります。

このモデルを管理するには、アプリケーションを表す単一のコンテナーを展開します。 これを拡張するためをロード バランサーを前面にで、いくつかの複数コピーを追加します。 簡単な 1 つのコンテナーまたは仮想マシン (VM) で単一の展開の管理に由来します。

次のコンテナーが 1 つの操作のみと、1 つのプロセスでは、プリンシパルは、モノリシックなパターンは、競合です。 図 4-1 に示すように、複数のコンポーネント/ライブラリまたは各コンテナー内の内部のレイヤーを含めることができます。

![](./media/image1.png)

図 4-1: モノリシック アプリケーション アーキテクチャの例

このアプローチの欠点がある場合、またはアプリケーションが増大すると、拡張を必要とする場合。 アプリケーション全体がスケーリングすれば、実際には問題ではありません。 ただし、ほとんどの場合、アプリケーションのいくつかの部分は、チョーク ポイントをスケーリングを必要とするその他のコンポーネントがあまり使用されてます。

一般的な e コマースの使用例を使用して、、製品情報コンポーネントを拡張するは必要な場合が多くあります。 製品を購入するユーザーよりも多くのユーザーが製品を参照します。 より多くの顧客が、支払いパイプラインではなくバスケットを使用します。 コメントを追加したり、購入履歴を表示したりする顧客はそれほどいません。 コンテンツやマーケティング キャンペーンを管理する必要がある 1 つの領域内の従業員のほんの一部のみがある可能性があります。 モノリシックな設計をスケーリングでは、複数回のすべてのコードが配置されます。

加え、"スケールのすべての"アプリケーション全体とすべてのインスタンスの再配置の完了の完全な再テスト問題、1 つのコンポーネントへの変更を必要とします。

モノリシックなアプローチは一般的では、多くの組織は、このアーキテクチャのメソッドを使用して開発する. 多くをご利用いただけます良い十分な結果の制限が発生する他のユーザーがします。 ツールとインフラストラクチャが複雑すぎて、Soa のビルドおりしていない必要があるために、このモデルでのアプリケーションを設計多く: アプリが拡張されるまでです。

インフラストラクチャの観点からは、各サーバーは、同じホスト内で多くのアプリケーションを実行し、図 4-2 に示すように、リソース使用率を効率よく行う許容の比率があります。

![](./media/image2.png)

図 4-2: 複数のアプリ/コンテナーを実行するホスト

Azure での単体のアプリケーションを展開するには、インスタンスごとに専用の Vm を使用します。 使用して[Azure VM スケール セット](https://docs.microsoft.com/azure/virtual-machine-scale-sets/)Vm を簡単に拡張することができます。 [Azure App Service](https://azure.microsoft.com/en-us/services/app-service/) では、VM の管理を必要とせずに、モノリシック アプリケーションを実行し、インスタンスを簡単にスケーリングすることができます。 2016 年以降、Azure アプリ サービスは、特定の展開の簡素化、同様に、Docker コンテナーの 1 つのインスタンスを実行できます。 Docker を使用して、Docker ホストと 1 つの VM を展開して実行する複数のインスタンス。 図 4-3 に示すように、Azure の負荷分散装置を使用して、スケールを管理できます。

![](./media/image3.png)

図 4-3: 複数のホスト Docker アプリケーション アプリ/コンテナーが 1 つをスケール アウト

従来の展開方法を使用してさまざまなホストに展開を管理することができます。 Docker ホストを管理するにはのようなコマンドを使用して`docker run`継続的な配信 (CD) パイプラインは、後でこの電子書籍の説明などのオートメーションによって手動でします。

## <a name="monolithic-application-deployed-as-a-container"></a>コンテナーとして展開するモノリシック アプリケーション

モノリシックな展開を管理するコンテナーを使用する利点があります。 コンテナーのインスタンスをスケーリングする処理は、追加の VM を展開するよりもはるかに高速で簡単です。 VM スケール セットが必要な Docker コンテナーをホストする Vm をスケーリングする優れた機能しますが、セットアップに時間がかかります。 アプリのインスタンスとして展開する場合、アプリの構成は VM の一部として管理されます。

更新プログラムを Docker イメージとして展開する方がはるかに高速で、ネットワークの効率が高くなります。 Vn インスタンスは、追加の Vm による追加コストを排除すること、バーチャル ネットワーク 1 インスタンスと同じホストで設定できます。 Docker のイメージは、通常 (秒単位) の展開の高速で起動します。 呼び出しと同じくらい簡単には、Docker インスタンス設定解除を行う、`docker stop`コマンド、通常の 1 秒未満で完了します。

コンテナーは、本質的に変更可能な設計では、ため決して更新スクリプトをいくつかの特定の構成またはファイルがディスク上の残りのアカウントを忘れたために、破損している Vm について心配する必要があります。

モノリシックなアプリは、Docker で利用できるがおするいると接触している利点ヒントのみにします。 コンテナーを管理するためのより大きな利点は、さまざまなインスタンスと各コンテナー インスタンスのライフ サイクル管理コンテナー orchestrators による展開から取得されます。 モノリシック アプリケーションを、スケーリング、開発、および展開を個別に実行できるサブシステムに分割することが、マイクロサービスの領域への入り口になります。

## <a name="publishing-a-single-docker-container-app-to-azure-app-service"></a>1 つの Docker コンテナー アプリを Azure App Service に発行

か、またはアプリが Azure にデプロイされたコンテナーのクイック検証を取得するためだけで、単一のコンテナーにアプリを Azure アプリのサービスは、単一コンテナーのスケーラブルなサービスを提供する優れた方法を提供します。

直感的な Azure App Service の使用取得できますおよび優れた Git を提供するため、迅速に実行されている統合、コードを実行する、Microsoft Visual Studio でビルドおよび直接 Azure にデプロイします。 従来 (Docker を使用したなし)、他の機能、フレームワーク、またはアプリ サービスでサポートされていない依存関係が必要な場合、Azure チームは、App Service でそれらの依存関係を更新するまで待機するために必要かなどの他のサービスに切り替えられますが、Service Fabric、クラウド サービス、またはでもプレーンの Vm をさらに制御して、アプリケーションの必要なコンポーネントまたはフレームワークをインストールできます。

これで、ただし、(2016 年 11 月に Microsoft 接続 2016年で発表された) Visual Studio 2017 を使用する場合に、図 4‑4 に示すように、Azure App Service でのコンテナーのサポートができるアプリの環境に自由に含めるとします。 コンテナーで実行しているため、アプリに依存関係を追加した場合は、Dockerfile または Docker イメージにこれらの依存関係をなどの機能を取得します。

![](./media/image4.png)

図 4-4: Azure App Service に Visual Studio アプリ/コンテナーからコンテナーを公開します。

図 4-4 も発行フローが Azure コンテナー レジストリ (レジストリで、Azure でデプロイに近いし、Azure Active Directory グループとアカウントによって保護された) 可能性があるコンテナー レジストリまたはその他の任意の Docker レジストリを介してイメージをプッシュすることを示していますDocker Hub または内部設置型のレジストリのように


>[!div class="step-by-step"]
[前] (共通のコンテナーのデザインの principles.md) [次へ] (state-and-data-in-docker-applications.md)
