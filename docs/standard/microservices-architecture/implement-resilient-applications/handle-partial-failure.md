---
title: "部分的な障害を処理"
description: "コンテナーの .NET アプリケーションの .NET Microservices アーキテクチャ |部分的な障害を処理"
keywords: "Docker, マイクロサービス, ASP.NET, コンテナー"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: b7d16acf3de2d395da70e8f46e59c129dec24f71
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2017
---
# <a name="handling-partial-failure"></a>部分的な障害を処理

Microservices ベースのアプリケーションのような分散システムでは、一部の障害のリスクがないです。 たとえば、単一のマイクロ サービス/コンテナーが失敗する可能性、短い時間で応答できない可能性があります。 または 1 つの VM またはサーバーがクラッシュすることができます。 クライアントとサービスは別のプロセスであるため、サービスできないことがあります、クライアントの要求に迅速に応答します。 サービスは、オーバー ロードされた、非常に遅いに応答しての要求があるか、単にアクセスできない可能性が短時間ネットワークの問題によりください。

たとえば、注文の詳細ページ、eShopOnContainers からをサンプル アプリケーションについて考えます。 順序マイクロ サービスが応答しない場合、ユーザーしようとすると、クライアント プロセス (MVC web アプリケーション) の実装が不適切な注文を送信 — たとえば、クライアント コードがタイムアウトなしで同期 Rpc を使用する場合: スレッドが無期限にブロック応答を待機しています。 不正なユーザー エクスペリエンスを作成するだけでなくすべての応答待機消費スレッドをブロックやスレッドは、拡張性の高いアプリケーションで非常に重要です。 ブロックされたスレッドの数がある場合は最終的に、アプリケーションのランタイムがスレッドが枯渇実行できます。 アプリケーションの代わりにグローバルに応答しなくなることができる場合、のみ部分的に応答しない場合、図 10-1 に示されているようにします。

![](./media/image1.png)

**図 10-1**です。 依存サービスのスレッドの可用性に影響を与えることがあるため、部分的な障害

大きな microservices ベースのアプリケーションで任意の部分的な失敗できます増幅される、内部 microservices 相互作用のほとんどは、同期の HTTP 呼び出し (これは、アンチ パターンと見なされます) に基づいている場合に特にです。 数百万の 1 日あたりの受信呼び出しを受信するシステムについて検討します。 システムに不適切なデザイン同期の HTTP 呼び出しの長いチェーンに基づいている場合、これらの着信呼び出し可能性があります (たとえば 1:4 の比率) の送信呼び出しの多くの詳細数百万に多数の内部 microservices へ同期の依存関係として。 このような状況は、図 10-2 に示す、特に依存関係\#3 です。

![](./media/image2.png)

**図 10-2**です。 HTTP 要求の長いチェーンを特徴と、正しくないデザインを持つの影響

断続的なエラーが実質的には、分散の保証し、クラウド ベースのシステムのすべての依存関係自体に優れた可用性がある場合でもです。 ファクトについて考慮する必要があります。

設計しないでフォールト トレランスを確保する手法を実装して場合に、小さなダウンタイムが増幅されることができます。 例として、50 依存関係の各可用性 99.99% になります、数時間のダウンタイムは毎月のためこの波及効果。 マイクロ サービスの依存関係は、大量の要求の処理中に失敗した場合、そのエラーことができます迅速に各サービス内のすべての使用可能な要求スレッドが飽和状態し、全体のアプリケーションがクラッシュします。

![](./media/image3.png)

**図 10-3**です。 同期の HTTP 呼び出しの長いチェーンを microservices 増幅の部分的な失敗

セクションで、この問題を最小限に抑える"*非同期マイクロ サービスの統合がマイクロ サービスの自律性を強制*"(アーキテクチャの章で)、おことをお勧めする内部の間での非同期通信を使用するにはmicroservices です。 簡単に説明より次のセクションでします。

さらは、部分的な障害を処理するアプリケーションの microservices とクライアント アプリケーションを設計することが不可欠-は、回復力のある microservices とクライアント アプリケーションを構築します。


>[!div class="step-by-step"]
[前](index.md) [次へ] (部分的な障害 strategies.md)
