---
title: "各マイクロ サービスのドメイン モデルの境界を識別します。"
description: "コンテナーの .NET アプリケーションの .NET Microservices アーキテクチャ |各マイクロ サービスのドメイン モデルの境界を識別します。"
keywords: "Docker, マイクロサービス, ASP.NET, コンテナー"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a>各マイクロ サービスをドメイン モデルの境界を特定します。

モデルの境界と各マイクロ サービスのサイズを特定するときに目標は、可能であれば小さな microservices に向かってが多く必要がありますが、できませんを最も細かい分離を実現するためです。 代わりに、目標は、ドメインのナレッジによって実行される最も意味のある分離を取得する必要があります。 重点を置いてされませんサイズには、代わりにビジネス機能にします。 さらに、依存関係の数が多いに基づいて、アプリケーションの特定の部分に必要な凝集度クリアが場合を示す単一のマイクロ サービスの必要性すぎます。 凝集度は、グループ化 microservices または分解する方法を識別する方法です。 最終的には、さらに、ドメインに関するナレッジを取得するときに、マイクロ サービスのサイズを繰り返し調整する必要があります。 適切なサイズを検索することは、1 回限りプロセスではありません。

[Sam ようにしてください](http://samnewman.io/)、microservices とブックの作成者の認識されたプロモーター[構築 Microservices](http://samnewman.io/books/building_microservices/)、範囲指定されたコンテキスト (BC) パターン (の一部に基づいて、microservices を設計することを強調表示。ドメイン ベースの設計)、以前に導入されました。 場合によっては、いくつかの物理サービス、その逆は、ビジネス継続性を構成することでした。

具体的なビジネス継続性内で特定のドメイン エンティティとドメイン モデルを適用またはマイクロ サービス。 A BC ドメイン モデルの適用性を取り出すためし、示しています。 開発者のチーム メンバー、はっきりと共有の理解結束力とする必要があり、新機能を別途開発します。 これらは、microservices の目的は同じです。

設計で選択に通知する別のツールは[Conway の法則](https://en.wikipedia.org/wiki/Conway%27s_law)アプリケーションがこれを生成した組織のソーシャル境界を示すことを示すです。 場合によってはその反対ですが、-、会社の組織は、ソフトウェアを作成します。 必要があります Conway の法則を取り消すし、会社を整理することを希望どおりに境界をビルドするビジネス プロセスのコンサルティングに向かって傾いた。

これを使用できる DDD パターンは、境界のあるコンテキストを特定するために、[コンテキスト マッピング パターン](https://www.infoq.com/articles/ddd-contextmapping)です。 コンテキストのマッピングを使用すると、アプリケーションとその境界にさまざまなコンテキストを確認します。 一般に、別のコンテキストと各小規模のサブシステムの境界をインスタンスがあります。 コンテキストのマッピングを定義し、明示的なこれらの境界内のドメイン間で方法です。 A BC 自律的なは、1 つのドメインの詳細が含まれています: などのドメイン エンティティの詳細: し、その他の BCs で統合コントラクトを定義します。 これは、マイクロ サービスの定義に似ています。 は自律と特定のドメインの機能を実装して、インターフェイスを提供する必要があります。 これは、コンテキストのマッピングとコンテキストの境界を付けられたパターンが、microservices のドメイン モデルの境界を識別するための適切な方法である理由。

大規模なアプリケーションを設計すると、ドメイン モデルをフラグメント化する方法が表示されます — カタログ ドメインからドメイン エキスパートという名前のエンティティ配布ドメインの専門家よりカタログおよび在庫のドメインでは異なる方法でのインスタンス。 またはよりも、順序付けドメインの専門家で顧客に関するデータの一部に必要なだけの顧客に関するすべての詳細を格納したい CRM 専門家を処理する場合、ユーザーのドメイン エンティティが属性のサイズと数で異なる可能性があります。 大規模なアプリケーションに関連するすべてのドメイン間ですべてのドメインの用語を区別するために非常に困難です。 最も重要な点は、実行しないでください。 条項の統一を代わりに、各ドメインで提供される豊富な機能と相違点を受け入れます。 アプリケーション全体の統一されたデータベースが存在する場合に、統一されたボキャブラリの試みは不適切ななり音は再生されません複数ドメインの専門家のいずれかにされます。 したがって、BCs (microservices として実装) では、特定ドメインの用語を使用して、システムを分割し、別のドメインと追加 BCs を作成する必要を明確にすることができます。

右側の境界と各ビジネス継続性のサイズを取得して、ドメイン モデル ドメイン モデルの間でのいくつかの強力な関係があり、通常は操作を行う場合必要がある一般的なアプリケーションを実行するときに、複数のドメイン モデルからの情報をマージすることがわかっては操作です。

おそらく、各マイクロ サービスのドメイン モデルはどのくらいはずの質問への回答は、次: 自律的なビジネス継続性がある限り、常に他のコンテキスト (その他に切り替えることがなく動作することができます、分離マイクロ サービスのモデルの場合)。 図 4-10 ご覧複数 microservices (複数 BCs) 各がある独自のモデルと方法、エンティティを定義する各アプリケーションで識別されたドメインの特定の要件に応じてどのようにします。

![](./media/image10.png)

**図 4-10**です。 エンティティとマイクロ サービス モデルの境界を識別します。

図 4-10 は、オンライン会議管理システムに関連するサンプル シナリオを示しています。 ドメインの専門家が定義されているドメインに基づく microservices として実装することがいくつかの BCs を特定しておきます。 ご覧のように、支払いマイクロ サービスで支払いを処理などの単一のマイクロ サービス モデルにのみ存在するエンティティがあります。 実装する簡単なものになります。

ただし、別の図形が複数の microservices から複数のドメイン モデル間で同じ id を共有するエンティティを設定することもできます。 たとえば、ユーザー エンティティは、会議管理マイクロ サービスで識別されます。 同じ id を使用してその同じユーザーも、1 つは、順序付けマイクロ サービスの購入者率をという名前の 1 つで支払いマイクロ サービスおよびカスタマー サービス マイクロ サービスの 1 つの名前付きユーザーでも Payer をという名前です。 これは、理由は、によって、[ユビキタス言語](https://martinfowler.com/bliki/UbiquitousLanguage.html)が各ドメインの専門家が使用されているは、ユーザーことがありますの異なる属性を使用しても異なるパースペクティブです。 会議 Management という名前のマイクロ サービス モデルのユーザー エンティティは、ほとんどの個人データ属性を含めることができます。 ただし、マイクロ サービスの支払いまたはマイクロ サービス顧客サービスの顧客の図形に Payer の形でそのユーザーに同じでは、同じ属性の一覧が必要ありません可能性があります。

同様のアプローチでは、図 4-11 を示しています。

![](./media/image11.png)

**図 4-11**です。 複数のドメイン モデルへの従来のデータ モデルの分解

方法は、ユーザーのエンティティとして会議管理マイクロ サービス モデル内にあるとは、ユーザーも価格マイクロ サービスの代替の属性または購入者に実際にあるときにユーザーの詳細での購入者エンティティの形式で存在を確認できます。 各マイクロ サービスまたはビジネス継続性では、一部のみ、その問題を解決するか、コンテキストに応じて、ユーザーのエンティティに関連するすべてのデータは必要ありません可能性があります。 たとえば、価格マイクロ サービス モデルで必要はありませんアドレス、または (id) として ID と状態で、buyer ごとのライセンスの価格と割引に、悪影響を与えるだけのユーザーの ID。

接続クライアント ライセンス エンティティには、同じ名前で各ドメイン モデルで異なる属性。 ただし、接続クライアント数が、同じ ID に基づく id を共有のユーザーと購入者が発生するとします。

基本的には、そのユーザーの id を共有する複数のサービス (ドメイン) に存在するユーザーの共有の概念があります。 各ドメイン モデルでは、ユーザー エンティティに関する詳細を追加または変更する可能性があります。 そのため、1 つのドメイン (マイクロ サービス) から別のユーザー エンティティにマップする方法が必要です。

これにはないドメイン間で同じ数の属性のと同じユーザー エンティティを共有するいくつかの利点があります。 1 つの利点は、重複を減らすようにするマイクロ サービス モデルには、必要がないすべてのデータはありません。 もう 1 つ利点には、そのマイクロ サービスによってのみの更新プログラムとその種類のデータに対するクエリの実行できるように、特定の種類のエンティティごとのデータを所有しているマスター マイクロ サービスが発生しました。


>[!div class="step-by-step"]
[前](分散-データ-management.md) [次へ] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)
