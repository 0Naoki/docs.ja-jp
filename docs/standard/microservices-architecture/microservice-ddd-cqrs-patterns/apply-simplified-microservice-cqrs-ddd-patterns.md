---
title: "マイクロ サービスの簡略化された CQRS と DDD パターンを適用します。"
description: "コンテナーの .NET アプリケーションの .NET Microservices アーキテクチャ |マイクロ サービスの簡略化された CQRS と DDD パターンを適用します。"
keywords: "Docker, マイクロサービス, ASP.NET, コンテナー"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 99fd7ce32039742e23f8e01aa4c33cddd7a9f698
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/18/2017
---
# <a name="applying-simplified-cqrs-and-ddd-patterns-in-a-microservice"></a>マイクロ サービスの簡略化された CQRS と DDD パターンを適用します。

CQRS は、アーキテクチャ パターンを区切るデータ読み取りおよび書き込みのモデルです。 関連する用語[コマンド クエリの分離 (CQS)](https://martinfowler.com/bliki/CommandQuerySeparation.html)著書で最初に定義して Bertrand Meyer された*オブジェクト指向のソフトウェアの構築*です。 基本的な考え方は、大幅に区切られた 2 つのカテゴリにシステムの操作を分割することができます。

-   クエリを実行します。 これらの結果を返すし、システムの状態は変更されず、、副作用の自由です。

-   コマンド。 これらは、システムの状態を変更します。

CQS は単純な概念-は、同じオブジェクト内のメソッドに関する説明はクエリまたはコマンド。 各メソッドは、状態を返すか、または、状態、両方は使用しない場合でも変化します。 1 つのリポジトリ パターンのオブジェクトでもは、CQS に従っていることができます。 CQS 対象となる基本原則 CQRS です。

[コマンドと Query Responsibility Segregation (CQRS)](https://martinfowler.com/bliki/CQRS.html) Greg young 氏が導入され強く Udi Dahan やその他のユーザーによって昇格されました。 ただしより詳細な CQS 原則に基づいています。 コマンドとイベント上と必要に応じて非同期メッセージに基づくパターンと見なされることができます。 多くの場合は、CQRS は書き込み (更新プログラム) よりも読み取り (クエリ) の別の物理データベースを持つようより高度なシナリオに関連します。 さらに、複数展開 CQRS システムで実装できます[イベント インソーシング (ES)](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/)更新プログラム データベースのためだけイベントに格納、現在の状態データを保管する代わりに、ドメイン モデル。 ただし、これはありません。 このガイドで使用する方法です。コマンドからのクエリを分離するだけで構成される、最も簡単な CQRS アプローチを使用します。

CQRS の分離の側面は、別のレイヤーでのコマンドおよび 1 つのレイヤーでクエリ操作をグループ化によって実現されます。 各レイヤーは、独自のデータ モデル (モデルでは、別のデータベースでは必ずしもということに注意してください) を持ち、パターンとテクノロジの独自の組み合わせを使用してビルドします。 さらに、2 つのレイヤーは、同じ層またはマイクロ サービスを (マイクロ サービスの順序) 例と同様にこのガイドで使用される内にあることができます。 または、最適化およびをスケール アウトとは別に相互の影響を与えずにできるように異なる microservices またはプロセスを実装できます。

CQRS は、他のコンテキストで 1 つである読み取り/書き込み操作の 2 つのオブジェクトを使うことを意味します。 高度な CQRS 文献で学習できますが、非正規化された読み取りデータベースが存在する理由があります。 使用しないその方法をここでは、ことが目的で集計のような DDD パターンから制約を使用したクエリを制限することではなくクエリをより柔軟です。

この種のサービスの例は、eShopOnContainers の参照をアプリケーションから順序マイクロ サービスです。 このサービスでは、簡略化した CQRS 方法に基づいてマイクロ サービスを実装します。 使用、1 つのデータ ソースまたはデータベースが、2 つの論理モデルと DDD パターン トランザクションのドメインでは、図 9-2 に示すようにします。

![](./media/image2.png)

**図 9-2**です。 マイクロ サービスの簡略化された CQRS および DDD ベース

アプリケーション レイヤーでは、Web API 自体を指定できます。 重要な設計の側面をここでは、マイクロ サービスに分割することが、クエリと ViewModels (データ モデルが特にクライアント アプリケーションの作成)、コマンド、ドメイン モデル、および CQRS パターンに従うトランザクションです。 この方法は、制限事項と制約の以降のセクションで説明したもののみのトランザクションと更新したり、意味のある DDD パターンからのものから独立して、クエリを保持します。


>[!div class="step-by-step"]
[前](index.md) [次へ] (eshoponcontainers-cqrs-ddd-microservice.md)
