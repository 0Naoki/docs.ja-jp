---
title: コンストラクターのデザイン
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- member design guidelines, constructors
- constructors, design guidelines
- instance constructors
- type constructors
- virtual members
- constructors, types
- default constructors
- static constructors
ms.assetid: b4496afe-5fa7-4bb0-85ca-70b0ef21e6fc
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 0d7ca279dc1626cd526910af93326280bcd8301d
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
ms.locfileid: "33575558"
---
# <a name="constructor-design"></a>コンストラクターのデザイン
コンス トラクターの 2 種類があります: コンス トラクターとインスタンス コンス トラクターを入力します。  
  
 型コンス トラクターは、静的および型を使用する前に、CLR によって実行されます。 インスタンス コンス トラクターは、型のインスタンスが作成されるときに実行します。  
  
 型コンス トラクターは、すべてのパラメーターを受け取ることはできません。 インスタンス コンス トラクターは、次のことです。 すべてのパラメーターをとらないインスタンス コンス トラクターは、既定のコンス トラクターとも呼ばれます。  
  
 コンス トラクターは、型のインスタンスを作成する最も自然な方法です。 ほとんどの開発者は検索し、別の (工場出荷時のメソッド) などのインスタンスを作成する方法を検討する前に、コンス トラクターを使用しようとしています。  
  
 **✓ CONSIDER** simple、理想的には、既定コンス トラクターを提供します。  
  
 単純なコンス トラクターは、パラメーター数が非常に小さいと、すべてのパラメーターは、プリミティブまたは列挙型。 このような単純なコンス トラクターは、フレームワークの使いやすさを増やします。  
  
 **✓ CONSIDER** 目的の操作のセマンティクスは、新しいインスタンスの構築に直接マップされない場合、またはコンス トラクターのデザイン ガイドラインに従うが不自然にコンス トラクターではなく静的ファクトリ メソッドを使用します。  
  
 **✓ DO** 主要なプロパティを設定するためのショートカットとしてコンス トラクターのパラメーターを使用します。  
  
 ないはずの間のセマンティクスの違いによって一部のプロパティ セットの後に空のコンス トラクターを使用して、複数の引数を持つコンス トラクターを使用します。  
  
 **✓ DO** コンス トラクターのパラメーターを使用して単にプロパティを設定する場合は、コンス トラクターのパラメーターとプロパティに同じ名前を使用します。  
  
 このようなパラメーターとプロパティの唯一の違い大文字小文字の区別する必要があります。  
  
 **✓ DO** コンス トラクターで作業を最小限に抑える。  
  
 コンス トラクターは、キャプチャ以外処理がコンス トラクターのパラメーターを実行しないで必要があります。 必要になるまで、他の処理のコストを遅延する必要があります。  
  
 **✓ DO** 該当する場合は、インスタンス コンス トラクターから例外をスローします。  
  
 **✓ DO** コンス トラクターが必要な場合に、クラスでは、パブリックの既定のコンス トラクターを明示的に宣言します。  
  
 型のコンス トラクターを明示的に宣言しない、多くの言語 (c# など) するときに、パブリックの既定のコンス トラクターが自動的に追加します。 (抽象クラスは、保護されているコンス トラクターを取得します)。  
  
 クラスにパラメーター化されたコンス トラクターを追加すると、コンパイラは既定のコンス トラクターを追加できなくなります。 これにより、多くの場合、偶発的な重大な変更が原因です。  
  
 **X AVOID** 構造体の既定のコンス トラクターを明示的に定義します。  
  
 これにより、配列の作成より速くは既定のコンス トラクターが定義されていない場合それがあるすべてのスロット配列内で実行します。 など、C# の場合は、多数のコンパイラがそのためのパラメーターなしのコンス トラクターを持つ構造体を許可しないことに注意してください。  
  
 **X AVOID** コンス トラクター内のオブジェクトでの仮想メンバーを呼び出すことです。  
  
 仮想メンバーを呼び出すことにより、最派生型のコンス トラクターが完全にまだ実行されている場合でも、呼び出される最派生のオーバーライドが発生します。  
  
### <a name="type-constructor-guidelines"></a>型のコンス トラクターのガイドライン  
 **✓ DO** 静的コンス トラクターをプライベートに設定します。  
  
 クラスのコンス トラクターとも呼ばれる、静的コンス トラクターは、型の初期化に使用されます。 型の最初のインスタンスが作成されるか、その型の静的メンバーを呼び出す前に、CLR は、静的コンス トラクターを呼び出します。 ユーザーには、静的コンス トラクターが呼び出されたときに制御がありません。 静的コンス トラクターがプライベートでない場合は、CLR 以外のコードから呼び出すことができます。 コンス トラクターで実行される操作、によって予期しない動作ができます。 C# コンパイラでは、静的コンス トラクターをプライベートを強制します。  
  
 **X DO NOT** 静的コンス トラクターから例外をスローします。  
  
 型コンス トラクターから例外がスローされた場合、型は、現在のアプリケーション ドメインで使用できません。  
  
 **✓ CONSIDER** ランタイムが、明示的に定義された静的コンス トラクターを持たない型のパフォーマンスを最適化するために、静的コンス トラクターを明示的に使用するのではなく、静的フィールドをインラインを初期化します。  
  
 *部分 © 2005、2009 Microsoft Corporation します。All rights reserved.*  
  
 *ピアソン教育, Inc. からのアクセス許可によって検出[Framework デザイン ガイドライン: 規則、表現方法、および再利用可能な .NET ライブラリを第 2 版パターン](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619)は Cwalina と Brad Abrams、2008 年 10 月 22 日で発行されました。Microsoft Windows 開発シリーズの一部として、Addison-wesley Professional。*  
  
## <a name="see-also"></a>関連項目  
 [メンバーのデザインのガイドライン](../../../docs/standard/design-guidelines/member.md)  
 [フレームワーク デザインのガイドライン](../../../docs/standard/design-guidelines/index.md)
