---
title: Windows コンテナーとして既存の .NET アプリを展開します。
description: Azure のクラウドと Windows コンテナーでの既存の .NET アプリケーションを最新化 |Windows コンテナーとして既存の .NET アプリを展開します。
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 04/29/2018
ms.openlocfilehash: 829f33aba14d79d7d9003d1ac7472a19060d401a
ms.sourcegitcommit: 88f251b08bf0718ce119f3d7302f514b74895038
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/10/2018
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="e9221-103">Windows コンテナーとして既存の .NET アプリを展開します。</span><span class="sxs-lookup"><span data-stu-id="e9221-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="e9221-104">Windows コンテナーに基づいた展開は、クラウドに最適化されたアプリケーションやクラウド ネイティブ アプリケーションに適用されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications and Cloud-Native applications.</span></span>

<span data-ttu-id="e9221-105">ただし、このガイドで、次のセクションでは、特にでほとんどの場合に焦点を Windows コンテナーを使用して*クラウドに向けて最適化された*アプリケーションを再構築する必要のないアプリケーションです。</span><span class="sxs-lookup"><span data-stu-id="e9221-105">However, in this guide and especially in the following sections, it mostly focuses on using Windows Containers for *Cloud-Optimized* applications where you don’t need to rearchitect your application.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="e9221-106">コンテナーとは?</span><span class="sxs-lookup"><span data-stu-id="e9221-106">What are containers?</span></span> <span data-ttu-id="e9221-107">(Linux または Windows)</span><span class="sxs-lookup"><span data-stu-id="e9221-107">(Linux or Windows)</span></span>

<span data-ttu-id="e9221-108">コンテナーは、分離された独自のパッケージにアプリケーションをラップする方法です。</span><span class="sxs-lookup"><span data-stu-id="e9221-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="e9221-109">アプリケーションは、そのコンテナーに、コンテナーの外部に存在するアプリケーションまたはプロセスによって影響はありません。</span><span class="sxs-lookup"><span data-stu-id="e9221-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="e9221-110">すべてのアプリケーションに依存実行が正常に、プロセスが、コンテナー内にあるとします。</span><span class="sxs-lookup"><span data-stu-id="e9221-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="e9221-111">任意の場所のコンテナーが移動する可能性があります、アプリケーションの要件が常に満たされる直接的な依存関係の観点から (ライブラリの依存関係、ランタイム、およびなど) を実行する必要があるすべてのものが、バンドルされているためです。</span><span class="sxs-lookup"><span data-stu-id="e9221-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="e9221-112">コンテナーの主な特性をしやすくなる環境同じ別の展開全体でため、コンテナー自体が付属して必要なすべての依存関係です。</span><span class="sxs-lookup"><span data-stu-id="e9221-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="e9221-113">コンピューターにアプリケーションをデバッグし、別のコンピューターに保証される同じ環境に展開できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-113">You can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="e9221-114">コンテナーは、コンテナー イメージのインスタンスです。</span><span class="sxs-lookup"><span data-stu-id="e9221-114">A container is an instance of a container image.</span></span> <span data-ttu-id="e9221-115">コンテナー イメージは、アプリや (snapshot) などのサービスをパッケージ化し、信頼性が高く、再現可能な方法で展開する方法です。</span><span class="sxs-lookup"><span data-stu-id="e9221-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="e9221-116">Docker ではないことのみ、テクノロジのも理念およびプロセスとする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="e9221-117">業界全体「の配置単位です」になっているコンテナーが毎日より一般的になると、</span><span class="sxs-lookup"><span data-stu-id="e9221-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="e9221-118">コンテナー (Linux または Windows 上の Docker エンジン) の利点</span><span class="sxs-lookup"><span data-stu-id="e9221-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="e9221-119">コンテナーのどちらを使用してアプリケーションを構築する可能性がありますもとして定義されている軽量のビルド ブロックは大幅に増加アジリティ構築、配布、および、インフラストラクチャ全体にわたって、すべてのアプリケーションを実行しているのためです。</span><span class="sxs-lookup"><span data-stu-id="e9221-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="e9221-120">コンテナーでは、すべてのアプリの開発から運用環境にほとんどまたはまったくないコード変更により、Microsoft 開発者ツール、オペレーティング システムとクラウド間の Docker 統合感謝を実行できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="e9221-121">普通の Vm を展開するときに既に ASP.NET アプリケーションの Vm を展開するためにメソッドがあります。</span><span class="sxs-lookup"><span data-stu-id="e9221-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="e9221-122">ただし、メソッドに含まれている複数の手動手順や複雑な自動プロセス、Puppet などの展開ツールまたは同様のツールを使用して、可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="e9221-123">構成項目の変更、サーバー間でのアプリケーションのコンテンツをコピーおよびテスト後に、.msi 設定に基づいて対話形式のセットアップ プログラムを実行するようにタスクを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="e9221-124">展開内のこれらのすべての手順は、展開する時間およびリスクを追加します。</span><span class="sxs-lookup"><span data-stu-id="e9221-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="e9221-125">依存関係が、ターゲット環境に存在しないときにエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="e9221-126">Windows コンテナーでアプリケーションのパッケージ化のプロセスが完全に自動化されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="e9221-127">Windows コンテナーは、自動更新、およびコンテナーの展開のロールバックを提供する Docker プラットフォームに基づいています。</span><span class="sxs-lookup"><span data-stu-id="e9221-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="e9221-128">Docker エンジンを使用してから取得するメインの向上は、すべての依存関係と、アプリケーションのスナップショットは、イメージを作成することです。</span><span class="sxs-lookup"><span data-stu-id="e9221-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="e9221-129">イメージは、Docker イメージ (Windows コンテナー イメージ、ここでは) です。</span><span class="sxs-lookup"><span data-stu-id="e9221-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="e9221-130">イメージは、ソース コードに戻されることがなく、コンテナーでは、ASP.NET アプリを実行します。</span><span class="sxs-lookup"><span data-stu-id="e9221-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="e9221-131">コンテナーのスナップショットでは、配置の単位になります。</span><span class="sxs-lookup"><span data-stu-id="e9221-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="e9221-132">多くの組織では、次の理由でモノリシックな既存のアプリケーションを containerizing は。</span><span class="sxs-lookup"><span data-stu-id="e9221-132">Many organizations are containerizing existing monolithic applications for the following reasons:</span></span>

-   <span data-ttu-id="e9221-133">**クラウドに改善された展開をリリース**です。</span><span class="sxs-lookup"><span data-stu-id="e9221-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="e9221-134">コンテナーは、開発と運用の間で一貫性のある展開のコントラクトを提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="e9221-135">コンテナーを使用するときと開発者が聞こえません () で"、私のコンピューターでは、しないのはなぜ実稼働環境でですか?"</span><span class="sxs-lookup"><span data-stu-id="e9221-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="e9221-136">言った、"、"として実行されます、コンテナー、実稼働環境で実行するためです。</span><span class="sxs-lookup"><span data-stu-id="e9221-136">They can say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="e9221-137">およびすべての依存関係のパッケージ化されたアプリケーションは、サポートされているコンテナー ベース環境で実行できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="e9221-138">すべての配置対象 (dev、QA、ステージング、実稼働) で実行する意図された方法で実行されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="e9221-139">1 つの段階から次に、展開を大幅に向上させるに移動する、コンテナーがほとんど frictions を排除し、高速化を出荷することができます。</span><span class="sxs-lookup"><span data-stu-id="e9221-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

-   <span data-ttu-id="e9221-140">**コスト削減**です。</span><span class="sxs-lookup"><span data-stu-id="e9221-140">**Cost reductions**.</span></span> <span data-ttu-id="e9221-141">コンテナーは、統合と既存のハードウェア、またはハードウェアの単位あたり高密度でアプリケーションを実行してから削除するか、コスト削減につながります。</span><span class="sxs-lookup"><span data-stu-id="e9221-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

-   <span data-ttu-id="e9221-142">**移植性**です。</span><span class="sxs-lookup"><span data-stu-id="e9221-142">**Portability**.</span></span> <span data-ttu-id="e9221-143">コンテナーは、モジュール形式およびポータブルです。</span><span class="sxs-lookup"><span data-stu-id="e9221-143">Containers are modular and portable.</span></span> <span data-ttu-id="e9221-144">Docker コンテナーは、任意のサーバー オペレーティング システム (Linux と Windows) のメジャーのパブリック クラウド (Microsoft Azure、Amazon AWS、Google、IBM) は、オンプレミスおよびプライベートまたはハイブリッド クラウド環境でサポートされます。</span><span class="sxs-lookup"><span data-stu-id="e9221-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

-   <span data-ttu-id="e9221-145">**コントロール**です。</span><span class="sxs-lookup"><span data-stu-id="e9221-145">**Control**.</span></span> <span data-ttu-id="e9221-146">コンテナーは、コンテナー レベルで制御される柔軟かつセキュリティで保護された環境を提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="e9221-147">コンテナーのセキュリティで保護された、分離、およびコンテナーの実行ポリシーの制約を設定しても制限されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="e9221-148">Windows コンテナーに関するセクションで詳細なとしては、Windows Server 2016 と HYPER-V コンテナーは、その他のエンタープライズ サポート オプションを提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="e9221-149">アジリティ、移植性、およびコントロールでの大きな改善点最終的に発生するコストを大幅に削減開発およびアプリケーションを管理するコンテナーを使用する場合。</span><span class="sxs-lookup"><span data-stu-id="e9221-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="e9221-150">Docker について</span><span class="sxs-lookup"><span data-stu-id="e9221-150">What is Docker?</span></span>

<span data-ttu-id="e9221-151">[Docker](https://www.docker.com/)は、[オープン ソース プロジェクト](https://github.com/docker/docker)クラウドまたは内部設置型で実行でき、移植可能で自分のコンテナーとしてのアプリケーションの展開を自動化します。</span><span class="sxs-lookup"><span data-stu-id="e9221-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="e9221-152">Docker は、このテクノロジを促進および進化させる[会社](https://www.docker.com/)でもあります。</span><span class="sxs-lookup"><span data-stu-id="e9221-152">Docker is also a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="e9221-153">会社は、クラウド、Linux、およびなどの Microsoft Windows ベンダーと共同で動作します。</span><span class="sxs-lookup"><span data-stu-id="e9221-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="e9221-154">**図 4 ~ 6 です。**</span><span class="sxs-lookup"><span data-stu-id="e9221-154">**Figure 4-6.**</span></span> <span data-ttu-id="e9221-155">Docker は、ハイブリッド クラウドのすべてのレイヤーでコンテナーを展開します。</span><span class="sxs-lookup"><span data-stu-id="e9221-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="e9221-156">他の人に、仮想マシンを使い慣れてコンテナーする可能性がありますよく似ています。</span><span class="sxs-lookup"><span data-stu-id="e9221-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="e9221-157">コンテナーは、オペレーティング システムを実行、なファイル システムおよび物理または仮想コンピューターのシステムと同じように、ネットワーク経由でアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="e9221-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="e9221-158">ただし、テクノロジ、およびコンテナーの背後にある概念は、仮想マシンから大幅に異なるです。</span><span class="sxs-lookup"><span data-stu-id="e9221-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="e9221-159">開発者の観点からコンテナー扱う必要があるより 1 つのプロセスと同様にします。</span><span class="sxs-lookup"><span data-stu-id="e9221-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="e9221-160">実際には、コンテナーは、1 つのプロセスの 1 つのエントリ ポイントがします。</span><span class="sxs-lookup"><span data-stu-id="e9221-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="e9221-161">Docker コンテナー (わかりやすくするため、*コンテナー*) Linux と Windows 上でネイティブに実行できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="e9221-162">Windows コンテナーを Windows ホスト (ホスト サーバーまたは VM) でのみ実行できます正規のコンテナーを実行する場合と、Linux コンテナーは、Linux ホストでのみ実行できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="e9221-163">ただし、最近のバージョンの Windows Server と HYPER-V コンテナーでは、Linux コンテナーも実行できますネイティブ Windows Server では現在、Windows Server コンテナーでのみ使用する HYPER-V の分離テクノロジを使用しています。</span><span class="sxs-lookup"><span data-stu-id="e9221-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="e9221-164">近い将来、Linux と Windows の両方のコンテナーが存在する混在環境には、可能であり、一般的なでもがなります。</span><span class="sxs-lookup"><span data-stu-id="e9221-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="e9221-165">既存の .NET アプリケーションの Windows コンテナーの利点</span><span class="sxs-lookup"><span data-stu-id="e9221-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="e9221-166">Windows コンテナーを使用する利点は基本的には同様の利点が一般にコンテナーから取得します。</span><span class="sxs-lookup"><span data-stu-id="e9221-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="e9221-167">Windows コンテナーを使用するには、アジリティ、移植性、および制御が大幅に向上に関するです。</span><span class="sxs-lookup"><span data-stu-id="e9221-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="e9221-168">既存の .NET アプリケーションでは、.NET Framework を使用して作成されたこれらのアプリケーションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="e9221-168">Existing .NET applications refer to those applications that were created using the .NET Framework.</span></span> <span data-ttu-id="e9221-169">たとえば、従来の ASP.NET web アプリケーションがあります-新しいしてプラットフォーム間を実行する .NET Core を使用していない Linux、Windows、および MacOS にします。</span><span class="sxs-lookup"><span data-stu-id="e9221-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="e9221-170">.NET Framework の主要な依存関係は、Windows です。</span><span class="sxs-lookup"><span data-stu-id="e9221-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="e9221-171">従来の ASP.NET では、IIS、および System.Web のように、セカンダリの依存関係もあります。</span><span class="sxs-lookup"><span data-stu-id="e9221-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="e9221-172">.NET Framework アプリケーションを Windows では、期間実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="e9221-173">既存の .NET Framework アプリケーションを containerize するかどうかとできないか、.NET Core への移行に投資する必要のない唯一の選択肢でのコンテナーがある場合は、Windows コンテナーを使用する ("場合は正常に動作しないこと") を移行します。</span><span class="sxs-lookup"><span data-stu-id="e9221-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="e9221-174">したがって、Windows コンテナーの主な利点の 1 つを発揮するコンテナリゼーション Windows 経由で実行されている既存の .NET Framework アプリケーションを最新化する方法です。</span><span class="sxs-lookup"><span data-stu-id="e9221-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="e9221-175">最終的には、Windows コンテナーを取得するコンテナー アジリティ、移植性、および制御を強化を使用して、探している利点です。</span><span class="sxs-lookup"><span data-stu-id="e9221-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="e9221-176">ターゲットに OS を選択します。NET ベースのコンテナー</span><span class="sxs-lookup"><span data-stu-id="e9221-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="e9221-177">.NET Framework と .NET Core の違いと同様に Docker、によってサポートされているオペレーティング システムの多様性を指定するには、特定の OS とを使用しているフレームワークに基づいて特定のバージョンをターゲットする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="e9221-178">Windows の場合、Windows Server Core または Windows Nano Server を使用できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="e9221-179">これらのバージョンの Windows には、.NET Framework または .NET Core アプリケーションによって必要になる可能性があります (Kestrel と同様に、自己ホスト型の web サーバーと IIS) などの別の特性が実現します。</span><span class="sxs-lookup"><span data-stu-id="e9221-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="e9221-180">Linux の場合、複数のディストリビューションを利用できます。また、Linux は公式の .NET Docker イメージ (Debian など) でサポートされています。</span><span class="sxs-lookup"><span data-stu-id="e9221-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="e9221-181">図 4-7 は、.NET Framework のアプリのバージョンによっては、対象できます OS バージョンを示しています。</span><span class="sxs-lookup"><span data-stu-id="e9221-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="e9221-182">**図 4 ~ 7 です。**</span><span class="sxs-lookup"><span data-stu-id="e9221-182">**Figure 4-7.**</span></span> <span data-ttu-id="e9221-183">.NET Framework のバージョンに基づき、ターゲットのオペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="e9221-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="e9221-184">.NET Framework アプリケーションに基づく既存または従来のアプリケーションの移行のシナリオでは、メインの依存関係が、Windows と IIS でします。</span><span class="sxs-lookup"><span data-stu-id="e9221-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="e9221-185">唯一のオプションでは、Windows Server Core と .NET Framework に基づいた Docker イメージを使用します。</span><span class="sxs-lookup"><span data-stu-id="e9221-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="e9221-186">Dockerfile は、ファイルをイメージ名を追加する場合は、.NET Framework ベースの Windows コンテナー イメージの次の例のように、タグを使用して、オペレーティング システムとバージョンを選択できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="e9221-187">**タグ**</span><span class="sxs-lookup"><span data-stu-id="e9221-187">**Tag**</span></span> | <span data-ttu-id="e9221-188">**システムとバージョン**</span><span class="sxs-lookup"><span data-stu-id="e9221-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="e9221-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="e9221-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="e9221-190">.NET framework 4.x を Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="e9221-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="e9221-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="e9221-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="e9221-192">.NET framework 4.x で Windows Server Core での他の ASP.NET カスタマイズ</span><span class="sxs-lookup"><span data-stu-id="e9221-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="e9221-193">.NET core (Linux と Windows はクロス プラットフォーム)、タグは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="e9221-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like the following:</span></span>

> | <span data-ttu-id="e9221-194">**タグ**</span><span class="sxs-lookup"><span data-stu-id="e9221-194">**Tag**</span></span> | <span data-ttu-id="e9221-195">**システムとバージョン**</span><span class="sxs-lookup"><span data-stu-id="e9221-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="e9221-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="e9221-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="e9221-197">.NET core 2.0 Linux 上のランタイムのみ</span><span class="sxs-lookup"><span data-stu-id="e9221-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="e9221-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="e9221-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="e9221-199">.NET core 2.0 Windows Nano Server でのランタイムのみ</span><span class="sxs-lookup"><span data-stu-id="e9221-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="e9221-200">マルチ arch イメージ</span><span class="sxs-lookup"><span data-stu-id="e9221-200">Multi-arch images</span></span>

<span data-ttu-id="e9221-201">2017 中旬以降、使うこともできます、新しい機能と呼ばれる Docker で[マルチ arch](https://github.com/moby/moby/issues/15866)イメージ。</span><span class="sxs-lookup"><span data-stu-id="e9221-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="e9221-202">.NET core Docker イメージは、マルチ arch タグを使用できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="e9221-203">Dockerfile ファイルを対象となるオペレーティング システムを定義する必要が不要になった。</span><span class="sxs-lookup"><span data-stu-id="e9221-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="e9221-204">マルチ arch 機能は、複数コンピューター構成で使用する 1 つのタグを使用します。</span><span class="sxs-lookup"><span data-stu-id="e9221-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="e9221-205">たとえば、複数のアーキテクチャでは、1 つの共通タグ使用できます: **microsoft/dotnet:2.0.0-runtime**です。</span><span class="sxs-lookup"><span data-stu-id="e9221-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="e9221-206">Linux コンテナー環境からそのタグをプルする場合は、Debian ベースのイメージを取得します。</span><span class="sxs-lookup"><span data-stu-id="e9221-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="e9221-207">Windows コンテナー環境からそのタグをプルする場合は、Nano Server ベースのイメージを取得します。</span><span class="sxs-lookup"><span data-stu-id="e9221-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="e9221-208">.NET Framework のイメージ、従来の .NET Framework は、Windows のみをサポートしているためには、マルチ arch 機能を使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="e9221-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="e9221-209">Windows コンテナーの種類</span><span class="sxs-lookup"><span data-stu-id="e9221-209">Windows container types</span></span>

<span data-ttu-id="e9221-210">Linux コンテナーと同様に Windows Server コンテナーは、Docker エンジンを使用して管理されます。</span><span class="sxs-lookup"><span data-stu-id="e9221-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="e9221-211">Linux コンテナーとは異なりは、Windows コンテナーは、次の 2 つの異なるコンテナー型を含めるか、回数-Windows Server コンテナーと HYPER-V の分離を実行します。</span><span class="sxs-lookup"><span data-stu-id="e9221-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="e9221-212">**Windows Server コンテナー**: プロセスと名前空間の分離テクノロジを使用してアプリケーションの分離を提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="e9221-213">Windows Server コンテナーは、コンテナー ホストとホストで実行されているすべてのコンテナーとカーネルを共有します。</span><span class="sxs-lookup"><span data-stu-id="e9221-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="e9221-214">これらのコンテナーでは、悪意のあるセキュリティの境界を指定しないと、信頼されていないコードを分離は使用できません。</span><span class="sxs-lookup"><span data-stu-id="e9221-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="e9221-215">これらのコンテナーでは、共有カーネル領域がないため、同じカーネルのバージョンと構成が必要です。</span><span class="sxs-lookup"><span data-stu-id="e9221-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="e9221-216">**HYPER-V 分離**: 各コンテナーを大幅に最適化された VM で実行して Windows Server コンテナーによって提供される分離を展開します。</span><span class="sxs-lookup"><span data-stu-id="e9221-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="e9221-217">この構成では、コンテナー ホストのカーネルは、同じホスト上の他のコンテナーとは共有されません。</span><span class="sxs-lookup"><span data-stu-id="e9221-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="e9221-218">これらのコンテナーは、悪意のあるマルチ テナントをホストするため、VM の同様のセキュリティ保証と設計されています。</span><span class="sxs-lookup"><span data-stu-id="e9221-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="e9221-219">これらのコンテナーは、ホストまたはホスト上の他のコンテナーで、カーネルを共有しないするためのカーネル異なるバージョン (サポートされているバージョン) の構成を実行できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="e9221-220">たとえば、Windows 10 上のすべての Windows コンテナーは、Windows Server カーネルのバージョンと構成を利用するのに HYPER-V 分離を使用します。</span><span class="sxs-lookup"><span data-stu-id="e9221-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="e9221-221">HYPER-V 分離の有無は、windows コンテナーを実行すると、実行時の意思決定です。</span><span class="sxs-lookup"><span data-stu-id="e9221-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="e9221-222">最初に、HYPER-V の分離を使用したコンテナーの作成を選択し、実行時に、代わりに、Windows Server のコンテナーとして実行を選択する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="e9221-223">その他の技術情報</span><span class="sxs-lookup"><span data-stu-id="e9221-223">Additional resources</span></span>

-   <span data-ttu-id="e9221-224">**Windows コンテナーのドキュメント**</span><span class="sxs-lookup"><span data-stu-id="e9221-224">**Windows Containers documentation**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/](https://docs.microsoft.com/virtualization/windowscontainers/)

-   <span data-ttu-id="e9221-225">**Windows コンテナーの基礎**</span><span class="sxs-lookup"><span data-stu-id="e9221-225">**Windows Containers fundamentals**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/about/](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   <span data-ttu-id="e9221-226">**インフォ グラフィック: Microsoft とコンテナー**</span><span class="sxs-lookup"><span data-stu-id="e9221-226">**Infographic: Microsoft and containers**</span></span>

    [https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)


## <a name="the-container-ecosystem-in-azure"></a><span data-ttu-id="e9221-227">Azure でコンテナーのエコシステム</span><span class="sxs-lookup"><span data-stu-id="e9221-227">The container ecosystem in Azure</span></span>

<span data-ttu-id="e9221-228">前のセクションで説明しましただけでなく、特定のコンテナー イメージは、.NET アプリケーションの詳細については Docker コンテナーの利点があります。</span><span class="sxs-lookup"><span data-stu-id="e9221-228">In previous sections, it’s been explained what the benefits of Docker containers are as well as details on the specific container images for .NET applications.</span></span> <span data-ttu-id="e9221-229">すべての一般的な情報については、開発またはアプリケーションを containerize するために不可欠です。</span><span class="sxs-lookup"><span data-stu-id="e9221-229">All that generic information is fundamental in order to develop or containerize an application.</span></span>
<span data-ttu-id="e9221-230">ただし、運用配置環境または QA および開発/テスト環境であっても、検討するとき、Microsoft Azure は、開かれていて、広範なさまざまな選択肢、(次の図に示すように) クラウドで完全コンテナーのエコシステムを提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-230">However, when thinking about the production deployment environment or even QA and Dev/Test environments, Microsoft Azure provides an open and broad variety of choices, a full container ecosystem in the cloud (shown in the diagram below).</span></span> <span data-ttu-id="e9221-231">特定のアプリケーションのニーズに応じて、1 つまたは別の Azure 製品を選択してください。</span><span class="sxs-lookup"><span data-stu-id="e9221-231">Depending on your specific application’s needs, you should choose one or another Azure product.</span></span>

![](./media/image7.5.png)

> <span data-ttu-id="e9221-232">**図 4-7.5 です。**</span><span class="sxs-lookup"><span data-stu-id="e9221-232">**Figure 4-7.5.**</span></span> <span data-ttu-id="e9221-233">Azure でコンテナーのエコシステム</span><span class="sxs-lookup"><span data-stu-id="e9221-233">The container ecosystem in Azure</span></span>

<span data-ttu-id="e9221-234">Azure では、次の製品のインフラストラクチャと見なされるコンテナーをサポートするコンテナーのエコシステム: から</span><span class="sxs-lookup"><span data-stu-id="e9221-234">From the container ecosystem in Azure, the following products supporting containers that are considered infrastructure:</span></span>
-   <span data-ttu-id="e9221-235">**Azure のコンテナー インスタンス (ACI)**</span><span class="sxs-lookup"><span data-stu-id="e9221-235">**Azure Container Instances (ACI)**</span></span>
-   <span data-ttu-id="e9221-236">**Azure の仮想マシン**(のコンテナーのサポート)</span><span class="sxs-lookup"><span data-stu-id="e9221-236">**Azure Virtual Machines** (With container's support)</span></span>
-   <span data-ttu-id="e9221-237">**Azure の仮想マシン スケール セット**(のコンテナーのサポート)</span><span class="sxs-lookup"><span data-stu-id="e9221-237">**Azure Virtual Machine Scale Sets** (With container's support)</span></span>

<span data-ttu-id="e9221-238">これら 3 つから ACI は非常に大きな利点、これは、基になる OS をする必要もありませんアップグレード/修正プログラムなどを維持する必要はありませんが、ACI まだが配置されているより適切にこのブックの今後のセクションで説明されていると、インフラストラクチャ レベルのファクトを提供します。</span><span class="sxs-lookup"><span data-stu-id="e9221-238">From those three, ACI provides a great benefit, which is the fact that you don't need to maintain the underlying OS, no need for you to upgrade/patch, etc. but ACI still is positioned in the infrastructure level, as better explained in the upcoming sections of this book.</span></span>

<span data-ttu-id="e9221-239">レベルは、PaaS (サービスとしてのプラットフォーム) 内で複数の配置、同時に Azure のサポートのコンテナーでは、製品は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="e9221-239">The products in Azure supporting containers that are at the same time positioned more in the PaaS (Platform as a Service) level are:</span></span>

-   <span data-ttu-id="e9221-240">**Azure App Service**</span><span class="sxs-lookup"><span data-stu-id="e9221-240">**Azure App Service**</span></span>
-   <span data-ttu-id="e9221-241">**Azure の Kubernetes サービス (AKS と ACS)**</span><span class="sxs-lookup"><span data-stu-id="e9221-241">**Azure Kubernetes Service (AKS and ACS)**</span></span>
-   <span data-ttu-id="e9221-242">**Azure Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="e9221-242">**Azure Service Fabric**</span></span> 
-   <span data-ttu-id="e9221-243">**Azure Batch**</span><span class="sxs-lookup"><span data-stu-id="e9221-243">**Azure Batch**</span></span> 

<span data-ttu-id="e9221-244">次に、Azure コンテナー レジストリは、すべての以前の製品を登録して、カスタム コンテナー イメージを展開するときに使用できる Azure でホストされる高のスケーラブルなコンテナー レジストリがします。</span><span class="sxs-lookup"><span data-stu-id="e9221-244">Then, Azure Container Registry is a high scalable container registry hosted in Azure that you can use from all the previous products when registering and deploying your custom container images.</span></span>

<span data-ttu-id="e9221-245">さらに、コンテナーから使用できる他のマネージ サービスなどの Azure SQL Database、Azure Redis キャッシュでは、Azure Cosmos DB などの Azure でします。</span><span class="sxs-lookup"><span data-stu-id="e9221-245">In addition, from your containers, you can consume other managed services in Azure like Azure SQL Database, Azure Redis cache, Azure Cosmos DB, etc.</span></span> <span data-ttu-id="e9221-246">さらに、サード パーティ製のソリューション/プラットフォームでは Azure Marketplace クラウド Foundry など OpenShift Azure 内のコンテナーも使用できます。</span><span class="sxs-lookup"><span data-stu-id="e9221-246">plus there are third-party solutions/platforms available in Azure Marketplace like Cloud Foundry and OpenShift where you can also use containers within Azure.</span></span> 

<span data-ttu-id="e9221-247">次のセクションでは、特に Windows コンテナーを対象とするときに、それらの Azure の製品やソリューションの各を使用する場合の Microsoft の推奨事項を調べることができます。</span><span class="sxs-lookup"><span data-stu-id="e9221-247">In the next sections, you can explore Microsoft's recommendations on when to use each of those Azure products and solutions specifically when targeting Windows Containers.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="e9221-248">[前へ](what-about-cloud-native-applications.md)
[次へ](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="e9221-248">[Previous](what-about-cloud-native-applications.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
