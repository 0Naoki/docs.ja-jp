---
title: "安全なコーディングのガイドライン | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "コード セキュリティ"
  - "コード セキュリティ, オプション"
  - "コード, セキュリティ"
  - "コンポーネント [.NET Framework], セキュリティ"
  - "ライブラリ コード (保護されたリソースを公開する)"
  - "マネージ ラッパー (ネイティブなコード実装の)"
  - "再利用可能なコンポーネント"
  - "安全なコーディング"
  - "安全なコーディング, オプション"
  - "セキュリティ [.NET Framework], コーディングのガイドライン"
  - "セキュリティに中立的なコード"
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
caps.latest.revision: 20
author: "mairaw"
ms.author: "mairaw"
manager: "wpickett"
caps.handback.revision: 17
---
# 安全なコーディングのガイドライン
エビデンスベース セキュリティとコード アクセス セキュリティは、セキュリティを実現するための強力で明示的なメカニズムを提供します。 ほとんどのアプリケーション コードは、.NET Framework によって実装されるインフラストラクチャを単純に使用することができます。 場合によっては、アプリケーション特有の追加のセキュリティが必要になります。これは、セキュリティ システムを拡張するか、または新しい特有の方法を使用して構築されます。  
  
 .NET Framework によって課されるアクセス許可やコード内で課される他の手段により防御機構を設けて、悪意のあるコードが知られたくない情報を入手したり、他の望ましくないアクションを実行したりすることを防ぐ必要があります。 また、信頼されるコードを使用するすべての想定されるシナリオで、セキュリティと使いやすさのバランスを取る必要があります。  
  
 この概要では、セキュリティ システムと連携するようコードを設計するさまざまな方法を説明します。  
  
> [!NOTE]
>  [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] では、.NET Framework のセキュリティ モデルと用語に重要な変更が加えられています。 これらの変更について詳しくは、「[セキュリティの変更点](../../../docs/framework/security/security-changes.md)」をご覧ください。  
  
## コード アクセス セキュリティと部分的に信頼できるコード  
 .NET Framework には、コード アクセス セキュリティ \(CAS\) と呼ばれる、同一アプリケーションで実行される各種コードにさまざまな信頼レベルを強制的に適用するメカニズムが備わっています。  .NET Framework ではコード アクセス セキュリティはコードの分離を保証しないため、部分的にしか信頼できないコード \(特に発生元が不明なコード\) とのセキュリティ境界としてコード アクセス セキュリティを使用してはなりません。 発生元の不明なコードの読み込みと実行に関しては、他のセキュリティ対策を適切に導入することなく行わないようにしてください。  
  
 このポリシーは .NET Framework のすべてのバージョンに適用されますが、Silverlight に含まれる .NET Framework には適用されません。  
  
## セキュリティ中立なコード  
 セキュリティ中立なコードは、セキュリティ システムに対して明示的な操作を何も行いません。 これは何であれ自分が受け取ったアクセス許可を使用して動作します。 保護された操作 \(ファイルの使用やネットワーキングなど\) に関連したセキュリティ例外をアプリケーションがキャッチしなかった場合はハンドルされない例外になるとはいえ、セキュリティ中立なコードは .NET Framework のセキュリティ テクノロジを活用します。  
  
 セキュリティ中立なライブラリは、理解しておくべき特別な特性を持っています。 ファイルを使用したり、アンマネージ コードを呼び出したりする API 要素をライブラリで提供していると仮定します。これらの操作に対応するアクセス許可を持っていないコードは、記述どおりに動作しません。 しかし、コードがアクセス許可を持っているとしても、そのコードを呼び出すアプリケーション コードが同じアクセス許可を持っていなければ、正しく機能しません。 呼び出し元のコードが正しいアクセス許可を持っていない場合、コード アクセス セキュリティのスタック ウォークの結果として <xref:System.Security.SecurityException> が発生します。  
  
## 再利用可能なコンポーネントではないアプリケーション コード  
 作成するコードがアプリケーションの一部であって、他のコードから呼び出されることがなければ、セキュリティは単純であり、特殊なコーディングは不要な場合があります。 ただし、悪意のあるコードがそのコードを呼び出す可能性があることを忘れないでください。 悪意のあるコードによるリソースへのアクセスをコード アクセス セキュリティが阻止する可能性もありますが、機密情報を含んだフィールドやプロパティの値をそのようなコードが読み取ることも考えられます。  
  
 また、コードがインターネットやその他の信頼できないソースからのユーザー入力を受け付ける場合には、悪意のある入力にも注意する必要があります。  
  
## ネイティブ コードの実装のマネージ ラッパー  
 一般にこのシナリオは、何らかの有用な機能がネイティブ コードで実装されており、これをマネージ コードで利用したいというケースに該当します。 マネージ ラッパーは、プラットフォーム呼び出しか COM 相互運用を使用して簡単に作成できます。 ただしこの場合には、操作を成功させるために、ラッパーの呼び出し元がアンマネージ コードの権利を持っている必要があります。 つまり既定のポリシーでは、イントラネットやインターネットからダウンロードされたコードはラッパーでは機能しません。  
  
 これらのラッパーを使用するすべてのアプリケーションにアンマネージ コードの権利を与えるよりも、これらの権利をラッパー コードのみに与える方が望ましいと言えます。 基になる機能が何もリソースを公開しておらず、かつ実装も同様に安全である場合、ラッパーは、自分の権利をアサートしさえすれば、あらゆるコードが自分を通して呼び出しを行えるようにできます。 リソースが関係する場合のセキュリティ コーディングは、次のセクションで説明するライブラリ コードのケースと同じです。 ラッパーはこれらのリソースに対して呼び出し元を公開する可能性があるため、ネイティブ コードの安全性を慎重に確認する必要があり、その責任はラッパーにあります。  
  
## 保護されたリソースを公開するライブラリ コード  
 これはセキュリティ コーディングのアプローチとして最も強力なものであるため、方法を間違えるなら最も危険性の高いものともなります。ライブラリは他のコードに対し、\(.NET Framework のクラスが使用するリソースのアクセス許可を課すのと同じように\) 他の手段では使用できない特定のリソースにアクセスするためのインターフェイスとして機能します。 どこでリソースを公開しようと、コードはまずそのリソースに適したアクセス許可を要求し \(つまりセキュリティ チェックを実行しなければなりません\)、それから通常は実際の操作を実行するための権利をアサートする必要があります。  
  
## 関連トピック  
  
|タイトル|説明|  
|----------|--------|  
|[方法 : サンドボックスで部分信頼コードを実行する](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md)|制限されたセキュリティ環境で、部分的に信頼されたアプリケーションを実行する方法について説明します。これにより、付与されるコード アクセス許可が制限されます。|  
|[状態データの保護](../../../docs/standard/security/securing-state-data.md)|プライベート メンバーを保護する方法について説明します。|  
|[メソッド アクセスの保護](../../../docs/framework/misc/securing-method-access.md)|部分的に信頼されたコードによって呼び出されることからメソッドを保護する方法について説明します。|  
|[ラッパー コードの保護](../../../docs/framework/misc/securing-wrapper-code.md)|他のコードをラップするコードのセキュリティ問題について説明します。|  
|[セキュリティとパブリックの読み取り専用配列フィールド](../../../docs/framework/misc/security-and-public-read-only-array-fields.md)|.NET Framework ライブラリ内にある、パブリックな読み取り専用の配列を使用するコードのセキュリティ問題について説明します。|  
|[例外処理の保護](../../../docs/framework/misc/securing-exception-handling.md)|例外を処理するためのセキュリティ問題について説明します。|  
|[セキュリティとユーザー入力](../../../docs/standard/security/security-and-user-input.md)|ユーザー入力を受け取るアプリケーションのセキュリティ問題について説明します。|  
|[セキュリティとリモート処理の考慮事項](../../../docs/framework/misc/security-and-remoting-considerations.md)|アプリケーション ドメインをまたいで通信するアプリケーションのセキュリティ問題について説明します。|  
|[セキュリティとシリアル化](../../../docs/framework/misc/security-and-serialization.md)|オブジェクトをシリアル化するときのセキュリティ問題について説明します。|  
|[セキュリティと競合状態](../../../docs/standard/security/security-and-race-conditions.md)|コードで競合状態を回避する方法について説明します。|  
|[セキュリティと実行時のコード生成](../../../docs/standard/security/security-and-on-the-fly-code-generation.md)|動的なコードを生成するアプリケーションのセキュリティ問題について説明します。|  
|[セキュリティとセットアップの問題](../Topic/Security%20and%20Setup%20Issues.md)|アプリケーションのテストとセットアップに関する注意点について説明します。|  
|[コード アクセス セキュリティ](../../../docs/framework/misc/code-access-security.md)|.NET Framework のコード アクセス セキュリティについて詳しく説明し、コードで使用するための手順を示します。|  
|[ロール ベース セキュリティ](../../../docs/standard/security/role-based-security.md)|.NET Framework のロールベース セキュリティについて詳しく説明し、コードで使用するための手順を示します。|