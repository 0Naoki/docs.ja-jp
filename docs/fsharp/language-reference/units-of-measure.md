---
title: 測定単位 (F#)
description: どの浮動小数点型の学習 f# の符号付き整数値を関連付けることができます、測定単位の長さ、ボリューム、および大容量を示すために通常使用されます。
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: dotnet-fsharp
ms.devlang: fsharp
ms.openlocfilehash: 336a1e04426fb39f5ceb98e06a06cd7eadc36e85
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/28/2018
---
# <a name="units-of-measure"></a>測定単位

F# での浮動小数点値と符号付き整数値を関連付けることが通常は、一括、長さ、ボリュームを示すために使用する測定単位。 算術リレーションシップでは、正しい単位があるを防止することを確認するコンパイラを有効にする数量を単位を使用するプログラミング エラーです。


## <a name="syntax"></a>構文

```fsharp
[<Measure>] type unit-name [ = measure ]
```

## <a name="remarks"></a>コメント
前の構文を定義*単位名*メジャーの単位として。 省略可能部分を使用して、以前に定義された単位で新しいメジャーを定義します。 たとえば、次の行がメジャーを定義`cm`(センチメートル)。

```fsharp
[<Measure>] type cm
```

次の行のメジャーを定義する`ml`(milliliter) 立方センチメートルとして (`cm^3`)。

```fsharp
[<Measure>] type ml = cm^3
```

前の構文で*メジャー*ユニットを含む式を示します。 単位を使用する数式の整数乗がサポートされている (正と負の値)、単位間のスペースを示す 2 つの単位では、製品`*`単位の積を示しますと`/`単位の商を示します。 逆数の単位、負の整数乗を使用することができますか、または`/`分子と単位の数式の分母となる間の分離を示すです。 分母に複数の単位は、かっこで囲む必要があります。 単位は後のスペースで区切られた、`/`分母では、次の任意の単位の一部として解釈されます、`*`分子の一部として解釈されます。

単位式の場合は無次元を示すためだけにするかまたはと共に分子など、他の単位は、1 を使用できます。 たとえば、速度の単位として書き込まれる`1/s`ここで、`s`秒を示すです。 かっこは、単位の数式では使用されません。 単位の式で数値変換の定数を指定しません。ただし、単位に変換定数を個別に定義でき、計算の単位がチェックされたで使用できます。

同じことを意味する単位の数式は、さまざまな方法で記述できます。 そのため、コンパイラでは、単位の数式が、逆数、グループ単位を 1 つの分子と分母に負の累乗を変換し、分子と分母のユニットが、アルファベット順に並べ替えますが一貫性のある形式に変換します。

単位式など、`kg m s^-2`と`m /s s * kg`に変換されます両方`kg m/s^2`です。

浮動小数点式では、測定単位を使用します。 タイプ セーフの別のレベルを追加するメジャーの関連付けられている単位と共に浮動小数点数を使用して、弱く型指定された浮動小数点数を使用するときに、数式で発生する単位の不一致エラーの回避に役立ちます。 浮動を記述する場合と一致単位を使用する小数点式、式のユニットが、必要があります。

次の例に示すように、山かっこで単位式を持つリテラルの注釈を付けることができます。

```fsharp
1.0<cm>
55.0<miles/hour>
```

数と、山かっ; 間にスペースを配置しないでください。ただし、リテラルのサフィックスをなどに含めることができます`f`、次の例のようにします。

```fsharp
// The f indicates single-precision floating point.
55.0f<miles/hour>
```

このような注釈がそのプリミティブ型のリテラルの型を変更 (など`float`) ディメンションが指定された型になど`float<cm>`または、この場合、`float<miles/hour>`です。 単位の注釈の`<1>`無次元の数量、およびその型が単位パラメーターを指定せず、プリミティブ型と同じことを示します。

測定単位の種類は、浮動小数点または符号付き整数型、余分な単位の注釈を角かっこで囲んでと共にします。 変換の種類を記述するときにそのため、 `g` (グラム) に`kg`(キロ)、次のように、型を記述します。

```fsharp
let convertg2kg (x : float<g>) = x / 1000.0<g/kg>
```

測定単位は、コンパイル単位のチェックに使用されますが、実行時環境では保持されません。 そのため、パフォーマンスは影響ありません。

測定単位はだけでなく浮動小数点型は、任意の型に適用できます。ただし、唯一の浮動小数点型には、整数型、および 10 進数型の次元のサポートの数量が署名されています。 したがって、のみ理にかなってプリミティブ型およびこれらのプリミティブ型が含まれる集約にメジャーの単位を使用します。

次の例では、測定単位の使用を示します。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6901.fs)]
    
次のコード例は、無次元浮動小数点数から次元設定された浮動小数点値に変換する方法を示しています。 乗算 1.0, 1.0 に次元を適用します。 ような関数に抽象化することができます`degreesFahrenheit`です。

また、する無次元浮動小数点関数に次元設定された値を渡す際にする必要があります単位を取り消すまたはにキャスト`float`を使用して、`float`演算子。 除算するこの例では`1.0<degC>`への引数の`printf`ため`printf`無次元数量が必要です。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6902.fs)]

このコードの入力と出力から次の例のセッションを示しています。

```
Enter a temperature in degrees Fahrenheit.
90
That temperature in degrees Celsius is    32.22.
```

## <a name="using-generic-units"></a>汎用的な単位を使用します。
関連するメジャーの単位を持つデータを処理するジェネリック関数を記述できます。 これを行う、型パラメーターと汎用的な単位と型を指定することによって次のコード例に示すようにします。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6903.fs)]
    
## <a name="creating-aggregate-types-with-generic-units"></a>ジェネリック ユニットと集約型の作成
次のコードでは、一般的な単位を持つ個別の浮動小数点値で構成される集計の種類を作成する方法を示します。 これにより、さまざまなユニットの動作を作成する 1 つの型。 また、ジェネリック ユニットでは、単位の 1 つのセットを持つジェネリック型が異なる一連の単位で同じジェネリック型とは異なる型であることを確認して型の安全性が保持されます。 この方法の基礎は、`Measure`属性は、型パラメーターに適用できます。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6904.fs)]
    
## <a name="units-at-runtime"></a>実行時の単位
測定単位は、静的な型をチェックするために使用されます。 浮動小数点値がコンパイルされると、メジャーの単位排除されるので、実行時に、単位は失われます。 そのため、実行時に単位のチェックが依存する機能を実装しようとするとはできません。 たとえば、実装、`ToString`単位出力する関数はできません。


## <a name="conversions"></a>変換
単位を持つ型に変換する (たとえば、 `float<'u>`) ユニットがない型には、標準変換関数を使用することができます。 たとえば、使用することができます`float`に変換する、`float`値を持たないものユニットでは、次のコードに示すようにします。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6905.fs)]

単位を持つ値を単位のない値を変換するには、適切な単位で注釈が付けられる 1 か 1.0 の値を掛けますにすることができます。 ただし、相互運用性レイヤーを記述するためもユニットと単位のない値を値に変換するのに使用できるいくつかの明示的な関数です。 これらには、 [Microsoft.FSharp.Core.LanguagePrimitives](https://msdn.microsoft.com/library/69d08ac5-5d51-4c20-bf1e-850fd312ece3)モジュール。 例については、単位からに変換する`float`を`float<cm>`を使用して[FloatWithMeasure](https://msdn.microsoft.com/library/69520bc7-d67b-46b8-9004-7cac9646b8d9)次のコードに示すように、します。

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6906.fs)]
    
## <a name="units-of-measure-in-the-f-power-pack"></a>F# Power Pack の測定単位
単位ライブラリは、f# PowerPack で使用できます。 SI 単位と物理定数単体ライブラリが含まれます。


## <a name="see-also"></a>関連項目
[F# 言語リファレンス](index.md)
