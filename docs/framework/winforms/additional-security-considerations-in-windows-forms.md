---
title: Windows フォームのセキュリティに関するその他の考慮事項
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Forms, secure calls to Windows API
- security [Windows Forms]
- security [Windows Forms], calling APIs
- Clipboard [Windows Forms], securing access
ms.assetid: 15abda8b-0527-47c7-aedb-77ab595f2bf1
ms.openlocfilehash: 2d7f5bfc1532775d092fbee1ef9cdc3c7ed5efc6
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/23/2019
ms.locfileid: "54496658"
---
# <a name="additional-security-considerations-in-windows-forms"></a><span data-ttu-id="fdf87-102">Windows フォームのセキュリティに関するその他の考慮事項</span><span class="sxs-lookup"><span data-stu-id="fdf87-102">Additional Security Considerations in Windows Forms</span></span>
[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] <span data-ttu-id="fdf87-103">セキュリティ設定によっては、ローカル コンピューターとは異なり、アプリケーションが部分信頼環境で実行されることがあります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-103">security settings might cause your application to run differently in a partial trust environment than on your local computer.</span></span> <span data-ttu-id="fdf87-104">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] は、ファイル システム、ネットワーク、アンマネージ API などの重要なローカル リソースへのアクセスを他のリソースの場合よりも制限します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-104">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] restricts access to such critical local resources as the file system, network, and unmanaged APIs, among other things.</span></span> <span data-ttu-id="fdf87-105">セキュリティ設定により、セキュリティ システムが検証できない Microsoft Win32 API やその他の API を呼び出す機能が影響を受けます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-105">The security settings affect the ability to call the Microsoft Win32 API or other APIs that cannot be verified by the security system.</span></span> <span data-ttu-id="fdf87-106">また、ファイルやデータへのアクセス、印刷など、アプリケーションのその他の処理にも影響があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-106">Security also affects other aspects of your application, including file and data access, and printing.</span></span> <span data-ttu-id="fdf87-107">部分信頼環境でのファイルやデータへのアクセスの詳細については、「[Windows フォームにおけるファイルおよびデータへのより安全なアクセス](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-107">For more information about file and data access in a partial trust environment, see [More Secure File and Data Access in Windows Forms](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md).</span></span> <span data-ttu-id="fdf87-108">部分信頼環境での印刷の詳細については、「[Windows フォームでのより安全な印刷](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-108">For more information about printing in a partial trust environment, see [More Secure Printing in Windows Forms](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md).</span></span>  
  
 <span data-ttu-id="fdf87-109">以下のセクションでは、クリップボードの使用、ウィンドウ操作の実行、および部分信頼環境で動作しているアプリケーションからの Win32 API の呼び出しについて説明しています。</span><span class="sxs-lookup"><span data-stu-id="fdf87-109">The following sections discuss how to work with the Clipboard, perform window manipulation, and call the Win32 API from applications that are running in a partial trust environment.</span></span>  
  
## <a name="clipboard-access"></a><span data-ttu-id="fdf87-110">クリップボードへのアクセス</span><span class="sxs-lookup"><span data-stu-id="fdf87-110">Clipboard Access</span></span>  
 <span data-ttu-id="fdf87-111"><xref:System.Security.Permissions.UIPermission>クラスは、クリップボードと関連付けられているへのアクセスを制御<xref:System.Security.Permissions.UIPermissionClipboard>列挙値は、アクセスのレベルを示します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-111">The <xref:System.Security.Permissions.UIPermission> class controls access to the Clipboard, and the associated <xref:System.Security.Permissions.UIPermissionClipboard> enumeration value indicates the level of access.</span></span> <span data-ttu-id="fdf87-112">使用されるアクセス許可レベルを次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-112">The following table shows the possible permission levels.</span></span>  
  
|<span data-ttu-id="fdf87-113">UIPermissionClipboard の値</span><span class="sxs-lookup"><span data-stu-id="fdf87-113">UIPermissionClipboard value</span></span>|<span data-ttu-id="fdf87-114">説明</span><span class="sxs-lookup"><span data-stu-id="fdf87-114">Description</span></span>|  
|---------------------------------|-----------------|  
|<xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard>|<span data-ttu-id="fdf87-115">クリップボードは制限なしに使用できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-115">The Clipboard can be used without restriction.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard>|<span data-ttu-id="fdf87-116">クリップボードは制限付きで使用できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-116">The Clipboard can be used with some restrictions.</span></span> <span data-ttu-id="fdf87-117">クリップボードにデータを格納する機能 ([コピー] または [切り取り] のコマンド操作) は制限されません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-117">The ability to put data on the Clipboard (Copy or Cut command operations) is unrestricted.</span></span> <span data-ttu-id="fdf87-118">テキスト ボックスなど、[貼り付け] を受け入れる固有のコントロールは、クリップボードのデータを受け入れます。しかし、ユーザー コントロールはプログラムでクリップボードからデータを読み取ることができません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-118">Intrinsic controls that accept paste, such as a text box, can accept Clipboard data, but user controls cannot programmatically read from the Clipboard.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionClipboard.NoClipboard>|<span data-ttu-id="fdf87-119">クリップボードは使用できません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-119">The Clipboard cannot be used.</span></span>|  
  
 <span data-ttu-id="fdf87-120">ローカル イントラネット ゾーンでは既定では、<xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard>アクセスと、インターネット ゾーンを受け取る<xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard>アクセスします。</span><span class="sxs-lookup"><span data-stu-id="fdf87-120">By default, the Local Intranet zone receives <xref:System.Security.Permissions.UIPermissionClipboard.AllClipboard> access and the Internet zone receives <xref:System.Security.Permissions.UIPermissionClipboard.OwnClipboard> access.</span></span> <span data-ttu-id="fdf87-121">つまり、アプリケーションはクリップボードにデータをコピーできますが、プログラムでクリップボードに貼り付けたりクリップボードから読み取ったりはできません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-121">This means that the application can copy data to the Clipboard, but the application cannot programmatically paste to or read from the Clipboard.</span></span> <span data-ttu-id="fdf87-122">これらの制限により、完全に信頼されていないプログラムは、他のアプリケーションによってクリップボードにコピーされた内容を読み取ることができません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-122">These restrictions prevent programs without full trust from reading content copied to the Clipboard by another application.</span></span> <span data-ttu-id="fdf87-123">アプリケーションがクリップボードへの完全なアクセスを必要とするにもかかわらず、アクセス許可がない場合は、アプリケーションに対するアクセス許可を昇格する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-123">If your application requires full Clipboard access but you do not have the permissions, you will have to elevate the permissions for your application.</span></span> <span data-ttu-id="fdf87-124">アクセス許可の昇格の詳細については、「[一般的なセキュリティ ポリシー管理](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-124">For more information about elevating permissions, see [General Security Policy Administration](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span></span>  
  
## <a name="window-manipulation"></a><span data-ttu-id="fdf87-125">ウィンドウ操作</span><span class="sxs-lookup"><span data-stu-id="fdf87-125">Window Manipulation</span></span>  
 <span data-ttu-id="fdf87-126"><xref:System.Security.Permissions.UIPermission>クラスもウィンドウ操作と、他の UI 関連のアクションと関連付けられているを実行するアクセス許可を制御<xref:System.Security.Permissions.UIPermissionWindow>列挙値は、アクセスのレベルを示します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-126">The <xref:System.Security.Permissions.UIPermission> class also controls permission to perform window manipulation and other UI-related actions, and the associated <xref:System.Security.Permissions.UIPermissionWindow> enumeration value indicates the level of access.</span></span> <span data-ttu-id="fdf87-127">使用されるアクセス許可レベルを次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-127">The following table shows the possible permission levels.</span></span>  
  
 <span data-ttu-id="fdf87-128">ローカル イントラネット ゾーンでは既定では、<xref:System.Security.Permissions.UIPermissionWindow.AllWindows>アクセスと、インターネット ゾーンを受け取る<xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows>アクセスします。</span><span class="sxs-lookup"><span data-stu-id="fdf87-128">By default, the Local Intranet zone receives <xref:System.Security.Permissions.UIPermissionWindow.AllWindows> access and the Internet zone receives <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> access.</span></span> <span data-ttu-id="fdf87-129">つまり、[インターネット] ゾーンでは、アプリケーションがほとんどのウィンドウ操作および UI 関連処理を実行できますが、ウィンドウの外観が変更されます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-129">This means that in the Internet zone, the application can perform most windowing and UI actions, but the window's appearance will be modified.</span></span> <span data-ttu-id="fdf87-130">変更されたウィンドウには、最初の実行時にバルーン通知が表示され、変更されたタイトル バー テキストが表示され、タイトル バーに閉じるボタンが必要になります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-130">The modified window displays a balloon notification when first run, contains modified title bar text, and requires a close button on the title bar.</span></span> <span data-ttu-id="fdf87-131">バルーン通知とタイトル バーは、アプリケーションのユーザーに、アプリケーションが部分信頼で動作していることを示します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-131">The balloon notification and the title bar identify to the user of the application that the application is running under partial trust.</span></span>  
  
|<span data-ttu-id="fdf87-132">UIPermissionWindow の値</span><span class="sxs-lookup"><span data-stu-id="fdf87-132">UIPermissionWindow value</span></span>|<span data-ttu-id="fdf87-133">説明</span><span class="sxs-lookup"><span data-stu-id="fdf87-133">Description</span></span>|  
|------------------------------|-----------------|  
|<xref:System.Security.Permissions.UIPermissionWindow.AllWindows>|<span data-ttu-id="fdf87-134">ユーザーは、すべてのウィンドウとユーザー入力イベントを無制限に使用できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-134">Users can use all windows and user input events without restriction.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows>|<span data-ttu-id="fdf87-135">ユーザーは、セーフ トップレベル ウィンドウとセーフ サブウィンドウだけを描画に使用でき、それらのセーフ トップレベル ウィンドウとセーフ サブウィンドウの中のユーザー インターフェイスに対するユーザー入力イベントだけを使用できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-135">Users can use only safer top-level windows and safer subwindows for drawing, and can use only user input events for the user interface within those top-level windows and subwindows.</span></span> <span data-ttu-id="fdf87-136">これらのセーフ ウィンドウには明確なラベルが付けられ、最小サイズと最大サイズに制限があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-136">These safer windows are clearly labeled and have minimum and maximum size restrictions.</span></span> <span data-ttu-id="fdf87-137">制限システム ログオン画面やシステムのデスクトップの偽装などの問題を引き起こす可能性のスプーフィング攻撃を防止し、ウィンドウや、フォーカスに関連する Api の使用を親にプログラムでアクセスを制限、<xref:System.Windows.Forms.ToolTip>コントロール</span><span class="sxs-lookup"><span data-stu-id="fdf87-137">The restrictions prevent potentially harmful spoofing attacks, such as imitating system logon screens or the system desktop, and restricts programmatic access to parent windows, focus-related APIs, and use of the <xref:System.Windows.Forms.ToolTip> control,</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows>|<span data-ttu-id="fdf87-138">ユーザーは、セーフ サブウィンドウだけを描画に使用でき、そのセーフ サブウィンドウの中のユーザー インターフェイスに対するユーザー入力イベントだけを使用できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-138">Users can use only safer subwindows for drawing, and can use only user input events for the user interface within that subwindow.</span></span> <span data-ttu-id="fdf87-139">ブラウザー内に表示されるコントロールは、セーフ サブウィンドウの一例です。</span><span class="sxs-lookup"><span data-stu-id="fdf87-139">A control displayed within a browser is an example of a safer subwindow.</span></span>|  
|<xref:System.Security.Permissions.UIPermissionWindow.NoWindows>|<span data-ttu-id="fdf87-140">ユーザーは、ウィンドウおよびユーザー インターフェイス イベントを使用できません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-140">Users cannot use any windows or user interface events.</span></span> <span data-ttu-id="fdf87-141">ユーザー インターフェイスは使用できません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-141">No user interface can be used.</span></span>|  
  
 <span data-ttu-id="fdf87-142">各アクセス許可のレベルで識別される、<xref:System.Security.Permissions.UIPermissionWindow>列挙体は、その上のレベルよりも少ない操作を許可します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-142">Each permission level identified by the <xref:System.Security.Permissions.UIPermissionWindow> enumeration allows fewer actions than the level above it.</span></span> <span data-ttu-id="fdf87-143">次の表は、によって制限される操作を示す、<xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows>と<xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows>値。</span><span class="sxs-lookup"><span data-stu-id="fdf87-143">The following tables indicate the actions that are restricted by the <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> and <xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> values.</span></span> <span data-ttu-id="fdf87-144">各メンバーに対して必要なアクセス許可については、.NET Framework クラス ライブラリのドキュメントで該当するメンバーのトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-144">For exact permissions that are required for each member, see the reference for that member in the .NET Framework class library documentation.</span></span>  
  
 <span data-ttu-id="fdf87-145"><xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> アクセス許可は、次の表に示す操作を制限します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-145"><xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> permission restricts the actions listed in the following table.</span></span>  
  
|<span data-ttu-id="fdf87-146">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="fdf87-146">Component</span></span>|<span data-ttu-id="fdf87-147">制限される処理</span><span class="sxs-lookup"><span data-stu-id="fdf87-147">Restricted actions</span></span>|  
|---------------|------------------------|  
|<xref:System.Windows.Forms.Application>|<span data-ttu-id="fdf87-148">-   <xref:System.Windows.Forms.Application.SafeTopLevelCaptionFormat%2A> プロパティの設定</span><span class="sxs-lookup"><span data-stu-id="fdf87-148">-   Setting the <xref:System.Windows.Forms.Application.SafeTopLevelCaptionFormat%2A> property.</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="fdf87-149">Getting、<xref:System.Windows.Forms.Control.Parent%2A>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="fdf87-149">-   Getting the <xref:System.Windows.Forms.Control.Parent%2A> property.</span></span><br /><span data-ttu-id="fdf87-150">-   `Region` プロパティの設定</span><span class="sxs-lookup"><span data-stu-id="fdf87-150">-   Setting the `Region` property.</span></span><br /><span data-ttu-id="fdf87-151">-呼び出し、 <xref:System.Windows.Forms.Control.FindForm%2A> 、 <xref:System.Windows.Forms.Control.Focus%2A>、<xref:System.Windows.Forms.Control.FromChildHandle%2A>と<xref:System.Windows.Forms.Control.FromHandle%2A>、 <xref:System.Windows.Forms.Control.PreProcessMessage%2A>、 <xref:System.Windows.Forms.Control.ReflectMessage%2A>、または<xref:System.Windows.Forms.Control.SetTopLevel%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-151">-   Calling the <xref:System.Windows.Forms.Control.FindForm%2A> , <xref:System.Windows.Forms.Control.Focus%2A>, <xref:System.Windows.Forms.Control.FromChildHandle%2A> and <xref:System.Windows.Forms.Control.FromHandle%2A>, <xref:System.Windows.Forms.Control.PreProcessMessage%2A>, <xref:System.Windows.Forms.Control.ReflectMessage%2A>, or <xref:System.Windows.Forms.Control.SetTopLevel%2A> method.</span></span><br /><span data-ttu-id="fdf87-152">-呼び出し、<xref:System.Windows.Forms.Control.GetChildAtPoint%2A>メソッド、制御が返された場合は、呼び出し元コントロールの子ではありません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-152">-   Calling the <xref:System.Windows.Forms.Control.GetChildAtPoint%2A> method if the control returned is not a child of the calling control.</span></span><br /><span data-ttu-id="fdf87-153">-   コンテナー コントロール内でのコントロール フォーカスの変更</span><span class="sxs-lookup"><span data-stu-id="fdf87-153">-   Modify control focus inside a container control.</span></span>|  
|<xref:System.Windows.Forms.Cursor>|<span data-ttu-id="fdf87-154">-   <xref:System.Windows.Forms.Cursor.Clip%2A> プロパティの設定</span><span class="sxs-lookup"><span data-stu-id="fdf87-154">-   Setting the <xref:System.Windows.Forms.Cursor.Clip%2A> property.</span></span><br /><span data-ttu-id="fdf87-155">-呼び出し、<xref:System.Windows.Forms.Control.Hide%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-155">-   Calling the <xref:System.Windows.Forms.Control.Hide%2A> method.</span></span>|  
|<xref:System.Windows.Forms.DataGrid>|<span data-ttu-id="fdf87-156">-呼び出し、<xref:System.Windows.Forms.ContainerControl.ProcessTabKey%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-156">-   Calling the <xref:System.Windows.Forms.ContainerControl.ProcessTabKey%2A> method.</span></span>|  
|<xref:System.Windows.Forms.Form>|<span data-ttu-id="fdf87-157">Getting、<xref:System.Windows.Forms.Form.ActiveForm%2A>または<xref:System.Windows.Forms.Form.MdiParent%2A>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="fdf87-157">-   Getting the <xref:System.Windows.Forms.Form.ActiveForm%2A> or <xref:System.Windows.Forms.Form.MdiParent%2A> property.</span></span><br /><span data-ttu-id="fdf87-158">-設定、 <xref:System.Windows.Forms.Form.ControlBox%2A>、 <xref:System.Windows.Forms.Form.ShowInTaskbar%2A>、または<xref:System.Windows.Forms.Form.TopMost%2A>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="fdf87-158">-   Setting the <xref:System.Windows.Forms.Form.ControlBox%2A>, <xref:System.Windows.Forms.Form.ShowInTaskbar%2A>, or <xref:System.Windows.Forms.Form.TopMost%2A> property.</span></span><br /><span data-ttu-id="fdf87-159">-設定、 <xref:System.Windows.Forms.Form.Opacity%2A> 50% を下回るプロパティ。</span><span class="sxs-lookup"><span data-stu-id="fdf87-159">-   Setting the <xref:System.Windows.Forms.Form.Opacity%2A> property below 50%.</span></span><br /><span data-ttu-id="fdf87-160">-設定、<xref:System.Windows.Forms.Form.WindowState%2A>プロパティを<xref:System.Windows.Forms.FormWindowState.Minimized>プログラムを使用します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-160">-   Setting the <xref:System.Windows.Forms.Form.WindowState%2A> property to <xref:System.Windows.Forms.FormWindowState.Minimized> programmatically.</span></span><br /><span data-ttu-id="fdf87-161">-呼び出し、<xref:System.Windows.Forms.Form.Activate%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-161">-   Calling the <xref:System.Windows.Forms.Form.Activate%2A> method.</span></span><br /><span data-ttu-id="fdf87-162">-を使用して、 <xref:System.Windows.Forms.FormBorderStyle.None>、 <xref:System.Windows.Forms.FormBorderStyle.FixedToolWindow>、および<xref:System.Windows.Forms.FormBorderStyle.SizableToolWindow><xref:System.Windows.Forms.FormBorderStyle>列挙値。</span><span class="sxs-lookup"><span data-stu-id="fdf87-162">-   Using the <xref:System.Windows.Forms.FormBorderStyle.None>, <xref:System.Windows.Forms.FormBorderStyle.FixedToolWindow>, and <xref:System.Windows.Forms.FormBorderStyle.SizableToolWindow><xref:System.Windows.Forms.FormBorderStyle> enumeration values.</span></span>|  
|<xref:System.Windows.Forms.NotifyIcon>|<span data-ttu-id="fdf87-163">-を使用して、<xref:System.Windows.Forms.NotifyIcon>コンポーネントは完全に制限されています。</span><span class="sxs-lookup"><span data-stu-id="fdf87-163">-   Using the <xref:System.Windows.Forms.NotifyIcon> component is completely restricted.</span></span>|  
  
 <span data-ttu-id="fdf87-164"><xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows>値による制限をさらに、次の表に示す操作を制限する、<xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows>値。</span><span class="sxs-lookup"><span data-stu-id="fdf87-164">The <xref:System.Security.Permissions.UIPermissionWindow.SafeSubWindows> value restricts the actions listed in the following table, in addition to the restrictions placed by the <xref:System.Security.Permissions.UIPermissionWindow.SafeTopLevelWindows> value.</span></span>  
  
|<span data-ttu-id="fdf87-165">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="fdf87-165">Component</span></span>|<span data-ttu-id="fdf87-166">制限される処理</span><span class="sxs-lookup"><span data-stu-id="fdf87-166">Restricted actions</span></span>|  
|---------------|------------------------|  
|<xref:System.Windows.Forms.CommonDialog>|<span data-ttu-id="fdf87-167">-派生したダイアログ ボックスを表示、<xref:System.Windows.Forms.CommonDialog>クラス。</span><span class="sxs-lookup"><span data-stu-id="fdf87-167">-   Showing a dialog box derived from the <xref:System.Windows.Forms.CommonDialog> class.</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="fdf87-168">-呼び出し、<xref:System.Windows.Forms.Control.CreateGraphics%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-168">-   Calling the <xref:System.Windows.Forms.Control.CreateGraphics%2A> method.</span></span><br /><span data-ttu-id="fdf87-169">-   <xref:System.Windows.Forms.Control.Cursor%2A> プロパティの設定</span><span class="sxs-lookup"><span data-stu-id="fdf87-169">-   Setting the <xref:System.Windows.Forms.Control.Cursor%2A> property.</span></span>|  
|<xref:System.Windows.Forms.Control.Cursor%2A>|<span data-ttu-id="fdf87-170">-   <xref:System.Windows.Forms.Cursor.Current%2A> プロパティの設定</span><span class="sxs-lookup"><span data-stu-id="fdf87-170">-   Setting the <xref:System.Windows.Forms.Cursor.Current%2A> property.</span></span>|  
|<xref:System.Windows.Forms.MessageBox>|<span data-ttu-id="fdf87-171">-呼び出し、<xref:System.Windows.Forms.Form.Show%2A>メソッド。</span><span class="sxs-lookup"><span data-stu-id="fdf87-171">-   Calling the <xref:System.Windows.Forms.Form.Show%2A> method.</span></span>|  
  
### <a name="hosting-third-party-controls"></a><span data-ttu-id="fdf87-172">サードパーティ コントロールのホスト</span><span class="sxs-lookup"><span data-stu-id="fdf87-172">Hosting Third-Party Controls</span></span>  
 <span data-ttu-id="fdf87-173">フォームでサードパーティ コントロールをホストしている場合、他の種類のウィンドウ操作が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-173">Another kind of window manipulation can occur if your forms host third-party controls.</span></span> <span data-ttu-id="fdf87-174">サード パーティ製のコントロールが任意のカスタム<xref:System.Windows.Forms.UserControl>されませんが開発され、自分でコンパイルします。</span><span class="sxs-lookup"><span data-stu-id="fdf87-174">A third-party control is any custom <xref:System.Windows.Forms.UserControl> that you have not developed and compiled yourself.</span></span> <span data-ttu-id="fdf87-175">ホスト シナリオを攻略するのは困難ですが、理論上、サードパーティ コントロールが描画サーフェイスを拡張して、フォームの領域全体を対象にする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-175">Although the hosting scenario is hard to exploit, it is theoretically possible for a third-party control to expand its rendering surface to cover the entire area of your form.</span></span> <span data-ttu-id="fdf87-176">このようなコントロールは、重要なダイアログ ボックスを模倣し、ユーザーのユーザー名/パスワードの組み合わせや銀行口座番号などの情報を要求する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-176">This control could then mimic a critical dialog box, and request information such as username/password combinations or bank account numbers from your users.</span></span>  
  
 <span data-ttu-id="fdf87-177">このような考えられるリスクを制限するために、信頼できる販売元のサードパーティ コントロールのみを使用します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-177">To limit this potential risk, use third-party controls only from vendors you can trust.</span></span> <span data-ttu-id="fdf87-178">確認できないソースからサードパーティ コントロールをダウンロードした場合、攻略行為が実行されないかソース コードを確認することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="fdf87-178">If you use third-party controls you have downloaded from an unverifiable source, we recommend that you review the source code for potential exploits.</span></span> <span data-ttu-id="fdf87-179">ソースに悪意がないことを検証してから、アセンブリを自分でコンパイルし、ソースがアセンブリと一致することを確認します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-179">After you've verified that the source is non-malicious, you should compile the assembly yourself to ensure that the source matches the assembly.</span></span>  
  
## <a name="win32-api-calls"></a><span data-ttu-id="fdf87-180">Win32 API 呼び出し</span><span class="sxs-lookup"><span data-stu-id="fdf87-180">Win32 API Calls</span></span>  
 <span data-ttu-id="fdf87-181">アプリケーションのデザインで Win32 API から関数を呼び出す必要がある場合は、アンマネージ コードにアクセスします。</span><span class="sxs-lookup"><span data-stu-id="fdf87-181">If your application design requires calling a function from the Win32 API, you are accessing unmanaged code.</span></span> <span data-ttu-id="fdf87-182">この場合、Win32 API の呼び出しまたは値を使用するときに、ウィンドウまたはオペレーティング システムに対するコードの動作が決定できません。</span><span class="sxs-lookup"><span data-stu-id="fdf87-182">In this case the code's actions to the window or operating system cannot be determined when you are working with Win32 API calls or values.</span></span> <span data-ttu-id="fdf87-183"><xref:System.Security.Permissions.SecurityPermission>クラスおよび<xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>の値、<xref:System.Security.Permissions.SecurityPermissionFlag>列挙体は、アンマネージ コードへのアクセスを制御します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-183">The <xref:System.Security.Permissions.SecurityPermission> class and the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> value of the <xref:System.Security.Permissions.SecurityPermissionFlag> enumeration control access to unmanaged code.</span></span> <span data-ttu-id="fdf87-184">アプリケーションは、与えられている場合にのみアンマネージ コードにアクセスできる、<xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>権限。</span><span class="sxs-lookup"><span data-stu-id="fdf87-184">An application can access unmanaged code only when it is granted the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission.</span></span> <span data-ttu-id="fdf87-185">既定では、ローカルで実行されているアプリケーションだけがアンマネージ コードを呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-185">By default, only applications that are running locally can call unmanaged code.</span></span>  
  
 <span data-ttu-id="fdf87-186">Windows フォームの一部のメンバーを必要とするアンマネージ アクセスを提供する、<xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>権限。</span><span class="sxs-lookup"><span data-stu-id="fdf87-186">Some Windows Forms members provide unmanaged access that requires the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission.</span></span> <span data-ttu-id="fdf87-187">次の表に、内のメンバー、<xref:System.Windows.Forms>名前空間アクセス許可が必要です。</span><span class="sxs-lookup"><span data-stu-id="fdf87-187">The following table lists the members in the <xref:System.Windows.Forms> namespace that require the permission.</span></span> <span data-ttu-id="fdf87-188">メンバーに対して必要なアクセス許可の詳細については、.NET Framework クラス ライブラリのドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-188">For more information about the permissions that are required for a member, see the .NET Framework class library documentation.</span></span>  
  
|<span data-ttu-id="fdf87-189">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="fdf87-189">Component</span></span>|<span data-ttu-id="fdf87-190">メンバー</span><span class="sxs-lookup"><span data-stu-id="fdf87-190">Member</span></span>|  
|---------------|------------|  
|<xref:System.Windows.Forms.Application>|<span data-ttu-id="fdf87-191">-   <xref:System.Windows.Forms.Application.AddMessageFilter%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-191">-   <xref:System.Windows.Forms.Application.AddMessageFilter%2A> method</span></span><br /><span data-ttu-id="fdf87-192">-   <xref:System.Windows.Forms.Application.CurrentInputLanguage%2A> プロパティ</span><span class="sxs-lookup"><span data-stu-id="fdf87-192">-   <xref:System.Windows.Forms.Application.CurrentInputLanguage%2A> property</span></span><br /><span data-ttu-id="fdf87-193">-   `Exit` メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-193">-   `Exit` method</span></span><br /><span data-ttu-id="fdf87-194">-   <xref:System.Windows.Forms.Application.ExitThread%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-194">-   <xref:System.Windows.Forms.Application.ExitThread%2A> method</span></span><br /><span data-ttu-id="fdf87-195">-   <xref:System.Windows.Forms.Application.ThreadException> イベント</span><span class="sxs-lookup"><span data-stu-id="fdf87-195">-   <xref:System.Windows.Forms.Application.ThreadException> event</span></span>|  
|<xref:System.Windows.Forms.CommonDialog>|<span data-ttu-id="fdf87-196">-   <xref:System.Windows.Forms.CommonDialog.HookProc%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-196">-   <xref:System.Windows.Forms.CommonDialog.HookProc%2A> method</span></span><br /><span data-ttu-id="fdf87-197">-   <xref:System.Windows.Forms.CommonDialog.OwnerWndProc%2A>\ メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-197">-   <xref:System.Windows.Forms.CommonDialog.OwnerWndProc%2A>\ method</span></span><br /><span data-ttu-id="fdf87-198">-   <xref:System.Windows.Forms.CommonDialog.Reset%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-198">-   <xref:System.Windows.Forms.CommonDialog.Reset%2A> method</span></span><br /><span data-ttu-id="fdf87-199">-   <xref:System.Windows.Forms.CommonDialog.RunDialog%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-199">-   <xref:System.Windows.Forms.CommonDialog.RunDialog%2A> method</span></span>|  
|<xref:System.Windows.Forms.Control>|<span data-ttu-id="fdf87-200">-   <xref:System.Windows.Forms.Control.CreateParams%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-200">-   <xref:System.Windows.Forms.Control.CreateParams%2A> method</span></span><br /><span data-ttu-id="fdf87-201">-   <xref:System.Windows.Forms.Control.DefWndProc%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-201">-   <xref:System.Windows.Forms.Control.DefWndProc%2A> method</span></span><br /><span data-ttu-id="fdf87-202">-   <xref:System.Windows.Forms.Control.DestroyHandle%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-202">-   <xref:System.Windows.Forms.Control.DestroyHandle%2A> method</span></span><br /><span data-ttu-id="fdf87-203">-   <xref:System.Windows.Forms.Control.WndProc%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-203">-   <xref:System.Windows.Forms.Control.WndProc%2A> method</span></span>|  
|<xref:System.Windows.Forms.Help>|<span data-ttu-id="fdf87-204">-   <xref:System.Windows.Forms.Help.ShowHelp%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-204">-   <xref:System.Windows.Forms.Help.ShowHelp%2A> methods</span></span><br /><span data-ttu-id="fdf87-205">-   <xref:System.Windows.Forms.Help.ShowHelpIndex%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-205">-   <xref:System.Windows.Forms.Help.ShowHelpIndex%2A> method</span></span>|  
|<xref:System.Windows.Forms.NativeWindow>|<span data-ttu-id="fdf87-206">-   <xref:System.Windows.Forms.NativeWindow> クラス</span><span class="sxs-lookup"><span data-stu-id="fdf87-206">-   <xref:System.Windows.Forms.NativeWindow> class</span></span>|  
|<xref:System.Windows.Forms.Screen>|<span data-ttu-id="fdf87-207">-   <xref:System.Windows.Forms.Screen.FromHandle%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-207">-   <xref:System.Windows.Forms.Screen.FromHandle%2A> method</span></span>|  
|<xref:System.Windows.Forms.SendKeys>|<span data-ttu-id="fdf87-208">-   <xref:System.Windows.Forms.SendKeys.Send%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-208">-   <xref:System.Windows.Forms.SendKeys.Send%2A> method</span></span><br /><span data-ttu-id="fdf87-209">-   <xref:System.Windows.Forms.SendKeys.SendWait%2A> メソッド</span><span class="sxs-lookup"><span data-stu-id="fdf87-209">-   <xref:System.Windows.Forms.SendKeys.SendWait%2A> method</span></span>|  
  
 <span data-ttu-id="fdf87-210">アプリケーションを要求する必要があるかどうか、アプリケーションにはアンマネージ コードを呼び出すアクセス許可はありません、<xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode>権限、または別の機能を実装する方法を検討する必要があります。 多くの場合、Windows フォームが Win32 API を管理対象の代替手段を提供します。関数。</span><span class="sxs-lookup"><span data-stu-id="fdf87-210">If your application does not have permission to call unmanaged code, your application must request <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> permission, or you must consider alternative ways of implementing features; in many cases, Windows Forms provides a managed alternative to Win32 API functions.</span></span> <span data-ttu-id="fdf87-211">代わりの手段がなく、アプリケーションがアンマネージ コードにアクセスする必要がある場合は、アプリケーションに対するアクセス許可を昇格する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fdf87-211">If no alternative means exist and the application must access unmanaged code, you will have to elevate the permissions for the application.</span></span>  
  
 <span data-ttu-id="fdf87-212">アンマネージ コードを呼び出すアクセス許可を与えられたアプリケーションは、ほとんどの処理を実行できます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-212">Permission to call unmanaged code allows an application to perform most anything.</span></span> <span data-ttu-id="fdf87-213">そのため、アンマネージ コードを呼び出すアクセス許可は、信頼されたソースからのアプリケーションに対してだけ与えるようにしてください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-213">Therefore, permission to call unmanaged code should only be granted for applications that come from a trusted source.</span></span> <span data-ttu-id="fdf87-214">また、アプリケーションによっては、アンマネージ コードの呼び出しを生成するアプリケーション機能の一部をオプションにするか、完全に信頼された環境でのみ有効にすることもできます。</span><span class="sxs-lookup"><span data-stu-id="fdf87-214">Alternatively, depending on the application, the piece of application functionality that makes the call to unmanaged code could be optional, or enabled in the full trust environment only.</span></span> <span data-ttu-id="fdf87-215">危険なアクセス許可の詳細については、「[危険なアクセス許可とポリシー管理](../../../docs/framework/misc/dangerous-permissions-and-policy-administration.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="fdf87-215">For more information about dangerous permissions, see [Dangerous Permissions and Policy Administration](../../../docs/framework/misc/dangerous-permissions-and-policy-administration.md).</span></span> <span data-ttu-id="fdf87-216">アクセス許可の昇格の詳細については、次を参照してください[NIB:。全般的なセキュリティ ポリシー管理](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b)します。</span><span class="sxs-lookup"><span data-stu-id="fdf87-216">For more information about elevating permissions, see [NIB: General Security Policy Administration](https://msdn.microsoft.com/library/5121fe35-f0e3-402c-94ab-4f35b0a87b4b).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fdf87-217">関連項目</span><span class="sxs-lookup"><span data-stu-id="fdf87-217">See also</span></span>
- [<span data-ttu-id="fdf87-218">Windows フォームにおけるファイルおよびデータへのより安全なアクセス</span><span class="sxs-lookup"><span data-stu-id="fdf87-218">More Secure File and Data Access in Windows Forms</span></span>](../../../docs/framework/winforms/more-secure-file-and-data-access-in-windows-forms.md)
- [<span data-ttu-id="fdf87-219">Windows フォームでのより安全な印刷</span><span class="sxs-lookup"><span data-stu-id="fdf87-219">More Secure Printing in Windows Forms</span></span>](../../../docs/framework/winforms/more-secure-printing-in-windows-forms.md)
- [<span data-ttu-id="fdf87-220">Windows フォームのセキュリティの概要</span><span class="sxs-lookup"><span data-stu-id="fdf87-220">Security in Windows Forms Overview</span></span>](../../../docs/framework/winforms/security-in-windows-forms-overview.md)
- [<span data-ttu-id="fdf87-221">Windows フォームのセキュリティ</span><span class="sxs-lookup"><span data-stu-id="fdf87-221">Windows Forms Security</span></span>](../../../docs/framework/winforms/windows-forms-security.md)
- [<span data-ttu-id="fdf87-222">ClickOnce アプリケーションのセキュリティ</span><span class="sxs-lookup"><span data-stu-id="fdf87-222">Securing ClickOnce Applications</span></span>](/visualstudio/deployment/securing-clickonce-applications)
