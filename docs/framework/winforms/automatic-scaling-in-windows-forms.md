---
title: "Windows フォームにおける自動スケーリング"
ms.date: 06/15/2017
ms.prod: .net-framework
ms.technology: dotnet-winforms
ms.topic: article
helpviewer_keywords:
- scalability [Windows Forms], automatic in Windows Forms
- Windows Forms, automatic scaling
ms.assetid: 68fad25b-afbc-44bd-8e1b-966fc43507a4
caps.latest.revision: "9"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 4eefab1dccc295557d95485d6f38add41e634fa4
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/21/2017
---
# <a name="automatic-scaling-in-windows-forms"></a><span data-ttu-id="54b4e-102">Windows フォームにおける自動スケーリング</span><span class="sxs-lookup"><span data-stu-id="54b4e-102">Automatic scaling in Windows Forms</span></span>
<span data-ttu-id="54b4e-103">自動スケーリングによって、特定のディスプレイの解像度またはシステムのフォントを持つマシンに合わせて設計されたフォームとコントロールを、ディスプレイの別の解像度やシステム フォントを持つ別のマシンで適切に表示することができます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-103">Automatic scaling enables a form and its controls, designed on one machine with a certain display resolution or system font, to be displayed appropriately on another machine with a different display resolution or system font.</span></span> <span data-ttu-id="54b4e-104">フォームとコントロールが、ユーザーとその他の開発者のマシンのネイティブ ウィンドウとその他のアプリケーションで、一貫性を持つよう適切にサイズ変更され、</span><span class="sxs-lookup"><span data-stu-id="54b4e-104">It assures that the form and its controls will intelligently resize to be consistent with native windows and other applications on both the users' and other developers' machines.</span></span> <span data-ttu-id="54b4e-105">自動スケーリングと視覚スタイルに対する [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] のサポートにより、各ユーザーのマシンのネイティブの Windows アプリケーションと比較した場合、[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] アプリケーションが一貫したルック アンド フィールを維持することができます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-105">The support of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] for automatic scaling and visual styles enables [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] applications to maintain a consistent look and feel when compared to native Windows applications on each user's machine.</span></span>
  
<span data-ttu-id="54b4e-106">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] バージョン 2.0 以降では、ほとんどの場合、自動スケーリングは正常に機能します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-106">For the most part, automatic scaling works as expected in [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 and later.</span></span> <span data-ttu-id="54b4e-107">ただし、フォント パターンの変更が問題になる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="54b4e-107">However, font scheme changes can be problematic.</span></span> <span data-ttu-id="54b4e-108">この問題を解決する方法の例を参照してください[する方法: Windows フォーム アプリケーションでのフォント パターンの変更に応答](how-to-respond-to-font-scheme-changes-in-a-windows-forms-application.md)です。</span><span class="sxs-lookup"><span data-stu-id="54b4e-108">To see an example of how to resolve this, see [How to: Respond to Font Scheme Changes in a Windows Forms Application](how-to-respond-to-font-scheme-changes-in-a-windows-forms-application.md).</span></span>
  
## <a name="need-for-automatic-scaling"></a><span data-ttu-id="54b4e-109">自動スケーリングの必要性</span><span class="sxs-lookup"><span data-stu-id="54b4e-109">Need for automatic scaling</span></span>  
<span data-ttu-id="54b4e-110">自動スケーリングがないと、1 つのディスプレイの解像度やフォントのために設計されたアプリケーションは、その解像度やフォントが変更されたときに、表示が小さすぎたり大きすぎたりします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-110">Without automatic scaling, an application designed for one display resolution or font will either appear too small or too large when that resolution or font is changed.</span></span> <span data-ttu-id="54b4e-111">たとえば、アプリケーションが基準として Tahoma の 9 ポイントを使用して設計されている場合、調整なしでは、システム フォントが Tahoma の 12 ポイントのマシンで実行すると、表示が小さすぎます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-111">For example, if the application is designed using Tahoma 9 point as a baseline, without adjustment it will appear too small if run on a machine where the system font is Tahoma 12 point.</span></span> <span data-ttu-id="54b4e-112">タイトル、メニュー、テキスト ボックスの内容などのテキストの要素は、他のアプリケーションより小さく表示されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-112">Text elements, such as titles, menus, text box contents, and so on will render smaller than other applications.</span></span> <span data-ttu-id="54b4e-113">さらに、タイトル バー、メニューや、多数のコントロールのテキストを含むユーザー インターフェイス (UI) 要素のサイズは、使用されるフォントに依存します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-113">Furthermore, the size of user interface (UI) elements that contain text, such as the title bar, menus, and many controls are dependent on the font used.</span></span> <span data-ttu-id="54b4e-114">この例では、これらの要素は比較的小さく表示されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-114">In this example, these elements will also appear relatively smaller.</span></span>

<span data-ttu-id="54b4e-115">類似する状況は、アプリケーションがディスプレイの特定の解像度のために設計されている場合にも発生します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-115">An analogous situation occurs when an application is designed for a certain display resolution.</span></span> <span data-ttu-id="54b4e-116">最も一般的なディスプレイの解像度が 96 ドット/インチ (DPI)、100% ディスプレイのスケーリングと等しい、これが 125%、150%、200% をサポートする高い解像度表示 (どのそれぞれ等しい 120、144 と 192 DPI) 上記のようになっていますより一般的です。</span><span class="sxs-lookup"><span data-stu-id="54b4e-116">The most common display resolution is 96 dots per inch (DPI), which equals 100% display scaling, but higher resolution displays supporting 125%, 150%, 200% (which respectively equal 120, 144 and 192 DPI) and above are becoming more common.</span></span> <span data-ttu-id="54b4e-117">調整なしだと、特にグラフィックスに基づくアプリケーションで、ある解像度のために設計されたものが、別の解像度で実行したときに、表示が大きすぎたり小さすぎたりします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-117">Without adjustment, an application, especially a graphics-based one, designed for one resolution will appear either too large or too small when run at another resolution.</span></span>

<span data-ttu-id="54b4e-118">自動スケーリングは、相対的なフォント サイズやディスプレイ解像度に従ってフォームと子コントロールを自動でサイズ変更することで、これらの問題を改善しようとしています。</span><span class="sxs-lookup"><span data-stu-id="54b4e-118">Automatic scaling seeks to ameliorate these problems by automatically resizing the form and its child controls according to the relative font size or display resolution.</span></span> <span data-ttu-id="54b4e-119">Windows オペレーティング システムは、ダイアログ単位と呼ばれるは、相対的な測定単位を使用して、ダイアログ ボックスの自動スケーリングをサポートします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-119">The Windows operating system supports automatic scaling of dialog boxes using a relative unit of measurement called dialog units.</span></span> <span data-ttu-id="54b4e-120">ダイアログ単位は、システム フォントに基づいており、ピクセルとの関係は、Win32 SDK 関数 `GetDialogBaseUnits` によって決定できます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-120">A dialog unit is based on the system font and its relationship to pixels can be determined though the Win32 SDK function `GetDialogBaseUnits`.</span></span> <span data-ttu-id="54b4e-121">ユーザーが Windows によって使用されるテーマを変更すると、すべてのダイアログ ボックスがそれに合わせて自動的に調整されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-121">When a user changes the theme used by Windows, all dialog boxes are automatically adjusted accordingly.</span></span> <span data-ttu-id="54b4e-122">さらに、[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]のいずれか、既定のシステム フォントまたはディスプレイの解像度に応じて、自動スケーリングをサポートします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-122">In addition, the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] supports automatic scaling either according to the default system font or the display resolution.</span></span> <span data-ttu-id="54b4e-123">必要に応じて、アプリケーションで自動スケーリングを無効化できます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-123">Optionally, automatic scaling can be disabled in an application.</span></span>

## <a name="original-support-for-automatic-scaling"></a><span data-ttu-id="54b4e-124">自動スケーリングの元のサポート</span><span class="sxs-lookup"><span data-stu-id="54b4e-124">Original support for automatic scaling</span></span>
<span data-ttu-id="54b4e-125">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] のバージョン 1.0 および 1.1 は、Windows の UI に使用される (Win32 SDK 値 **DEFAULT_GUI_FONT** で表す) 既定のフォントに依存した、簡単な方法で自動スケーリングをサポートしていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-125">Versions 1.0 and 1.1 of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] supported automatic scaling in a straightforward manner that was dependent on the Windows default font used for the UI, represented by the Win32 SDK value **DEFAULT_GUI_FONT**.</span></span> <span data-ttu-id="54b4e-126">このフォントは、通常、ディスプレイの解像度が変更されたときにのみ変更されました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-126">This font is typically only changed when the display resolution changes.</span></span> <span data-ttu-id="54b4e-127">自動スケーリングを実装するために、次のメカニズムが使用されていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-127">The following mechanism was used to implement automatic scaling:</span></span>

1. <span data-ttu-id="54b4e-128">デザイン時は、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> プロパティ (これは現在推奨されていません) が、開発者のマシンの既定のシステム フォントの高さと幅に設定されていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-128">At design time, the <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> property (which is now deprecated) was set to the height and width of the default system font on the developer's machine.</span></span>

2. <span data-ttu-id="54b4e-129">実行時は、ユーザーのマシンの既定のシステム フォントが <xref:System.Windows.Forms.Form> クラスの <xref:System.Windows.Forms.Control.Font%2A> プロパティを初期化するために使用されていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-129">At runtime, the default system font of the user's machine was used to initialize the <xref:System.Windows.Forms.Control.Font%2A> property of the <xref:System.Windows.Forms.Form> class.</span></span>

3. <span data-ttu-id="54b4e-130">フォームを表示する前に、フォームのスケーリングのため、<xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> メソッドが呼び出されました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-130">Before displaying the form, the <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> method was called to scale the form.</span></span> <span data-ttu-id="54b4e-131">このメソッドは、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> と <xref:System.Windows.Forms.Control.Font%2A> から相対スケール サイズを計算し、<xref:System.Windows.Forms.Control.Scale%2A> メソッドを呼び出してフォームとその子を実際にスケーリングしました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-131">This method calculated the relative scale sizes from <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> and <xref:System.Windows.Forms.Control.Font%2A> then called the <xref:System.Windows.Forms.Control.Scale%2A> method to actually scale the form and its children.</span></span>

4. <span data-ttu-id="54b4e-132"><xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> への後続の呼び出しがフォームを段階的にサイズ変更することがないよう、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> の値が更新されました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-132">The value of <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> was updated so that subsequent calls to <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A> did not progressively resize the form.</span></span>

<span data-ttu-id="54b4e-133">このメカニズムは、ほとんどの目的では十分ですが、次の制限がありました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-133">While this mechanism was sufficient for most purposes, it suffered from the following limitations:</span></span>

- <span data-ttu-id="54b4e-134">以降、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A>プロパティでは、ベースラインのフォント サイズを表す整数値として、丸め誤差が発生するフォームが複数の解像度を循環した場合に顕著に表れることです。</span><span class="sxs-lookup"><span data-stu-id="54b4e-134">Since the <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A> property represents the baseline font size as integer values, rounding errors occur that become evident when a form is cycled through multiple resolutions.</span></span>

- <span data-ttu-id="54b4e-135">自動スケーリングは <xref:System.Windows.Forms.Form> クラスでのみ実装されており、<xref:System.Windows.Forms.ContainerControl> クラスでは実装されていませんでした。</span><span class="sxs-lookup"><span data-stu-id="54b4e-135">Automatic scaling was implemented in only the <xref:System.Windows.Forms.Form> class, not in the <xref:System.Windows.Forms.ContainerControl> class.</span></span> <span data-ttu-id="54b4e-136">その結果、ユーザー コントロールは、それがフォームと同じ解像度で設計されていて、かつデザイン時にそのユーザー コントロールがそのフォームに配置された場合にのみ、正しくスケーリングされるということになっていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-136">As a result, user controls would scale correctly only when the user control was designed at the same resolution as the form, and it was placed in the form at design time.</span></span>

- <span data-ttu-id="54b4e-137">フォームとその子コントロールの設計作業を複数の開発者によって並行して進めることができたのは、マシンの解像度が同じ場合に限られていました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-137">Forms and their child controls could only be concurrently designed by multiple developers if their machine resolutions were the same.</span></span> <span data-ttu-id="54b4e-138">同じように、フォームの継承は、親フォームに関連付けられている解像度に依存していました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-138">Likewise it also made inheritance of a form dependent on the resolution associated with the parent form.</span></span>

> [!NOTE]
> <span data-ttu-id="54b4e-139">ディスプレイ Dpi、特に最新の 2-1 のデバイスでの極端な相違点とこれ可能性があります、.NET Framework と Visual Studio の最新のバージョンとします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-139">With the extreme differences in display DPIs, especially in modern 2-in-1 devices, this can still happen with the most current versions of the .NET Framework and Visual Studio.</span></span> <span data-ttu-id="54b4e-140">異なる DPI ディスプレイを使用して、チームでこの問題に対処をすることを確認してクトリ常には、DPI 対応でないモードでを起動して Windows フォーム デザイナーは、常に 96 DPI のレイアウトの計算のベースします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-140">To address this in a team using different DPI displays, make sure Visual Studio always starts in a non-DPI-aware mode, so the Windows Forms designer always bases the layout calculation on 96 DPI.</span></span> <span data-ttu-id="54b4e-141">このため、単に Visual Studio の HighDPI 認識を無効にするのには、次のレジストリ キーを設定します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-141">To this end, simply set the following registry key to disable Visual Studio's HighDPI awareness:</span></span>
>
> ```
> [HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\devenv.exe]
> "dpiAwareness"=dword:00000000
> ```

- <span data-ttu-id="54b4e-142"><xref:System.Windows.Forms.FlowLayoutPanel> や <xref:System.Windows.Forms.TableLayoutPanel> など、[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] バージョン 2.0 で導入された新しいレイアウト マネージャーと互換性がありません。</span><span class="sxs-lookup"><span data-stu-id="54b4e-142">It is not compatible with the newer layout managers introduced with the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0, such as <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel>.</span></span>

- <span data-ttu-id="54b4e-143">[!INCLUDE[compact](../../../includes/compact-md.md)] への互換性に必要なディスプレイの解像度に直接基づくスケーリングをサポートしていませんでした。</span><span class="sxs-lookup"><span data-stu-id="54b4e-143">It did not support scaling based directly on the display resolution that is required for compatibility to the [!INCLUDE[compact](../../../includes/compact-md.md)].</span></span>

<span data-ttu-id="54b4e-144">このメカニズムは、[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] バージョン 2.0 で後方互換性のために保持されますが、次に説明するより堅牢なスケーリング メカニズムによって置き換えられました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-144">Although this mechanism is preserved in the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 to maintain backward compatibility, it has been superseded by the more robust scaling mechanism described next.</span></span> <span data-ttu-id="54b4e-145">その結果、<xref:System.Windows.Forms.Form.AutoScale%2A>、<xref:System.Windows.Forms.Form.ApplyAutoScaling%2A>、<xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A>、および特定の <xref:System.Windows.Forms.Control.Scale%2A> のオーバーロードは廃止マークが付けられています。</span><span class="sxs-lookup"><span data-stu-id="54b4e-145">As a consequence, the <xref:System.Windows.Forms.Form.AutoScale%2A>, <xref:System.Windows.Forms.Form.ApplyAutoScaling%2A>, <xref:System.Windows.Forms.Form.AutoScaleBaseSize%2A>, and certain <xref:System.Windows.Forms.Control.Scale%2A> overloads are marked as obsolete.</span></span>

> [!NOTE]
> <span data-ttu-id="54b4e-146">従来のコードを [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] バージョン 2.0 にアップグレードする際、これらのメンバーへの参照を削除して問題ありません。</span><span class="sxs-lookup"><span data-stu-id="54b4e-146">You can safely delete references to these members when you upgrade your legacy code to the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0.</span></span>

## <a name="current-support-for-automatic-scaling"></a><span data-ttu-id="54b4e-147">自動スケーリングの現在のサポート</span><span class="sxs-lookup"><span data-stu-id="54b4e-147">Current support for automatic scaling</span></span>
<span data-ttu-id="54b4e-148">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] バージョン 2.0 は、Windows フォームの自動規スケーリングに次の変更を導入することで、以前の制限を解消しています。</span><span class="sxs-lookup"><span data-stu-id="54b4e-148">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] version 2.0 surmounts previous limitations by introducing the following changes to the automatic scaling of Windows Forms:</span></span>

- <span data-ttu-id="54b4e-149">スケーリングの基本サポートは <xref:System.Windows.Forms.ContainerControl> クラスに移動し、フォーム、ネイティブの複合コントロールおよびユーザー コントロールは、すべて統一されたスケーリングのサポートを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="54b4e-149">Base support for scaling has been moved to the <xref:System.Windows.Forms.ContainerControl> class so that forms, native composite controls and user controls all receive uniform scaling support.</span></span> <span data-ttu-id="54b4e-150">新しいメンバー <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A>、<xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>、<xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A>、および <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> が追加されました。</span><span class="sxs-lookup"><span data-stu-id="54b4e-150">The new members <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A>, <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>, <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> and <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> have been added.</span></span>

- <span data-ttu-id="54b4e-151"><xref:System.Windows.Forms.Control> クラスにも、スケーリングに参加して同じフォームでのスケーリングの混在をサポートできる新しいメンバーがいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="54b4e-151">The <xref:System.Windows.Forms.Control> class also has several new members that allow it to participate in scaling and to support mixed scaling on the same form.</span></span> <span data-ttu-id="54b4e-152">具体的には、<xref:System.Windows.Forms.Control.Scale%2A>、<xref:System.Windows.Forms.Control.ScaleChildren%2A>、および <xref:System.Windows.Forms.Control.GetScaledBounds%2A> メンバーが、スケーリングをサポートします。</span><span class="sxs-lookup"><span data-stu-id="54b4e-152">Specifically the <xref:System.Windows.Forms.Control.Scale%2A>, <xref:System.Windows.Forms.Control.ScaleChildren%2A>, and <xref:System.Windows.Forms.Control.GetScaledBounds%2A> members support scaling.</span></span>

- <span data-ttu-id="54b4e-153">画面の解像度に基づくスケーリングのサポートが追加され、<xref:System.Windows.Forms.AutoScaleMode> の列挙型により定義されるように、システム フォントのサポートを補完します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-153">Support for scaling based upon the screen resolution has been added to complement system font support, as defined by the <xref:System.Windows.Forms.AutoScaleMode> enumeration.</span></span> <span data-ttu-id="54b4e-154">このモードは、アプリケーションの移行を容易にする [!INCLUDE[compact](../../../includes/compact-md.md)] によりサポートされる、自動スケーリングと互換性があります。</span><span class="sxs-lookup"><span data-stu-id="54b4e-154">This mode is compatible with automatic scaling supported by the [!INCLUDE[compact](../../../includes/compact-md.md)] enabling easier application migration.</span></span>

- <span data-ttu-id="54b4e-155"><xref:System.Windows.Forms.FlowLayoutPanel> や <xref:System.Windows.Forms.TableLayoutPanel> などのレイアウト マネージャーの互換性が、自動スケーリングの実装に追加されています。</span><span class="sxs-lookup"><span data-stu-id="54b4e-155">Compatibility with layout managers such as <xref:System.Windows.Forms.FlowLayoutPanel> and <xref:System.Windows.Forms.TableLayoutPanel> has been added to the implementation of automatic scaling.</span></span>

- <span data-ttu-id="54b4e-156">スケール ファクターが、通常は <xref:System.Drawing.SizeF> 構造を使用する浮動小数点値として表され、エラーの丸めが事実上解決されています。</span><span class="sxs-lookup"><span data-stu-id="54b4e-156">Scaling factors are now represented as floating point values, typically using the <xref:System.Drawing.SizeF> structure, so that rounding errors have been practically eliminated.</span></span>

> [!CAUTION]
> <span data-ttu-id="54b4e-157">DPI とフォントのスケーリング モードの任意の混在はサポートされません。</span><span class="sxs-lookup"><span data-stu-id="54b4e-157">Arbitrary mixtures of DPI and font scaling modes are not supported.</span></span> <span data-ttu-id="54b4e-158">1 つのモード (DPI など) を使用してユーザー コントロールのスケールを調整し、別のモード (フォント) を使用してフォームに配置して問題が発生しない場合でも、基底フォームはあるモード、派生フォームは別のモードというように混在させると、予期しない結果が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="54b4e-158">Although you may scale a user control using one mode (for example, DPI) and place it on a form using another mode (Font) with no issues, but mixing a base form in one mode and a derived form in another can lead to unexpected results.</span></span>

### <a name="automatic-scaling-in-action"></a><span data-ttu-id="54b4e-159">自動スケーリングの動作</span><span class="sxs-lookup"><span data-stu-id="54b4e-159">Automatic scaling in action</span></span>
<span data-ttu-id="54b4e-160">Windows フォームは、次のロジックを使用して、フォームとそのコンテンツを自動的にスケール調整します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-160">Windows Forms now uses the following logic to automatically scale forms and their contents:</span></span>

1. <span data-ttu-id="54b4e-161">デザイン時に、各 <xref:System.Windows.Forms.ContainerControl> は <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> と <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> にそれぞれスケーリング モードと現在の解像度を記録します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-161">At design time, each <xref:System.Windows.Forms.ContainerControl> records the scaling mode and it current resolution in the <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> and <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>, respectively.</span></span>

2. <span data-ttu-id="54b4e-162">実行時に、実際の解像度は <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> プロパティに格納されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-162">At run time, the actual resolution is stored in the <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> property.</span></span> <span data-ttu-id="54b4e-163"><xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A> プロパティは、実行時と設計時のスケーリング解像度の比率を動的に計算します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-163">The <xref:System.Windows.Forms.ContainerControl.AutoScaleFactor%2A> property dynamically calculates the ratio between the run-time and design-time scaling resolution.</span></span>

3. <span data-ttu-id="54b4e-164">フォームが読み込まれたときに、<xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> と <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> の値が異なる場合は、<xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> メソッドが呼び出されてコントロールと子のスケールを調整します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-164">When the form loads, if the values of <xref:System.Windows.Forms.ContainerControl.CurrentAutoScaleDimensions%2A> and <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> are different, then the <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> method is called to scale the control and its children.</span></span> <span data-ttu-id="54b4e-165">このメソッドはレイアウトを中断し、<xref:System.Windows.Forms.Control.Scale%2A> メソッドを呼び出して実際のスケーリングを実行します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-165">This method suspends layout and calls the <xref:System.Windows.Forms.Control.Scale%2A> method to perform the actual scaling.</span></span> <span data-ttu-id="54b4e-166">その後、<xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> の値がプログレッシブ スケーリングを避けるために更新されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-166">Afterwards, the value of <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> is updated to avoid progressive scaling.</span></span>

4. <span data-ttu-id="54b4e-167">また、<xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> は次のような状況でも自動的に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-167"><xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A> is also automatically invoked in the following situations:</span></span>

    - <span data-ttu-id="54b4e-168">スケーリング モードが <xref:System.Windows.Forms.AutoScaleMode.Font> の場合の <xref:System.Windows.Forms.Control.OnFontChanged%2A> イベントへの応答。</span><span class="sxs-lookup"><span data-stu-id="54b4e-168">In response to the <xref:System.Windows.Forms.Control.OnFontChanged%2A> event if the scaling mode is <xref:System.Windows.Forms.AutoScaleMode.Font>.</span></span>
  
    - <span data-ttu-id="54b4e-169">コンテナー コントロールのレイアウトが再開され、<xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> プロパティまたは <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> プロパティで変更が検出されたとき。</span><span class="sxs-lookup"><span data-stu-id="54b4e-169">When the layout of the container control resumes and a change is detected in the <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A> or <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A> properties.</span></span>
  
    - <span data-ttu-id="54b4e-170">上記に示すように、親の <xref:System.Windows.Forms.ContainerControl> がスケーリングされたとき。</span><span class="sxs-lookup"><span data-stu-id="54b4e-170">As implied above, when a parent <xref:System.Windows.Forms.ContainerControl> is being scaled.</span></span> <span data-ttu-id="54b4e-171">各コンテナー コントロールは、親コンテナーからのスケーリング ファクターではなく、独自のスケーリング ファクターを使用してその子のスケーリングを担当します。</span><span class="sxs-lookup"><span data-stu-id="54b4e-171">Each container control is responsible for scaling its children using its own scaling factors and not the one from its parent container.</span></span>

5. <span data-ttu-id="54b4e-172">子コントロールは、いくつかの方法で、そのスケーリングの動作を変更できます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-172">Child controls can modify their scaling behavior through several means:</span></span>

    - <span data-ttu-id="54b4e-173"><xref:System.Windows.Forms.Control.ScaleChildren%2A> プロパティをオーバーライドして、子コントロールをスケーリングすべきかどうかを決定することができます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-173">The <xref:System.Windows.Forms.Control.ScaleChildren%2A> property can be overridden to determine if their child controls should be scaled or not.</span></span>

    - <span data-ttu-id="54b4e-174"><xref:System.Windows.Forms.Control.GetScaledBounds%2A> メソッドをオーバーライドして、スケーリングのロジックではなく、コントロールがスケーリングされる両機にを調整することができます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-174">The <xref:System.Windows.Forms.Control.GetScaledBounds%2A> method can be overridden to adjust the bounds that the control is scaled to, but not the scaling logic.</span></span>

    - <span data-ttu-id="54b4e-175"><xref:System.Windows.Forms.Control.ScaleControl%2A> メソッドをオーバーライドして、現在のコントロールのスケーリングのロジックを変更することができます。</span><span class="sxs-lookup"><span data-stu-id="54b4e-175">The <xref:System.Windows.Forms.Control.ScaleControl%2A> method can be overridden to change the scaling logic for the current control.</span></span>

## <a name="see-also"></a><span data-ttu-id="54b4e-176">関連項目</span><span class="sxs-lookup"><span data-stu-id="54b4e-176">See also</span></span>
 <xref:System.Windows.Forms.ContainerControl.AutoScaleMode%2A>  
 <xref:System.Windows.Forms.Control.Scale%2A>  
 <xref:System.Windows.Forms.ContainerControl.PerformAutoScale%2A>  
 <xref:System.Windows.Forms.ContainerControl.AutoScaleDimensions%2A>  
 [<span data-ttu-id="54b4e-177">visual スタイルが使用されているコントロールのレンダリング</span><span class="sxs-lookup"><span data-stu-id="54b4e-177">Rendering Controls with Visual Styles</span></span>](./controls/rendering-controls-with-visual-styles.md)  
 [<span data-ttu-id="54b4e-178">方法: 自動スケーリングを解除してパフォーマンスを向上させる</span><span class="sxs-lookup"><span data-stu-id="54b4e-178">How to: Improve Performance by Avoiding Automatic Scaling</span></span>](./advanced/how-to-improve-performance-by-avoiding-automatic-scaling.md)
