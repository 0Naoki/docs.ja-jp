---
title: "操作と慣性の概要"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: dd31b89b-eab6-45a1-8d0b-11e0eb84b234
caps.latest.revision: "7"
author: wadepickett
ms.author: wpickett
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: d6a0b8b62b997ab0dc7ff21375e82bda7e05d3c0
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="manipulations-and-inertia-overview"></a><span data-ttu-id="762ad-102">操作と慣性の概要</span><span class="sxs-lookup"><span data-stu-id="762ad-102">Manipulations and Inertia Overview</span></span>
<span data-ttu-id="762ad-103">"*操作*" では、"*マニピュレーター*" を使用して、ユーザー インターフェイス (UI) 要素の移動、回転、サイズ変更を行えます。</span><span class="sxs-lookup"><span data-stu-id="762ad-103">*Manipulations* enable users to move, rotate, and resize user interface (UI) elements by using *manipulators*.</span></span> <span data-ttu-id="762ad-104">マニピュレーターは、マウス、または (タッチ対応のシナリオの場合) スタイラスや指を意味します。</span><span class="sxs-lookup"><span data-stu-id="762ad-104">A manipulator represents a mouse or (in a touch-enabled scenario) a stylus or a finger.</span></span>  
  
 <span data-ttu-id="762ad-105">"*慣性*" は、要素上で摩擦力をシミュレートして、動いている UI 要素の実際の動作をエミュレートします。</span><span class="sxs-lookup"><span data-stu-id="762ad-105">*Inertia* emulates real-world behavior for UI elements that are in motion by simulating friction forces on the elements.</span></span> <span data-ttu-id="762ad-106">これにより、要素は (直線運動と角運動の両方で) 徐々に動作の速度を遅らせてから停止します。</span><span class="sxs-lookup"><span data-stu-id="762ad-106">This enables elements to gradually slow their movement (both linear and angular) before coming to a stop.</span></span> <span data-ttu-id="762ad-107">この記事では、.NET Framework の操作と慣性の概要を説明します。</span><span class="sxs-lookup"><span data-stu-id="762ad-107">This article provides an introduction to manipulations and inertia for the .NET Framework.</span></span>  
  
## <a name="manipulations"></a><span data-ttu-id="762ad-108">操作</span><span class="sxs-lookup"><span data-stu-id="762ad-108">Manipulations</span></span>  
 <span data-ttu-id="762ad-109">操作では、マニピュレーターのコレクションを複合オブジェクトとして扱います。</span><span class="sxs-lookup"><span data-stu-id="762ad-109">A manipulation treats a collection of manipulators as a composite object.</span></span> <span data-ttu-id="762ad-110">アプリケーションは、個々 のコンポーネントではなく複合オブジェクトへの変更を追跡できます。</span><span class="sxs-lookup"><span data-stu-id="762ad-110">An application can track the changes to the composite object instead of the individual components.</span></span>  
  
 <span data-ttu-id="762ad-111">次の図の画像を考えてください。</span><span class="sxs-lookup"><span data-stu-id="762ad-111">Consider the image in the following illustration.</span></span> <span data-ttu-id="762ad-112">ユーザーは 2 つのマニピュレーターを使用して、画像の移動、回転、拡大/縮小を行えます。</span><span class="sxs-lookup"><span data-stu-id="762ad-112">A user can use two manipulators to move, rotate, and scale the image.</span></span> <span data-ttu-id="762ad-113">各マニピュレーターへの変更は、他のマニピュレーターと一緒に解釈されます。</span><span class="sxs-lookup"><span data-stu-id="762ad-113">The changes to each manipulator are interpreted together with the other manipulators.</span></span>  
  
 <span data-ttu-id="762ad-114">たとえば、画像に 2 つのマニピュレーター (1 および 2) があり、マニピュレーター 1 を +Y 方向 (下) に移動する場合、画像への変更はマニピュレーター 2 で何が発生するかによって変わります。</span><span class="sxs-lookup"><span data-stu-id="762ad-114">For example, if you have two manipulators (1 and 2) on the image, and you move manipulator 1 in a +Y direction (down), the change to the image depends on what happens to manipulator 2.</span></span> <span data-ttu-id="762ad-115">マニピュレーター 2 も +Y 方向 (下) に移動する場合、画像は +Y 方向に移動します。</span><span class="sxs-lookup"><span data-stu-id="762ad-115">If manipulator 2 also moves in the +Y direction (down), the image simply moves in the +Y direction.</span></span> <span data-ttu-id="762ad-116">しかし、マニピュレーター 2 が変更しない場合、または -Y 方向 (上) に移動する場合は、画像は小さくなるか回転します。</span><span class="sxs-lookup"><span data-stu-id="762ad-116">But if manipulator 2 does not change, or it moves in a -Y direction (up), the image is made smaller or rotated.</span></span>  
  
 <span data-ttu-id="762ad-117">![2 本の指で操作中の仮想写真。](../../../docs/framework/common-client-technologies/media/manipulation-resize.png "Manipulation_Resize")</span><span class="sxs-lookup"><span data-stu-id="762ad-117">![A virtual photo that two fingers are manipulating.](../../../docs/framework/common-client-technologies/media/manipulation-resize.png "Manipulation_Resize")</span></span>  
  
 <span data-ttu-id="762ad-118">2 つのマニピュレーターによって操作されている画像</span><span class="sxs-lookup"><span data-stu-id="762ad-118">An image being manipulated by two manipulators</span></span>  
  
 <span data-ttu-id="762ad-119">操作の処理には、マニピュレーターのサブセットを監視し、個別にではなく一緒に動作するかのように解釈するフレームワークがあります。</span><span class="sxs-lookup"><span data-stu-id="762ad-119">Manipulation processing provides a framework that monitors a subset of manipulators and interprets them as if they are acting together, instead of independently.</span></span> <span data-ttu-id="762ad-120">複数の操作プロセッサのオブジェクトを同時に作成することができ、アプリケーションで UI 要素ごとに 1 つのオブジェクトが操作されます。</span><span class="sxs-lookup"><span data-stu-id="762ad-120">You can create several manipulation processor objects simultaneously, one for each UI element to be manipulated in an application.</span></span> <span data-ttu-id="762ad-121">操作プロセッサには、[.NET イベント](http://msdn.microsoft.com/library/17sde2xt.aspx)を通じて、どの入力デバイスを観察するかが通知され、それは操作を報告します。</span><span class="sxs-lookup"><span data-stu-id="762ad-121">A manipulation processor is informed of which input devices to observe and it reports manipulations through [.NET events](http://msdn.microsoft.com/library/17sde2xt.aspx).</span></span>  
  
 <span data-ttu-id="762ad-122">操作プロセッサには、操作する特定の要素に関する情報はありません。</span><span class="sxs-lookup"><span data-stu-id="762ad-122">A manipulation processor does not have information about the particular element that is being manipulated.</span></span> <span data-ttu-id="762ad-123">アプリケーションは、アプリケーション固有の要素への変更を個別に適用します。</span><span class="sxs-lookup"><span data-stu-id="762ad-123">An application separately applies the changes to an application-specific element.</span></span> <span data-ttu-id="762ad-124">たとえば、アプリケーションは画像に変換を適用したり、新しい場所に、または新しいサイズや向きに再描画して表示したりします。</span><span class="sxs-lookup"><span data-stu-id="762ad-124">For example, an application applies transformations to an image or redraws it to display it at its new location or with a new size or orientation.</span></span>  
  
 <span data-ttu-id="762ad-125">操作は 2 次元 (2-D) の[アフィン変換](http://msdn.microsoft.com/library/ms533810\(VS.85\).aspx)用に設計されています。</span><span class="sxs-lookup"><span data-stu-id="762ad-125">Manipulations are designed for two-dimensional (2-D) [affine transformations](http://msdn.microsoft.com/library/ms533810\(VS.85\).aspx).</span></span> <span data-ttu-id="762ad-126">アフィン変換には、変換、回転、拡大/縮小などがあります。</span><span class="sxs-lookup"><span data-stu-id="762ad-126">These transformations include translate, rotate, and scale.</span></span>  
  
### <a name="parts-of-a-manipulation"></a><span data-ttu-id="762ad-127">操作のパーツ</span><span class="sxs-lookup"><span data-stu-id="762ad-127">Parts of a Manipulation</span></span>  
 <span data-ttu-id="762ad-128">操作は、<xref:System.Windows.Input.Manipulations.Manipulator2D> オブジェクトのコレクションです。</span><span class="sxs-lookup"><span data-stu-id="762ad-128">A manipulation is a collection of <xref:System.Windows.Input.Manipulations.Manipulator2D> objects.</span></span> <span data-ttu-id="762ad-129">この集約的な操作は、最初の場所と楕円で表されます。</span><span class="sxs-lookup"><span data-stu-id="762ad-129">This aggregate manipulation is represented by an origin point and an ellipse.</span></span> <span data-ttu-id="762ad-130">最初の場所は、要素を操作しているすべてのマニピュレーターの平均位置です。</span><span class="sxs-lookup"><span data-stu-id="762ad-130">The origin point is the average position of all manipulators that are manipulating an element.</span></span> <span data-ttu-id="762ad-131">楕円は、始点から各 <xref:System.Windows.Input.Manipulations.Manipulator2D> オブジェクトまでの平均距離である半径です。</span><span class="sxs-lookup"><span data-stu-id="762ad-131">The ellipse has a radius that is the average distance from the origin to each of the <xref:System.Windows.Input.Manipulations.Manipulator2D> objects.</span></span>  
  
 <span data-ttu-id="762ad-132">![操作の一部。] (../../../docs/framework/common-client-technologies/media/manipulation-definition.png "Manipulation_Definition")</span><span class="sxs-lookup"><span data-stu-id="762ad-132">![The parts of a manipulation.](../../../docs/framework/common-client-technologies/media/manipulation-definition.png "Manipulation_Definition")</span></span>  
  
 <span data-ttu-id="762ad-133">2 つのマニピュレーター (1 と 2)、始点、および楕円によって操作を指定します。</span><span class="sxs-lookup"><span data-stu-id="762ad-133">Two manipulators (1 and 2), an origin, and an ellipse specify a manipulation</span></span>  
  
 <span data-ttu-id="762ad-134">マニピュレーターは UI 要素に対して追加、移動、または削除を行い、アプリケーションは <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> メソッドを呼び出して <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> オブジェクトを更新します。</span><span class="sxs-lookup"><span data-stu-id="762ad-134">As manipulators are added, moved, or removed for a UI element, an application updates the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> object by calling the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method.</span></span> <span data-ttu-id="762ad-135">最初に操作が開始するとき、 <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Started> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="762ad-135">When the manipulation first begins, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Started> event is raised.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="762ad-136">操作の処理は、フレームベースの環境の更新で使用すると、より効率的です。</span><span class="sxs-lookup"><span data-stu-id="762ad-136">Manipulation processing is more efficient when used in a frame-based update environment.</span></span> <span data-ttu-id="762ad-137">Microsoft XNA アプリケーションで操作の処理を使用する場合は問題ありません。これは、XNA フレームワークが [Game.Update](http://msdn.microsoft.com/library/microsoft.xna.framework.game.update.aspx) メソッドを使用してフレームベースの更新を行っているためです。</span><span class="sxs-lookup"><span data-stu-id="762ad-137">When using manipulation processing in a Microsoft XNA application, this is not a concern because the XNA framework provides frame-based updates using the [Game.Update](http://msdn.microsoft.com/library/microsoft.xna.framework.game.update.aspx) method.</span></span> <span data-ttu-id="762ad-138">別の環境 (WinForms など) では、操作を収集し、定期的にバッチとして <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> メソッドに送信するために、独自のフレームベースのロジックを用意する必要がある場合があります。</span><span class="sxs-lookup"><span data-stu-id="762ad-138">In another environment (such as WinForms), you might need to provide your own frame-based logic to collect manipulations and periodically send them to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method as a batch.</span></span>  
  
 <span data-ttu-id="762ad-139">マニピュレーターの数またはその場所が変化すると、<xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="762ad-139">As the number of manipulators or their position change, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> event is raised.</span></span> <span data-ttu-id="762ad-140"><xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> イベント ハンドラーに渡される <xref:System.Windows.Input.Manipulations.Manipulation2DDeltaEventArgs> オブジェクトのプロパティでは、始点、スケール、回転、および最後のイベント以降に発生した変換の変化を指定します。</span><span class="sxs-lookup"><span data-stu-id="762ad-140">Properties of the <xref:System.Windows.Input.Manipulations.Manipulation2DDeltaEventArgs> object that is passed to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Delta> event handler specify changes in origin, scale, rotation, and translation that have occurred since the last event.</span></span> <span data-ttu-id="762ad-141">マニピュレーターが移動したときや、マニピュレーターが追加または削除されたときには、操作の始点が変化します。</span><span class="sxs-lookup"><span data-stu-id="762ad-141">The origin of the manipulation changes when manipulators move, and when manipulators are added or removed.</span></span> <span data-ttu-id="762ad-142">変換値では、操作での X 方向および Y 方向の移動量を指定します。</span><span class="sxs-lookup"><span data-stu-id="762ad-142">Translation values specify how much X or Y movement the manipulation includes.</span></span>  
  
 <span data-ttu-id="762ad-143">新しい値を使用して、アプリケーションは UI 要素を再描画します。</span><span class="sxs-lookup"><span data-stu-id="762ad-143">Using the new values, an application redraws the UI element.</span></span>  
  
 <span data-ttu-id="762ad-144">![連絡先 A を右側に移動した後の操作。](../../../docs/framework/common-client-technologies/media/manipulation-changed.png "Manipulation_Changed")</span><span class="sxs-lookup"><span data-stu-id="762ad-144">![A manipulation after contact A moved to the right.](../../../docs/framework/common-client-technologies/media/manipulation-changed.png "Manipulation_Changed")</span></span>  
  
 <span data-ttu-id="762ad-145">マニピュレーター 1 が移動して始点を変化させる</span><span class="sxs-lookup"><span data-stu-id="762ad-145">Manipulator 1 moves and causes the origin to change</span></span>  
  
 <span data-ttu-id="762ad-146">操作に関連付けられている最後のマニピュレーターが <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> オブジェクトから削除されると、<xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> イベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="762ad-146">When the last manipulator that is associated with the manipulation is removed from the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D> object, the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> event is raised.</span></span>  
  
### <a name="the-manipulation-processing-model"></a><span data-ttu-id="762ad-147">操作の処理モデル</span><span class="sxs-lookup"><span data-stu-id="762ad-147">The Manipulation Processing Model</span></span>  
 <span data-ttu-id="762ad-148">操作プロセッサは、直接使用モデルを使用します。</span><span class="sxs-lookup"><span data-stu-id="762ad-148">A manipulation processor uses a direct-usage model.</span></span> <span data-ttu-id="762ad-149">この単純なモデルでは、アプリケーションは操作プロセッサに入力イベントの詳細を渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="762ad-149">With this simple model, an application must pass any input event details to the manipulation processor.</span></span> <span data-ttu-id="762ad-150">入力イベントは、マウス デバイス、スタイラス、指など、任意の入力プリミティブによって発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="762ad-150">An input event might be raised by any input primitive, such as a mouse device, a stylus, or a finger.</span></span> <span data-ttu-id="762ad-151">このプロセスでは、直接フィルター処理メカニズムと単純な使用モデルを提供しているため、アプリケーションは、必要なときに入力イベントをバッチ処理することができます。</span><span class="sxs-lookup"><span data-stu-id="762ad-151">This process provides a direct filtering mechanism and a simple usage model, so the application can batch input events when it is necessary.</span></span>  
  
 <span data-ttu-id="762ad-152">アプリケーションが操作の処理に入力プリミティブを含めるようにするには、入力プリミティブの内容から <xref:System.Windows.Input.Manipulations.Manipulator2D> 構造体を作成してから、<xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> メソッドを使用してその構造体を操作プロセッサに渡します。</span><span class="sxs-lookup"><span data-stu-id="762ad-152">For an application to include an input primitive in the manipulation process, it creates a <xref:System.Windows.Input.Manipulations.Manipulator2D> structure from the details of the input primitive, and passes the structure to the manipulation processor using the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.ProcessManipulators%2A> method.</span></span> <span data-ttu-id="762ad-153">操作プロセッサは、適切な方法でビジュアル コンポーネントを更新するためにアプリケーションが処理する必要のあるイベントを発生させます。</span><span class="sxs-lookup"><span data-stu-id="762ad-153">The manipulation processor then raises events, which the application must handle to update the visual component in an appropriate way.</span></span>  
  
 <span data-ttu-id="762ad-154">![直接使用モデルの操作フロー。](../../../docs/framework/common-client-technologies/media/manipulation-flow.png "Manipulation_Flow")</span><span class="sxs-lookup"><span data-stu-id="762ad-154">![The flow of the manipulations direct&#45;usage model.](../../../docs/framework/common-client-technologies/media/manipulation-flow.png "Manipulation_Flow")</span></span>  
  
 <span data-ttu-id="762ad-155">操作の処理モデル</span><span class="sxs-lookup"><span data-stu-id="762ad-155">The manipulation processing model</span></span>  
  
## <a name="inertia"></a><span data-ttu-id="762ad-156">慣性</span><span class="sxs-lookup"><span data-stu-id="762ad-156">Inertia</span></span>  
 <span data-ttu-id="762ad-157">慣性プロセッサを使用すると、アプリケーションは、実際の動作をシミュレートすることで、UI 要素の位置、向き、その他のプロパティを推定できます。</span><span class="sxs-lookup"><span data-stu-id="762ad-157">The inertia processor enables applications to extrapolate location, orientation, and other properties of a UI element by simulating real-world behavior.</span></span>  
  
 <span data-ttu-id="762ad-158">たとえば、ユーザーが要素をフリックすると、要素は引き続き動き、減速し、徐々に停止します。</span><span class="sxs-lookup"><span data-stu-id="762ad-158">For instance, when a user flicks an element, it can continue moving, decelerate, and then slowly stop.</span></span> <span data-ttu-id="762ad-159">慣性プロセッサは、2-D のアフィン値 (始点、スケール、変換、回転) を指定した減速率で指定した時間をかけて変化させることで、この動作を実行します。</span><span class="sxs-lookup"><span data-stu-id="762ad-159">The inertia processor implements this behavior by causing the affine 2-D values (origin, scale, translation, and rotation) to change over a specified time at a specified deceleration rate.</span></span>  
  
 <span data-ttu-id="762ad-160">操作の処理と同様、慣性プロセッサには、特定の UI 要素に関する情報はありません。</span><span class="sxs-lookup"><span data-stu-id="762ad-160">As with manipulation processing, an inertia processor does not have information about any particular UI element.</span></span> <span data-ttu-id="762ad-161"><xref:System.Windows.Input.Manipulations.InertiaProcessor2D> オブジェクトで発生するイベントに対応して、アプリケーションは、アプリケーション固有の要素への変更を個別に適用します。</span><span class="sxs-lookup"><span data-stu-id="762ad-161">In response to events that are raised on an <xref:System.Windows.Input.Manipulations.InertiaProcessor2D> object, an application separately applies the changes to an application-specific element.</span></span>  
  
 <span data-ttu-id="762ad-162">慣性の処理と操作の処理は、多くの場合、一緒に使用されます。</span><span class="sxs-lookup"><span data-stu-id="762ad-162">Inertia processing and manipulation processing are often used together.</span></span> <span data-ttu-id="762ad-163">これらのインターフェイスは類似しており、発生するイベントは (場合によって) 同一です。</span><span class="sxs-lookup"><span data-stu-id="762ad-163">Their interfaces are similar, and the events that they raise are (in some cases) identical.</span></span> <span data-ttu-id="762ad-164">一般に、UI 要素の操作が完了すると、慣性の処理が開始します。</span><span class="sxs-lookup"><span data-stu-id="762ad-164">Generally, inertia processing begins when the manipulation of the UI element is completed.</span></span> <span data-ttu-id="762ad-165">これは、<xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> イベントをリッスンして、そのイベント ハンドラーから慣性の処理を開始することで実現します。</span><span class="sxs-lookup"><span data-stu-id="762ad-165">This is accomplished by listening to the <xref:System.Windows.Input.Manipulations.ManipulationProcessor2D.Completed> event and starting the inertia processing from that event handler.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="762ad-166">参照</span><span class="sxs-lookup"><span data-stu-id="762ad-166">See Also</span></span>  
 <xref:System.Windows.Input.Manipulations>
