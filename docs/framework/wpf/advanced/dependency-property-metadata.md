---
title: "依存関係プロパティのメタデータ"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- APIs [WPF], metadata
- dependency properties [WPF], metadata
- metadata [WPF], for dependency properties
- overriding metadata [WPF]
ms.assetid: d01ed009-b722-41bf-b82f-fe1a8cdc50dd
caps.latest.revision: "24"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 5b5c4ee554e8a0148c7d8d8044735f66778e7117
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="dependency-property-metadata"></a><span data-ttu-id="2dff0-102">依存関係プロパティのメタデータ</span><span class="sxs-lookup"><span data-stu-id="2dff0-102">Dependency Property Metadata</span></span>
<span data-ttu-id="2dff0-103">[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] プロパティ システムには、リフレクションや一般的な [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] 特性から得られる以上の詳細なプロパティ情報を提供するメタデータ報告システムがあります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-103">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system includes a metadata reporting system that goes beyond what can be reported about a property through reflection or general [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] characteristics.</span></span> <span data-ttu-id="2dff0-104">依存関係プロパティのメタデータは、依存関係プロパティを定義するクラスで個別に割り当てることも、依存関係プロパティを別のクラスに追加する際に変更することもできます。また、依存関係プロパティをその定義元の基本クラスから継承するすべての派生クラスで明確にオーバーライドすることもできます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-104">Metadata for a dependency property can also be assigned uniquely by the class that defines a dependency property, can be changed when the dependency property is added to a different class, and can be specifically overridden by all derived classes that inherit the dependency property from the defining base class.</span></span>  
  
 
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="2dff0-105">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="2dff0-105">Prerequisites</span></span>  
 <span data-ttu-id="2dff0-106">このトピックでは、ユーザーが [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] クラスの既存の依存関係プロパティの使用という観点から依存関係プロパティを理解し、「[依存関係プロパティの概要](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)」トピックを通読していることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="2dff0-106">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span> <span data-ttu-id="2dff0-107">このトピックの例を理解するには、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] について理解し、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] アプリケーションの作成方法に精通している必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-107">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="dp_metadata_contents"></a>   
## <a name="how-dependency-property-metadata-is-used"></a><span data-ttu-id="2dff0-108">依存関係プロパティのメタデータの使用方法</span><span class="sxs-lookup"><span data-stu-id="2dff0-108">How Dependency Property Metadata is Used</span></span>  
 <span data-ttu-id="2dff0-109">依存関係プロパティのメタデータは、依存プロパティの特性を照会して調べるためのオブジェクトとして存在します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-109">Dependency property metadata exists as an object that can be queried to examine the characteristics of a dependency property.</span></span> <span data-ttu-id="2dff0-110">また、このメタデータは、特定の依存関係プロパティを処理するために、プロパティ システムによって頻繁にアクセスされます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-110">This metadata is also accessed frequently by the property system as it processes any given dependency property.</span></span> <span data-ttu-id="2dff0-111">依存関係プロパティのメタデータ オブジェクトには、次のような情報が格納されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-111">The metadata object for a dependency property can contain the following types of information:</span></span>  
  
-   <span data-ttu-id="2dff0-112">依存関係プロパティの既定値 (ローカル値、スタイル、継承などによってその他の依存関係プロパティ値が指定されない場合)。依存関係プロパティの値を割り当てる際の、既定値と、プロパティ システムで使用される優先順位の関係に関する詳細な説明については、「[依存関係プロパティ値の優先順位](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-112">Default value for the dependency property, if no other value can be determined for the dependency property by local value, style, inheritance, etc. For a thorough discussion of how default values participate in the precedence used by the property system when assigning values for dependency properties, see [Dependency Property Value Precedence](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md).</span></span>  
  
-   <span data-ttu-id="2dff0-113">所有者型に基づく強制型変換または変更通知の動作に影響を与えるコールバック実装への参照。</span><span class="sxs-lookup"><span data-stu-id="2dff0-113">References to callback implementations that affect coercion or change-notification behaviors on a per-owner-type basis.</span></span> <span data-ttu-id="2dff0-114">多くの場合、これらのコールバックは非パブリックなアクセス レベルで定義されます。したがって、参照が、許可されたアクセス スコープ内にない限り、一般にメタデータから実際の参照を取得することはできません。</span><span class="sxs-lookup"><span data-stu-id="2dff0-114">Note that these callbacks are often defined with a nonpublic access level, so obtaining the actual references from metadata is generally not possible unless the references are within your permitted access scope.</span></span> <span data-ttu-id="2dff0-115">依存関係プロパティのコールバックの詳細については、「[依存関係プロパティのコールバックと検証](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-115">For more information on dependency property callbacks, see [Dependency Property Callbacks and Validation](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md).</span></span>  
  
-   <span data-ttu-id="2dff0-116">対象の依存関係プロパティが WPF フレームワーク レベルのプロパティと見なされる場合、WPF フレームワーク レベルの依存関係プロパティ特性がメタデータに含まれる可能性があります。これは、WPF フレームワーク レベルのレイアウト エンジンやプロパティ継承ロジックなどのサービスの情報および状態を報告します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-116">If the dependency property in question is considered to be a WPF framework-level property, the metadata might contain WPF framework-level dependency property characteristics, which report information and state for services such as the WPF framework-level layout engine and property inheritance logic.</span></span> <span data-ttu-id="2dff0-117">この内容に関する依存関係プロパティのメタデータの詳細については、「[フレームワーク プロパティ メタデータ](../../../../docs/framework/wpf/advanced/framework-property-metadata.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-117">For more information on this aspect of dependency property metadata, see [Framework Property Metadata](../../../../docs/framework/wpf/advanced/framework-property-metadata.md).</span></span>  
  
<a name="APIs"></a>   
## <a name="metadata-apis"></a><span data-ttu-id="2dff0-118">メタデータ API</span><span class="sxs-lookup"><span data-stu-id="2dff0-118">Metadata APIs</span></span>  
 <span data-ttu-id="2dff0-119">ほとんどのプロパティのシステムで使用されるメタデータ情報を報告する型が、<xref:System.Windows.PropertyMetadata>クラスです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-119">The type that reports most of the metadata information used by the property system is the <xref:System.Windows.PropertyMetadata> class.</span></span> <span data-ttu-id="2dff0-120">メタデータ インスタンスは、依存関係プロパティをプロパティ システムに登録する際に必要に応じて指定されます。それ自体を所有者として追加する追加の型、または基本クラスの依存関係プロパティ定義から継承したメタデータをオーバーライドする追加の型に再度指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-120">Metadata instances are optionally specified when dependency properties are registered with the property system, and can be specified again for additional types that either add themselves as owners or override metadata they inherit from the base class dependency property definition.</span></span> <span data-ttu-id="2dff0-121">(プロパティの登録がメタデータを既定値を指定しない場合の<xref:System.Windows.PropertyMetadata>がそのクラスの既定値で作成します)。として登録されているメタデータが返される<xref:System.Windows.PropertyMetadata>を呼び出すと、さまざまな<xref:System.Windows.DependencyProperty.GetMetadata%2A>で依存関係プロパティのメタデータを取得するオーバー ロード、<xref:System.Windows.DependencyObject>インスタンス。</span><span class="sxs-lookup"><span data-stu-id="2dff0-121">(For cases where a property registration does not specify metadata, a default <xref:System.Windows.PropertyMetadata> is created with default values for that class.)The registered metadata is returned as <xref:System.Windows.PropertyMetadata> when you call the various <xref:System.Windows.DependencyProperty.GetMetadata%2A> overloads that get metadata from a dependency property on a <xref:System.Windows.DependencyObject> instance.</span></span>  
  
 <span data-ttu-id="2dff0-122"><xref:System.Windows.PropertyMetadata>アーキテクチャ部門 WPF フレームワーク レベルのクラスなどのより詳細なメタデータを提供する、クラスはから導き出されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-122">The <xref:System.Windows.PropertyMetadata> class is then derived from to provide more specific metadata for architectural divisions such as the WPF framework-level classes.</span></span> <span data-ttu-id="2dff0-123"><xref:System.Windows.UIPropertyMetadata>アニメーションがレポートを追加し、<xref:System.Windows.FrameworkPropertyMetadata>前のセクションに記載されている WPF フレームワーク レベルのプロパティを提供します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-123"><xref:System.Windows.UIPropertyMetadata> adds animation reporting, and <xref:System.Windows.FrameworkPropertyMetadata> provides the WPF framework-level properties mentioned in the previous section.</span></span> <span data-ttu-id="2dff0-124">依存関係プロパティが登録されると、これらを登録できます<xref:System.Windows.PropertyMetadata>クラスを派生します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-124">When dependency properties are registered, they can be registered with these <xref:System.Windows.PropertyMetadata> derived classes.</span></span> <span data-ttu-id="2dff0-125">メタデータを調べるときに、基本<xref:System.Windows.PropertyMetadata>より特定のプロパティを確認するように、型を派生クラスにキャスト可能性があることができます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-125">When the metadata is examined, the base <xref:System.Windows.PropertyMetadata> type can potentially be cast to the derived classes so that you can examine the more specific properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2dff0-126">指定できるプロパティの特性<xref:System.Windows.FrameworkPropertyMetadata>"flags"としては、このドキュメントで呼ばします。</span><span class="sxs-lookup"><span data-stu-id="2dff0-126">The property characteristics that can be specified in <xref:System.Windows.FrameworkPropertyMetadata> are sometimes referred to in this documentation as "flags".</span></span> <span data-ttu-id="2dff0-127">フラグの列挙を使用してこれらの値を指定した依存関係プロパティの登録で使用するための新しいメタデータ インスタンスに作成するか、メタデータ オーバーライド、 <xref:System.Windows.FrameworkPropertyMetadataOptions> に列挙型の可能性のある連結された値を指定し、<xref:System.Windows.FrameworkPropertyMetadata>コンス トラクターです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-127">When you create new metadata instances for use in dependency property registrations or metadata overrides, you specify these values using the flagwise enumeration <xref:System.Windows.FrameworkPropertyMetadataOptions> and then you supply possibly concatenated values of the enumeration to the <xref:System.Windows.FrameworkPropertyMetadata> constructor.</span></span> <span data-ttu-id="2dff0-128">ただし、これを構築すると、これらのオプションの特性が内で公開された、<xref:System.Windows.FrameworkPropertyMetadata>として一連の構築の列挙値ではなくブール型プロパティです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-128">However, once constructed, these option characteristics are exposed within a <xref:System.Windows.FrameworkPropertyMetadata> as a series of Boolean properties rather than the constructing enumeration value.</span></span> <span data-ttu-id="2dff0-129">これらのブール型プロパティを使用すると、目的の情報を取得するためにフラグ列挙値に対してマスクを適用することなく、各条件をチェックすることができます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-129">The Boolean properties enable you to check each conditional, rather than requiring you to apply a mask to a flagwise enumeration value to get the information you are interested in.</span></span> <span data-ttu-id="2dff0-130">コンス トラクターを使用して連結された<xref:System.Windows.FrameworkPropertyMetadataOptions>コンス トラクター シグネチャの長さを実際の構築されたメタデータ プロパティを公開します不連続より直観的なメタデータをクエリするために対し、適切で保持するためにします。</span><span class="sxs-lookup"><span data-stu-id="2dff0-130">The constructor uses the concatenated <xref:System.Windows.FrameworkPropertyMetadataOptions> in order to keep the length of the constructor signature reasonable, whereas the actual constructed metadata exposes the discrete properties to make querying the metadata more intuitive.</span></span>  
  
<a name="override_or_subclass"></a>   
## <a name="when-to-override-metadata-when-to-derive-a-class"></a><span data-ttu-id="2dff0-131">メタデータをオーバーライドする場合、クラスを派生する場合</span><span class="sxs-lookup"><span data-stu-id="2dff0-131">When to Override Metadata, When to Derive a Class</span></span>  
 <span data-ttu-id="2dff0-132">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] プロパティ システムには、依存関係プロパティを完全に再実装することなく、依存関係プロパティの一部の特性を変更するための機能が用意されています。</span><span class="sxs-lookup"><span data-stu-id="2dff0-132">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system has established capabilities for changing some characteristics of dependency properties without requiring them to be entirely re-implemented.</span></span> <span data-ttu-id="2dff0-133">これは、特定の型に存在する依存関係プロパティについて、そのプロパティ メタデータの別のインスタンスを構築することで実現されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-133">This is accomplished by constructing a different instance of property metadata for the dependency property as it exists on a particular type.</span></span> <span data-ttu-id="2dff0-134">既存の依存関係プロパティの大部分は仮想プロパティではありません。したがって、厳密には、継承クラスでの依存関係プロパティの "再実装" は、既存のメンバーをシャドウすることによってのみ実現されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-134">Note that most existing dependency properties are not virtual properties, so strictly speaking "re-implementing" them on inherited classes could only be accomplished by shadowing the existing member.</span></span>  
  
 <span data-ttu-id="2dff0-135">型の依存関係プロパティに対して有効にしようとしているシナリオが、既存の依存関係プロパティの特性の変更では実現できない場合、派生クラスを作成し、その派生クラスでカスタム依存関係プロパティを宣言することが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-135">If the scenario you are trying to enable for a dependency property on a type cannot be accomplished by modifying characteristics of existing dependency properties, it might then be necessary to create a derived class, and then to declare a custom dependency property on your derived class.</span></span> <span data-ttu-id="2dff0-136">カスタム依存関係プロパティは、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] で定義されている依存関係プロパティとまったく同じように動作します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-136">A custom dependency property behaves identically to dependency properties defined by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)].</span></span> <span data-ttu-id="2dff0-137">カスタム依存関係プロパティの詳細については、「[カスタム依存関係プロパティ](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-137">For more details about custom dependency properties, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span>  
  
 <span data-ttu-id="2dff0-138">オーバーライドすることができない依存関係プロパティの代表的な特性の 1 つは、依存関係プロパティの値型です。</span><span class="sxs-lookup"><span data-stu-id="2dff0-138">One notable characteristic of a dependency property that you cannot override is its value type.</span></span> <span data-ttu-id="2dff0-139">目的の動作にほぼ合致する依存関係プロパティを継承していても、その依存関係プロパティに別の型が必要な場合には、カスタム依存関係プロパティを実装し、型変換またはカスタム クラスのその他の実装を通じてプロパティをリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-139">If you are inheriting a dependency property that has the approximate behavior you require, but you require a different type for it, you will have to implement a custom dependency property and perhaps link the properties through type conversion or other implementation on your custom class.</span></span> <span data-ttu-id="2dff0-140">またを置き換えることはできません、既存<xref:System.Windows.ValidateValueCallback>登録フィールド自体では、メタデータ内ではなく、このコールバックが存在するため、します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-140">Also, you cannot replace an existing <xref:System.Windows.ValidateValueCallback>, because this callback exists in the registration field itself and not within its metadata.</span></span>  
  
<a name="scenarios"></a>   
## <a name="scenarios-for-changing-existing-metadata"></a><span data-ttu-id="2dff0-141">既存のメタデータを変更するシナリオ</span><span class="sxs-lookup"><span data-stu-id="2dff0-141">Scenarios for Changing Existing Metadata</span></span>  
 <span data-ttu-id="2dff0-142">既存の依存関係プロパティのメタデータを使用している場合、依存関係プロパティのメタデータを変更する一般的なシナリオの 1 つは、既定値を変更することです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-142">If you are working with metadata of an existing dependency property, one common scenario for changing dependency property metadata is to change the default value.</span></span> <span data-ttu-id="2dff0-143">プロパティ システム コールバックの変更または追加は、より高度なシナリオです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-143">Changing or adding property system callbacks is a more advanced scenario.</span></span> <span data-ttu-id="2dff0-144">これは、実装している派生クラスの相互関係が依存関係プロパティごとに異なる場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-144">You might want to do this if your implementation of a derived class has different interrelationships between dependency properties.</span></span> <span data-ttu-id="2dff0-145">コードと宣言的な使用方法の両方をサポートするプログラミング モデルを使用する条件の 1 つとして、プロパティを任意の順序で設定できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-145">One of the conditionals of having a programming model that supports both code and declarative usage is that properties must enable being set in any order.</span></span> <span data-ttu-id="2dff0-146">したがって、依存関係プロパティはすべて、コンテキストを使用せずに Just-In-Time で設定する必要があります。また、設定順序 (コンストラクター内の順序など) に依存することもできません。</span><span class="sxs-lookup"><span data-stu-id="2dff0-146">Thus any dependent properties need to be set just-in-time without context and cannot rely on knowing a setting order such as might be found in a constructor.</span></span> <span data-ttu-id="2dff0-147">この内容に関するプロパティ システムの詳細については、「[依存関係プロパティのコールバックと検証](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-147">For more information on this aspect of the property system, see [Dependency Property Callbacks and Validation](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md).</span></span> <span data-ttu-id="2dff0-148">検証コールバックは、メタデータの一部ではなく、依存関係プロパティ識別子の一部であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-148">Note that validation callbacks are not part of the metadata; they are part of the dependency property identifier.</span></span> <span data-ttu-id="2dff0-149">したがって、検証コールバックは、メタデータのオーバーライドでは変更できません。</span><span class="sxs-lookup"><span data-stu-id="2dff0-149">Therefore, validation callbacks cannot be changed by overriding the metadata.</span></span>  
  
 <span data-ttu-id="2dff0-150">既存の依存関係プロパティに対して、WPF フレームワーク レベルのプロパティのメタデータ オプションの変更が必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-150">In some cases you might also want to alter the WPF framework-level property metadata options on existing dependency properties.</span></span> <span data-ttu-id="2dff0-151">これらのオプションは、WPF フレームワーク レベルのプロパティに関する特定の既知の条件を、レイアウト システムなどの他の WPF フレームワーク レベルのプロセスに伝達します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-151">These options communicate certain known conditionals about WPF framework-level properties to other WPF framework-level processes such as the layout system.</span></span>  <span data-ttu-id="2dff0-152">新しい依存関係プロパティを登録する場合にのみ、通常実行はオプションの設定がの一部として、WPF フレームワーク レベルのプロパティ メタデータを変更することも、<xref:System.Windows.DependencyProperty.OverrideMetadata%2A>または<xref:System.Windows.DependencyProperty.AddOwner%2A>呼び出します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-152">Setting the options is generally done only when registering a new dependency property, but it is also possible to change the WPF framework-level property metadata as part of a <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> or <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="2dff0-153">使用する具体的な値および詳細については、「[フレームワーク プロパティ メタデータ](../../../../docs/framework/wpf/advanced/framework-property-metadata.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-153">For the specific values to use and more information, see [Framework Property Metadata](../../../../docs/framework/wpf/advanced/framework-property-metadata.md).</span></span> <span data-ttu-id="2dff0-154">新しく登録した依存関係プロパティに対してこれらのオプションを設定する方法の詳細については、「[カスタム依存関係プロパティ](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-154">For more information that is pertinent to how these options should be set for a newly registered dependency property, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span>  
  
<a name="dp_override_metadata"></a>   
### <a name="overriding-metadata"></a><span data-ttu-id="2dff0-155">メタデータのオーバーライド</span><span class="sxs-lookup"><span data-stu-id="2dff0-155">Overriding Metadata</span></span>  
 <span data-ttu-id="2dff0-156">メタデータのオーバーライドの主な目的は、型に存在する依存関係プロパティに適用される、メタデータから派生したさまざまな動作を変更できるようにすることです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-156">The purpose of overriding metadata is primarily so that you have the opportunity to change the various metadata-derived behaviors that are applied to the dependency property as it exists on your type.</span></span> <span data-ttu-id="2dff0-157">この理由については、「[メタデータ](#dp_metadata_contents)」セクションで詳しく説明します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-157">The reasons for this are explained in more detail in the [Metadata](#dp_metadata_contents) section.</span></span> <span data-ttu-id="2dff0-158">コード例を含む詳細については、「[方法 : 依存関係プロパティのメタデータをオーバーライドする](../../../../docs/framework/wpf/advanced/how-to-override-metadata-for-a-dependency-property.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-158">For more information including some code examples, see [Override Metadata for a Dependency Property](../../../../docs/framework/wpf/advanced/how-to-override-metadata-for-a-dependency-property.md).</span></span>  
  
 <span data-ttu-id="2dff0-159">登録の呼び出し中に、依存関係プロパティのプロパティのメタデータを指定することができます (<xref:System.Windows.DependencyProperty.Register%2A>)。</span><span class="sxs-lookup"><span data-stu-id="2dff0-159">Property metadata can be supplied for a dependency property during the registration call (<xref:System.Windows.DependencyProperty.Register%2A>).</span></span> <span data-ttu-id="2dff0-160">ただし、多くの場合、その依存関係プロパティを継承するクラスに対して、型固有のメタデータを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-160">However, in many cases, you might want to provide type-specific metadata for your class when it inherits that dependency property.</span></span> <span data-ttu-id="2dff0-161">呼び出すことによってこれを行う、<xref:System.Windows.DependencyProperty.OverrideMetadata%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-161">You can do this by calling the <xref:System.Windows.DependencyProperty.OverrideMetadata%2A> method.</span></span>  <span data-ttu-id="2dff0-162">例については、 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]、<xref:System.Windows.FrameworkElement>クラスは、最初に登録する型、<xref:System.Windows.UIElement.Focusable%2A>依存関係プロパティです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-162">For an example from the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], the <xref:System.Windows.FrameworkElement> class is the type that first registers the <xref:System.Windows.UIElement.Focusable%2A> dependency property.</span></span> <span data-ttu-id="2dff0-163"><xref:System.Windows.Controls.Control>クラスからそれを変更する、独自の既定の初期値を指定する依存関係プロパティのメタデータをオーバーライドする`false`に`true`、それ以外の場合、元に再使用と<xref:System.Windows.UIElement.Focusable%2A>実装します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-163">But the <xref:System.Windows.Controls.Control> class overrides metadata for the dependency property to provide its own initial default value, changing it from `false` to `true`, and otherwise re-uses the original <xref:System.Windows.UIElement.Focusable%2A> implementation.</span></span>  
  
 <span data-ttu-id="2dff0-164">メタデータをオーバーライドすると、さまざまなメタデータ特性がマージされるか置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-164">When you override metadata, the different metadata characteristics are either merged or replaced.</span></span>  
  
-   <span data-ttu-id="2dff0-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>マージされています。</span><span class="sxs-lookup"><span data-stu-id="2dff0-165"><xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is merged.</span></span> <span data-ttu-id="2dff0-166">新しく追加した場合<xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>、そのコールバックがメタデータに格納します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-166">If you add a new <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="2dff0-167">指定しない場合、<xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>の値よりも優先的に<xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>がメタデータに指定する、最も近い先祖から参照として昇格します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-167">If you do not specify a <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="2dff0-168">実際のプロパティのシステム動作<xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A>は、階層内のすべてのメタデータ所有者の実装が保持され、テーブルに追加、プロパティのシステムでの実行の順序としていること、最派生クラスのコールバックが最初に呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-168">The actual property system behavior for <xref:System.Windows.PropertyMetadata.PropertyChangedCallback%2A> is that implementations for all metadata owners in the hierarchy are retained and added to a table, with order of execution by the property system being that the most derived class's callbacks are invoked first.</span></span>  
  
-   <span data-ttu-id="2dff0-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A>置換されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-169"><xref:System.Windows.PropertyMetadata.DefaultValue%2A> is replaced.</span></span> <span data-ttu-id="2dff0-170">指定しない場合、<xref:System.Windows.PropertyMetadata.DefaultValue%2A>の値よりも優先的に<xref:System.Windows.PropertyMetadata.DefaultValue%2A>はメタデータに指定する、最も近い先祖から取得します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-170">If you do not specify a <xref:System.Windows.PropertyMetadata.DefaultValue%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.DefaultValue%2A> comes from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="2dff0-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>実装は置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-171"><xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations are replaced.</span></span> <span data-ttu-id="2dff0-172">新しく追加した場合<xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>、そのコールバックがメタデータに格納します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-172">If you add a new <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>, that callback is stored in the metadata.</span></span> <span data-ttu-id="2dff0-173">指定しない場合、<xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>の値よりも優先的に<xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>がメタデータに指定する、最も近い先祖から参照として昇格します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-173">If you do not specify a <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the override, the value of <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> is promoted as a reference from the nearest ancestor that specified it in metadata.</span></span>  
  
-   <span data-ttu-id="2dff0-174">プロパティのシステム動作はのみですが、<xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>即時のメタデータでが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-174">The property system behavior is that only the <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> in the immediate metadata is invoked.</span></span> <span data-ttu-id="2dff0-175">他の参照がありません<xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A>階層内の実装が保持されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-175">No references to other <xref:System.Windows.PropertyMetadata.CoerceValueCallback%2A> implementations in the hierarchy are retained.</span></span>  
  
 <span data-ttu-id="2dff0-176">この動作はによって実装<xref:System.Windows.PropertyMetadata.Merge%2A>、およびメタデータの派生クラスでオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-176">This behavior is implemented by <xref:System.Windows.PropertyMetadata.Merge%2A>, and can be overridden on derived metadata classes.</span></span>  
  
#### <a name="overriding-attached-property-metadata"></a><span data-ttu-id="2dff0-177">添付プロパティのメタデータのオーバーライド</span><span class="sxs-lookup"><span data-stu-id="2dff0-177">Overriding Attached Property Metadata</span></span>  
 <span data-ttu-id="2dff0-178">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] では、添付プロパティは依存関係プロパティとして実装されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-178">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], attached properties are implemented as dependency properties.</span></span> <span data-ttu-id="2dff0-179">このことは、添付プロパティもプロパティ メタデータを持ち、これを個々のクラスでオーバーライドできることを意味します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-179">This means that they also have property metadata, which individual classes can override.</span></span> <span data-ttu-id="2dff0-180">内の添付プロパティのスコープに関する考慮事項[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]は通常を<xref:System.Windows.DependencyObject>添付プロパティが設定を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-180">The scoping considerations for an attached property in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are generally that any <xref:System.Windows.DependencyObject> can have an attached property set on them.</span></span> <span data-ttu-id="2dff0-181">そのため、いずれか<xref:System.Windows.DependencyObject>ように、クラスのインスタンスに設定する必要があります、派生クラスは、添付プロパティのメタデータをオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-181">Therefore, any <xref:System.Windows.DependencyObject> derived class can override the metadata for any attached property, as it might be set on an instance of the class.</span></span> <span data-ttu-id="2dff0-182">オーバーライドできるのは、既定値、コールバック、または WPF フレームワーク レベルの特性報告プロパティです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-182">You can override default values, callbacks, or WPF framework-level characteristic-reporting properties.</span></span> <span data-ttu-id="2dff0-183">添付プロパティがクラスのインスタンスで設定されている場合、そのオーバーライド プロパティ メタデータ特性が適用されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-183">If the attached property is set on an instance of your class, those override property metadata characteristics apply.</span></span> <span data-ttu-id="2dff0-184">たとえば、プロパティが他では特に指定されていないときには、オーバーライド値がクラスのインスタンス上の添付プロパティの値として報告されるように、既定値をオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-184">For instance, you can override the default value, such that your override value is reported as the value of the attached property on instances of your class, whenever the property is not otherwise set.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2dff0-185"><xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A>添付プロパティのプロパティは無効です。</span><span class="sxs-lookup"><span data-stu-id="2dff0-185">The <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> property is not relevant for attached properties.</span></span>  
  
<a name="dp_add_owner"></a>   
### <a name="adding-a-class-as-an-owner-of-an-existing-dependency-property"></a><span data-ttu-id="2dff0-186">既存の依存関係プロパティの所有者としてのクラスの追加</span><span class="sxs-lookup"><span data-stu-id="2dff0-186">Adding a Class as an Owner of an Existing Dependency Property</span></span>  
 <span data-ttu-id="2dff0-187">クラスを使用して、既に登録されている依存関係プロパティの所有者として追加できます、<xref:System.Windows.DependencyProperty.AddOwner%2A>メソッドです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-187">A class can add itself as an owner of a dependency property that has already been registered, by using the <xref:System.Windows.DependencyProperty.AddOwner%2A> method.</span></span> <span data-ttu-id="2dff0-188">これにより、当初は別の型に対して登録された依存関係プロパティをクラスで使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-188">This enables the class to use a dependency property that was originally registered for a different type.</span></span> <span data-ttu-id="2dff0-189">通常、追加するクラスは、所有者としてその依存関係プロパティを最初に登録した型の派生クラスではありません。</span><span class="sxs-lookup"><span data-stu-id="2dff0-189">The adding class is typically not a derived class of the type that first registered that dependency property as owner.</span></span> <span data-ttu-id="2dff0-190">これにより、元の所有者クラスと追加するクラスが同一のクラス階層内にない場合でも、クラスとその派生クラスで依存関係プロパティの実装を "継承" することが事実上可能になります。</span><span class="sxs-lookup"><span data-stu-id="2dff0-190">Effectively, this allows your class and its derived classes to "inherit" a dependency property implementation without the original owner class and the adding class being in the same true class hierarchy.</span></span> <span data-ttu-id="2dff0-191">また、追加するクラスとすべての派生クラスでは、型固有のメタデータを元の依存関係プロパティに提供することができます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-191">In addition, the adding class (and all derived classes as well) can then provide type-specific metadata for the original dependency property.</span></span>  
  
 <span data-ttu-id="2dff0-192">追加するクラスは、プロパティ システムのユーティリティ メソッドを介してそれ自体を所有者として追加するだけでなく、追加のパブリック メンバーをそれ自体で宣言する必要があります。これは、依存関係プロパティを完全な形でプロパティ システムに登録し、コードとマークアップの両方に対して公開するためです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-192">As well as adding itself as owner through the property system utility methods, the adding class should declare additional public members on itself in order to make the dependency property] a full participant in the property system with exposure to both code and markup.</span></span> <span data-ttu-id="2dff0-193">既存の依存関係プロパティを追加するクラスは、その依存関係プロパティのオブジェクト モデルを公開する限り、新しいカスタム依存関係プロパティを定義するクラスと同様の役割を負います。</span><span class="sxs-lookup"><span data-stu-id="2dff0-193">A class that adds an existing dependency property has the same responsibilities as far as exposing the object model for that dependency property as does a class that defines a new custom dependency property.</span></span> <span data-ttu-id="2dff0-194">これらのメンバーの中で最初に公開するのは、依存関係プロパティの識別子フィールドです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-194">The first such member to expose is a dependency property identifier field.</span></span> <span data-ttu-id="2dff0-195">このフィールドにする必要があります、`public static readonly`型のフィールド<xref:System.Windows.DependencyProperty>の戻り値に割り当てられる、<xref:System.Windows.DependencyProperty.AddOwner%2A>呼び出します。</span><span class="sxs-lookup"><span data-stu-id="2dff0-195">This field should be a `public static readonly` field of type <xref:System.Windows.DependencyProperty>, which is assigned to the return value of the <xref:System.Windows.DependencyProperty.AddOwner%2A> call.</span></span> <span data-ttu-id="2dff0-196">2 番目に定義するメンバーは、[!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] の "ラッパー" プロパティです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-196">The second member to define is the [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] "wrapper" property.</span></span> <span data-ttu-id="2dff0-197">ラッパーが容易にコードで、依存関係プロパティを操作する (呼び出しを避けるため<xref:System.Windows.DependencyObject.SetValue%2A>各時間、およびラッパー自体でその呼び出しを 1 回だけを実行することができます)。</span><span class="sxs-lookup"><span data-stu-id="2dff0-197">The wrapper makes it much more convenient to manipulate your dependency property in code (you avoid calls to <xref:System.Windows.DependencyObject.SetValue%2A> each time, and can make that call only once in the wrapper itself).</span></span> <span data-ttu-id="2dff0-198">このラッパーの実装方法は、カスタム依存関係プロパティを登録する場合の実装方法とまったく同じです。</span><span class="sxs-lookup"><span data-stu-id="2dff0-198">The wrapper is implemented identically to how it would be implemented if you were registering a custom dependency property.</span></span> <span data-ttu-id="2dff0-199">依存関係プロパティの実装の詳細については、「[カスタム依存関係プロパティ](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)」および「[依存関係プロパティの所有者の種類を追加する](../../../../docs/framework/wpf/advanced/how-to-add-an-owner-type-for-a-dependency-property.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2dff0-199">For more information about implementing a dependency property, see [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md) and [Add an Owner Type for a Dependency Property](../../../../docs/framework/wpf/advanced/how-to-add-an-owner-type-for-a-dependency-property.md).</span></span>  
  
#### <a name="addowner-and-attached-properties"></a><span data-ttu-id="2dff0-200">AddOwner および添付プロパティ</span><span class="sxs-lookup"><span data-stu-id="2dff0-200">AddOwner and Attached Properties</span></span>  
 <span data-ttu-id="2dff0-201">呼び出すことができます<xref:System.Windows.DependencyProperty.AddOwner%2A>依存関係プロパティの添付プロパティの所有者のクラスによって定義されます。</span><span class="sxs-lookup"><span data-stu-id="2dff0-201">You can call <xref:System.Windows.DependencyProperty.AddOwner%2A> for a dependency property that is defined as an attached property by the owner class.</span></span> <span data-ttu-id="2dff0-202">通常、これは、以前の添付プロパティを非添付の依存関係プロパティとして公開する目的で行います。</span><span class="sxs-lookup"><span data-stu-id="2dff0-202">Generally the reason for doing this is to expose the previously attached property as a non-attached dependency property.</span></span> <span data-ttu-id="2dff0-203">公開は、<xref:System.Windows.DependencyProperty.AddOwner%2A>として値を返す、`public static readonly`依存関係プロパティの識別子として使用するためのフィールドし、プロパティは、メンバー テーブルが表示され、非添付プロパティをサポートするように、適切な「ラッパー」プロパティを定義しますクラスの使用率。</span><span class="sxs-lookup"><span data-stu-id="2dff0-203">You then will expose the <xref:System.Windows.DependencyProperty.AddOwner%2A> return value as a `public static readonly` field for use as the dependency property identifier, and will define appropriate "wrapper" properties so that the property appears in the members table and supports a non-attached property usage in your class.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2dff0-204">参照</span><span class="sxs-lookup"><span data-stu-id="2dff0-204">See Also</span></span>  
 <xref:System.Windows.PropertyMetadata>  
 <xref:System.Windows.DependencyObject>  
 <xref:System.Windows.DependencyProperty>  
 <xref:System.Windows.DependencyProperty.GetMetadata%2A>  
 [<span data-ttu-id="2dff0-205">依存関係プロパティの概要</span><span class="sxs-lookup"><span data-stu-id="2dff0-205">Dependency Properties Overview</span></span>](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)  
 [<span data-ttu-id="2dff0-206">フレームワーク プロパティ メタデータ</span><span class="sxs-lookup"><span data-stu-id="2dff0-206">Framework Property Metadata</span></span>](../../../../docs/framework/wpf/advanced/framework-property-metadata.md)
