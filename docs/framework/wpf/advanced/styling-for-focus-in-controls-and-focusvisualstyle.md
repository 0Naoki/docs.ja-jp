---
title: コントロールのフォーカスのスタイルと FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: 762abf9524b8dfc7903d5e33bdbe99f4d0eb7192
ms.sourcegitcommit: 0c48191d6d641ce88d7510e319cf38c0e35697d0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2019
ms.locfileid: "57377046"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="5c3ad-102">コントロールのフォーカスのスタイルと FocusVisualStyle</span><span class="sxs-lookup"><span data-stu-id="5c3ad-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="5c3ad-103">キーボード フォーカスを受け取るときに、コントロールの外観を変更するための 2 つの並列メカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="5c3ad-104">最初のメカニズムは、プロパティなどのプロパティ set アクセス操作子を使用する<xref:System.Windows.UIElement.IsKeyboardFocused%2A>スタイルまたはコントロールに適用されているテンプレート内で。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="5c3ad-105">2 つ目のメカニズムの値として別のスタイルを提供する、<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>プロパティまたはその他の UI コントロールのビジュアル ツリーを変更するのではなく、コントロールの上に描画される装飾の個別のビジュアル ツリーを作成する「フォーカスのビジュアル スタイル」置換することで要素。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="5c3ad-106">このトピックでは、これらのメカニズムが適切なシナリオについて説明します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  
   
  
<a name="Purpose"></a>   
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="5c3ad-107">フォーカスのビジュアル スタイルの目的は、</span><span class="sxs-lookup"><span data-stu-id="5c3ad-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="5c3ad-108">フォーカス表示スタイルの機能は、UI 要素にキーボード ナビゲーションに基づく visual ユーザーからのフィードバックを導入するための一般的な「オブジェクト モデル」を提供します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="5c3ad-109">特定のテンプレート構成を知る必要も、コントロールに新しいテンプレートを適用することがなく可能です。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="5c3ad-110">ただし、フォーカスの視覚スタイルの機能は、コントロール テンプレートを知ることがなく機能するために正確にフォーカスのビジュアル スタイルを使用してコントロールの表示可能な視覚的フィードバックは必ずしも制限されます。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="5c3ad-111">機能が実際には、テンプレートを通じて、コントロールの描画によって作成されたビジュアル ツリーの上に別のビジュアル ツリー (装飾) をオーバーレイすることです。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="5c3ad-112">表示されるスタイルを使用してこの個別のビジュアル ツリーを定義する、<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>プロパティ。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>   
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="5c3ad-113">フォーカスの Visual スタイルの既定の動作</span><span class="sxs-lookup"><span data-stu-id="5c3ad-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="5c3ad-114">フォーカス表示スタイルは、キーボードでフォーカスのアクションが開始された場合にのみ機能します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="5c3ad-115">任意のマウス操作またはプログラムによるフォーカスの変更は、visual スタイルのフォーカス モードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="5c3ad-116">フォーカス モードの違いの詳細については、[フォーカスの概要](focus-overview.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="5c3ad-117">コントロールのテーマには、テーマのすべてのコントロールのフォーカスの視覚スタイルになる既定フォーカス visual スタイルの動作が含まれます。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="5c3ad-118">このテーマ スタイルは、静的なキーの値によって識別される<xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="5c3ad-119">アプリケーション レベルで、独自のフォーカス表示スタイルを宣言するときに、このテーマから既定のスタイル動作を置き換えます。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="5c3ad-120">また、全体のテーマを定義する場合に、全体のテーマの既定の動作のスタイルを定義するこれと同じキーを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="5c3ad-121">テーマ、既定のフォーカスの視覚スタイルは一般に、非常に単純です。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="5c3ad-122">おおよその近似値を次に示します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>   
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="5c3ad-123">フォーカスの視覚スタイルを使用する場合</span><span class="sxs-lookup"><span data-stu-id="5c3ad-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="5c3ad-124">概念的には、コントロールに適用されるフォーカスの視覚スタイルの外観は、コントロール間で一貫している必要があります。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="5c3ad-125">一貫性を実現する方法の 1 つがコントロールから続きに visual スタイルで、テーマで定義されている各コントロールを取得フォーカス表示スタイルをまったく同じまたはスタイルのいくつかのバリエーションのいずれかを全体のテーマを作成する場合にのみが関連する視覚的にフォーカスを変更するにはrol します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="5c3ad-126">ページまたは UI にキーボード フォーカスのすべての要素のスタイルを設定する同じスタイル (または同様のスタイル) を使用する場合があります。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="5c3ad-127">設定<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>テーマの一部ではない個々 のコントロールのスタイルはフォーカスの使用目的ではない視覚スタイル。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="5c3ad-128">これは、コントロール間の一貫性のない visual 動作がキーボード フォーカスに関するユーザー エクスペリエンスは混乱を招く可能性があるためにです。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="5c3ad-129">キーボード フォーカスは、テーマ間で一貫性のあるは意図的にコントロール固有の動作をコントロールするはるかに優れた方法は、スタイルのトリガーをなど、個々 の入力の状態のプロパティを使用します<xref:System.Windows.UIElement.IsFocused%2A>または<xref:System.Windows.UIElement.IsKeyboardFocused%2A>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="5c3ad-130">フォーカスの視覚スタイルがキーボード フォーカスの専用の機能です。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="5c3ad-131">そのため、フォーカスの視覚スタイルは、ユーザー補助機能の種類です。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="5c3ad-132">マウスを使用しているかどうか、フォーカスの任意の型の UI の変更をする場合キーボード、またはプログラムによって、しするが、フォーカスの視覚スタイルを使用しないでくださいし、set アクセス操作子とスタイルまたはテンプレートの全般的な焦点プロパティの値から作業をでトリガーを使用する必要があります。など<xref:System.Windows.UIElement.IsFocused%2A>または<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>   
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="5c3ad-133">フォーカス表示スタイルを作成する方法</span><span class="sxs-lookup"><span data-stu-id="5c3ad-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="5c3ad-134">フォーカスのビジュアル スタイルを指定することは常に作成する、スタイル、<xref:System.Windows.Style.TargetType%2A>の<xref:System.Windows.Controls.Control>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="5c3ad-135">主にスタイルが加え、<xref:System.Windows.Controls.ControlTemplate>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="5c3ad-136">型であることに、フォーカスの視覚スタイルが割り当てられている対象の型を指定しない、<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="5c3ad-137">対象の型は常にため<xref:System.Windows.Controls.Control>、すべてのコントロールに共通するプロパティを使用してスタイルを設定する必要があります (のプロパティを使用して、<xref:System.Windows.Controls.Control>クラスとその基本クラス)。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="5c3ad-138">UI 要素にオーバーレイとして正しく機能して、コントロールの機能領域を隠さないテンプレートを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="5c3ad-139">つまり、通常、視覚的なフィードバックが表示されること、コントロールのマージンの外部またはコントロールのヒット テストがブロックされていない一時的または控えめな効果と、フォーカスのビジュアル スタイルを適用します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="5c3ad-140">サイズ変更と、オーバーレイのテンプレートの配置を決定するために利用できるテンプレートのバインドで使用できるプロパティが含まれます<xref:System.Windows.FrameworkElement.ActualHeight%2A>、 <xref:System.Windows.FrameworkElement.ActualWidth%2A>、 <xref:System.Windows.FrameworkElement.Margin%2A>、および<xref:System.Windows.Controls.Control.Padding%2A>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>   
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="5c3ad-141">フォーカスのビジュアル スタイルの使用に代わる方法</span><span class="sxs-lookup"><span data-stu-id="5c3ad-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="5c3ad-142">状況でフォーカスのビジュアル スタイルを使用して、適切でない 1 つのコントロールをスタイル設定はのみか、またはコントロール テンプレートをより細かく制御するためがあるその他の多くのアクセス可能なプロパティやビジュアルを作成できる手法フォーカスの変更に応答で動作します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="5c3ad-143">トリガー、setter、およびイベント setter がすべてで詳しく説明されている[スタイルとテンプレート](../controls/styling-and-templating.md)します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../controls/styling-and-templating.md).</span></span> <span data-ttu-id="5c3ad-144">ルーティング イベントの処理は、後ほど[ルーティング イベントの概要](routed-events-overview.md)します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="5c3ad-145">IsKeyboardFocused</span><span class="sxs-lookup"><span data-stu-id="5c3ad-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="5c3ad-146">キーボード フォーカスを具体的には関心がある場合、<xref:System.Windows.UIElement.IsKeyboardFocused%2A>プロパティの依存関係プロパティを使用できる<xref:System.Windows.Trigger>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="5c3ad-147">スタイルまたはテンプレートのいずれかのプロパティ トリガーは、非常に具体的には、1 つのコントロールについては、他のコントロールのキーボード フォーカスの動作に一致する可能性がありますいない視覚的には、キーボード フォーカスの動作を定義するためのより適切な手法です。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="5c3ad-148">別のような依存関係プロパティが<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>、合成内またはコントロールの機能領域内ではどこかに、視覚的に、そのキーボード フォーカスを呼び出そうとする場合に使用する適切なされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="5c3ad-149">たとえば、配置する場合があります、<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>トリガー場合でも、キーボード フォーカスがより正確に可能性があります、いくつかのコントロールをグループ化するパネルが異なる方法に表示されるようにそのパネル内の各要素にします。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="5c3ad-150">イベントを使用することもできます。<xref:System.Windows.UIElement.GotKeyboardFocus>と<xref:System.Windows.UIElement.LostKeyboardFocus>(と同様に、プレビューの同等)。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="5c3ad-151">基礎として、これらのイベントを使用することができます、 <xref:System.Windows.EventSetter>、または分離コードでイベントのハンドラーを記述することができます。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="5c3ad-152">その他のフォーカス プロパティ</span><span class="sxs-lookup"><span data-stu-id="5c3ad-152">Other Focus Properties</span></span>  
 <span data-ttu-id="5c3ad-153">Setter の基本やをトリガーする必要がありますのフォーカスを変更するすべての考えられる原因を視覚的な動作を生成する場合は、<xref:System.Windows.UIElement.IsFocused%2A>依存関係プロパティでは、別の方法で、<xref:System.Windows.UIElement.GotFocus>または<xref:System.Windows.UIElement.LostFocus>に使用されるイベント、<xref:System.Windows.EventSetter>します。</span><span class="sxs-lookup"><span data-stu-id="5c3ad-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5c3ad-154">関連項目</span><span class="sxs-lookup"><span data-stu-id="5c3ad-154">See also</span></span>
- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="5c3ad-155">スタイルとテンプレート</span><span class="sxs-lookup"><span data-stu-id="5c3ad-155">Styling and Templating</span></span>](../controls/styling-and-templating.md)
- [<span data-ttu-id="5c3ad-156">フォーカスの概要</span><span class="sxs-lookup"><span data-stu-id="5c3ad-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="5c3ad-157">入力の概要</span><span class="sxs-lookup"><span data-stu-id="5c3ad-157">Input Overview</span></span>](input-overview.md)
