---
title: "WPF における分離コードと XAML"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- XAML [WPF], code-behind
- code-behind files [WPF], XAML
ms.assetid: 9df6d3c9-aed3-471c-af36-6859b19d999f
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 19c7c2cdd49663a57a4184027fd7d6ad8fcd7656
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/22/2017
---
# <a name="code-behind-and-xaml-in-wpf"></a><span data-ttu-id="361e3-102">WPF における分離コードと XAML</span><span class="sxs-lookup"><span data-stu-id="361e3-102">Code-Behind and XAML in WPF</span></span>
<a name="introduction"></a><span data-ttu-id="361e3-103">分離コードとは、マークアップ定義オブジェクトによって結合されるコードの記述に使用される用語と、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]ページがマークアップ コンパイルします。</span><span class="sxs-lookup"><span data-stu-id="361e3-103">Code-behind is a term used to describe the code that is joined with markup-defined objects, when a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page is markup-compiled.</span></span> <span data-ttu-id="361e3-104">このトピックは、分離コードの要件および内のコードの別のインライン コード メカニズムについて説明します。[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="361e3-104">This topic describes requirements for code-behind as well as an alternative inline code mechanism for code in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 <span data-ttu-id="361e3-105">このトピックは、次のセクションで構成されています。</span><span class="sxs-lookup"><span data-stu-id="361e3-105">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="361e3-106">前提条件</span><span class="sxs-lookup"><span data-stu-id="361e3-106">Prerequisites</span></span>](#Prerequisites)  
  
-   [<span data-ttu-id="361e3-107">分離コードと、XAML 言語</span><span class="sxs-lookup"><span data-stu-id="361e3-107">Code-Behind and the XAML Language</span></span>](#codebehind_and_the_xaml_language)  
  
-   [<span data-ttu-id="361e3-108">分離コード、イベント ハンドラー、および WPF では部分クラスの要件</span><span class="sxs-lookup"><span data-stu-id="361e3-108">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>](#Code_behind__Event_Handler__and_Partial_Class)  
  
-   [<span data-ttu-id="361e3-109">x: コード</span><span class="sxs-lookup"><span data-stu-id="361e3-109">x:Code</span></span>](#x_Code)  
  
-   [<span data-ttu-id="361e3-110">インライン コードの制限</span><span class="sxs-lookup"><span data-stu-id="361e3-110">Inline Code Limitations</span></span>](#Inline_Code_Limitations)  
  
<a name="Prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="361e3-111">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="361e3-111">Prerequisites</span></span>  
 <span data-ttu-id="361e3-112">このトピックでは、読み取りがある前提としています、 [XAML の概要 (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)の基本的な知識があると、[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]とオブジェクト指向プログラミングします。</span><span class="sxs-lookup"><span data-stu-id="361e3-112">This topic assumes that you have read the [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) and have some basic knowledge of the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] and object-oriented programming.</span></span>  
  
<a name="codebehind_and_the_xaml_language"></a>   
## <a name="code-behind-and-the-xaml-language"></a><span data-ttu-id="361e3-113">分離コードと、XAML 言語</span><span class="sxs-lookup"><span data-stu-id="361e3-113">Code-Behind and the XAML Language</span></span>  
 <span data-ttu-id="361e3-114">XAML 言語には、コード ファイルを関連付けるマークアップ ファイル側からのマークアップ ファイルに使用する言語レベルの機能が含まれています。</span><span class="sxs-lookup"><span data-stu-id="361e3-114">The XAML language includes language-level features that make it possible to associate code files with markup files, from the markup file side.</span></span> <span data-ttu-id="361e3-115">具体的には、言語の機能の定義、XAML 言語[X:class ディレクティブ](../../../../docs/framework/xaml-services/x-class-directive.md)、 [X:subclass ディレクティブ](../../../../docs/framework/xaml-services/x-subclass-directive.md)、および[X:classmodifier ディレクティブ](../../../../docs/framework/xaml-services/x-classmodifier-directive.md)です。</span><span class="sxs-lookup"><span data-stu-id="361e3-115">Specifically, the XAML language defines the language features [x:Class Directive](../../../../docs/framework/xaml-services/x-class-directive.md), [x:Subclass Directive](../../../../docs/framework/xaml-services/x-subclass-directive.md), and [x:ClassModifier Directive](../../../../docs/framework/xaml-services/x-classmodifier-directive.md).</span></span> <span data-ttu-id="361e3-116">コードの生成方法、およびマークアップとコードを統合する方法を正確には、XAML 言語の指定の一部ではありません。</span><span class="sxs-lookup"><span data-stu-id="361e3-116">Exactly how the code should be produced, and how to integrate markup and code, is not part of what the XAML language specifies.</span></span> <span data-ttu-id="361e3-117">コードを統合する方法を決定する WPF などのフレームワークまではそのまま、アプリケーションとプログラミング モデル、およびビルドで XAML を使用するアクションまたは他のサポートされる方法すべてが必要です。</span><span class="sxs-lookup"><span data-stu-id="361e3-117">It is left up to frameworks such as WPF to determine how to integrate the code, how to use XAML in the application and programming models, and the build actions or other support that all this requires.</span></span>  
  
<a name="Code_behind__Event_Handler__and_Partial_Class"></a>   
## <a name="code-behind-event-handler-and-partial-class-requirements-in-wpf"></a><span data-ttu-id="361e3-118">分離コード、イベント ハンドラー、および WPF では部分クラスの要件</span><span class="sxs-lookup"><span data-stu-id="361e3-118">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>  
  
-   <span data-ttu-id="361e3-119">部分クラスは、ルート要素をサポートする型から派生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="361e3-119">The partial class must derive from the type that backs the root element.</span></span>  
  
-   <span data-ttu-id="361e3-120">マークアップ コンパイルのビルド アクションの既定の動作、するおくことができます、派生で空白の部分クラス定義で分離コード側で注意してください。</span><span class="sxs-lookup"><span data-stu-id="361e3-120">Note that under the default behavior of the markup compile build actions, you can leave the derivation blank in the partial class definition on the code-behind side.</span></span> <span data-ttu-id="361e3-121">指定しない場合でも、コンパイルの結果は、部分クラスを基になるバッキング型のページのルートと仮定します。</span><span class="sxs-lookup"><span data-stu-id="361e3-121">The compiled result will assume the page root's backing type to be the basis for the partial class, even if it not specified.</span></span> <span data-ttu-id="361e3-122">ただし、この動作に証明書利用者は、ベスト プラクティスではないです。</span><span class="sxs-lookup"><span data-stu-id="361e3-122">However, relying on this behavior is not a best practice.</span></span>  
  
-   <span data-ttu-id="361e3-123">分離コードで記述するイベント ハンドラーは、インスタンス メソッドである必要があり、静的メソッドにすることはできません。</span><span class="sxs-lookup"><span data-stu-id="361e3-123">The event handlers you write in the code behind must be instance methods and cannot be static methods.</span></span> <span data-ttu-id="361e3-124">によって識別される CLR 名前空間内の部分クラスでこれらのメソッドを定義する必要があります`x:Class`です。</span><span class="sxs-lookup"><span data-stu-id="361e3-124">These methods must be defined by the partial class within the CLR namespace identified by `x:Class`.</span></span> <span data-ttu-id="361e3-125">イベント ハンドラーに指示するための名前を修飾することはできません、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]イベント接続を別のクラス スコープでのイベント ハンドラーを検索するプロセッサ。</span><span class="sxs-lookup"><span data-stu-id="361e3-125">You cannot qualify the name of an event handler to instruct a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor to look for an event handler for event wiring in a different class scope.</span></span>  
  
-   <span data-ttu-id="361e3-126">ハンドラーは、バッキング型システムで適切なイベントのデリゲートに一致しなければなりません。</span><span class="sxs-lookup"><span data-stu-id="361e3-126">The handler must match the delegate for the appropriate event in the backing type system.</span></span>  
  
-   <span data-ttu-id="361e3-127">[!INCLUDE[TLA#tla_visualb](../../../../includes/tlasharptla-visualb-md.md)]言語固有の言語を使用する具体的には、`Handles`インスタンスとでの属性のハンドラーのアタッチではなく、ハンドラーの宣言内のイベントにハンドラーを関連付けるキーワード[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="361e3-127">For the [!INCLUDE[TLA#tla_visualb](../../../../includes/tlasharptla-visualb-md.md)] language specifically, you can use the language-specific `Handles` keyword to associate handlers with instances and events in the handler declaration, instead of attaching handlers with attributes in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="361e3-128">ただし、この手法はいくつかの制限がありますので、`Handles`キーワードには、すべての特定の機能のサポートできない、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]など特定のイベントのシステム イベントのシナリオをルーティングまたはアタッチされるイベント。</span><span class="sxs-lookup"><span data-stu-id="361e3-128">However, this technique does have some limitations because the `Handles` keyword cannot support all of the specific features of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system, such as certain routed event scenarios or attached events.</span></span> <span data-ttu-id="361e3-129">詳細については、「 [Visual Basic およびイベント処理の WPF](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md)です。</span><span class="sxs-lookup"><span data-stu-id="361e3-129">For details, see [Visual Basic and WPF Event Handling](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md).</span></span>  
  
<a name="x_Code"></a>   
## <a name="xcode"></a><span data-ttu-id="361e3-130">x: コード</span><span class="sxs-lookup"><span data-stu-id="361e3-130">x:Code</span></span>  
 <span data-ttu-id="361e3-131">[X:code](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md)ディレクティブ要素で定義されている[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="361e3-131">[x:Code](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md) is a directive element defined in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="361e3-132">`x:Code`ディレクティブ要素がインラインのプログラミング コードを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="361e3-132">An `x:Code` directive element can contain inline programming code.</span></span> <span data-ttu-id="361e3-133">インラインで定義されているコードに対話できる、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]同じページにします。</span><span class="sxs-lookup"><span data-stu-id="361e3-133">The code that is defined inline can interact with the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] on the same page.</span></span> <span data-ttu-id="361e3-134">次の例では、インライン[!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)]コード。</span><span class="sxs-lookup"><span data-stu-id="361e3-134">The following example illustrates inline [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] code.</span></span> <span data-ttu-id="361e3-135">内のコードにある通知、`x:Code`要素と、コードで囲む必要がある`<CDATA[`しています.`]]>`の内容をエスケープするために[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)]するように、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]プロセッサ (解釈するか、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]スキーマまたは[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]スキーマ) 内容を解釈しようとは、リテラルとして[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="361e3-135">Notice that the code is inside the `x:Code` element and that the code must be surrounded by `<CDATA[`...`]]>` to escape the contents for [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)], so that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor (interpreting either the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema or the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] schema) will not try to interpret the contents literally as [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)].</span></span>  
  
 [!code-xaml[XAMLOvwSupport#ButtonWithInlineCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/XAMLOvwSupport/CSharp/page4.xaml#buttonwithinlinecode)]  
  
<a name="Inline_Code_Limitations"></a>   
## <a name="inline-code-limitations"></a><span data-ttu-id="361e3-136">インライン コードの制限</span><span class="sxs-lookup"><span data-stu-id="361e3-136">Inline Code Limitations</span></span>  
 <span data-ttu-id="361e3-137">回避するインライン コードの使用を制限したりすることを検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="361e3-137">You should consider avoiding or limiting the use of inline code.</span></span> <span data-ttu-id="361e3-138">アーキテクチャとコーディングの原理に関してマークアップと分離コードの間の分離の維持は保持設計者と開発者の役割もはっきりと区別します。</span><span class="sxs-lookup"><span data-stu-id="361e3-138">In terms of architecture and coding philosophy, maintaining a separation between markup and code-behind keeps the designer and developer roles much more distinct.</span></span> <span data-ttu-id="361e3-139">技術的な詳細レベルでは、インライン コードを記述するコードが生じること書き込むには、メッセージが不適切に常に記述するため、[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]部分クラスを生成し、既定の XML 名前空間のマッピングのみを使用できます。</span><span class="sxs-lookup"><span data-stu-id="361e3-139">On a more technical level, the code that you write for inline code can be awkward to write, because you are always writing into the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] generated partial class, and can only use the default XML namespace mappings.</span></span> <span data-ttu-id="361e3-140">追加できないため、`using`ステートメント、する必要がありますを完全修飾の多く、[!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]行う呼び出しです。</span><span class="sxs-lookup"><span data-stu-id="361e3-140">Because you cannot add `using` statements, you must fully qualify many of the [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that you make.</span></span> <span data-ttu-id="361e3-141">既定値[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]マッピングを含める最もすべてではない[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]名前空間に存在する、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]アセンブリへの呼び出しの種類およびその他の CLR 名前空間内に含まれるメンバーを完全に修飾する必要があります。</span><span class="sxs-lookup"><span data-stu-id="361e3-141">The default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mappings include most but not all [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] namespaces that are present in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] assemblies; you will have to fully qualify calls to types and members contained within the other CLR namespaces.</span></span> <span data-ttu-id="361e3-142">定義することもできない部分クラス以外のインライン コードにしを参照するすべてのユーザー コードのエンティティが生成される部分クラス内の変数またはメンバーとして存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="361e3-142">You also cannot define anything beyond the partial class in the inline code, and all user code entities you reference must exist as a member or variable within the generated partial class.</span></span> <span data-ttu-id="361e3-143">その他の言語固有プログラミングなどの機能、マクロや`#ifdef`グローバル変数、またはビルド変数、に対しては、利用できません。</span><span class="sxs-lookup"><span data-stu-id="361e3-143">Other language specific programming features, such as macros or `#ifdef` against global variables or build variables, are also not available.</span></span> <span data-ttu-id="361e3-144">詳細については、次を参照してください。 [X:code 組み込み XAML 型](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md)です。</span><span class="sxs-lookup"><span data-stu-id="361e3-144">For more information, see [x:Code Intrinsic XAML Type](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="361e3-145">参照</span><span class="sxs-lookup"><span data-stu-id="361e3-145">See Also</span></span>  
 [<span data-ttu-id="361e3-146">XAML の概要 (WPF)</span><span class="sxs-lookup"><span data-stu-id="361e3-146">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)  
 [<span data-ttu-id="361e3-147">x:Code 組み込み XAML 型 </span><span class="sxs-lookup"><span data-stu-id="361e3-147">x:Code Intrinsic XAML Type</span></span>](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md)  
 [<span data-ttu-id="361e3-148">WPF アプリケーションのビルド</span><span class="sxs-lookup"><span data-stu-id="361e3-148">Building a WPF Application</span></span>](../../../../docs/framework/wpf/app-development/building-a-wpf-application-wpf.md)  
 [<span data-ttu-id="361e3-149">XAML 構文の詳細</span><span class="sxs-lookup"><span data-stu-id="361e3-149">XAML Syntax In Detail</span></span>](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md)
