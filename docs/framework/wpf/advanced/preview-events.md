---
title: プレビュー イベント
ms.date: 03/30/2017
helpviewer_keywords:
- Preview events [WPF]
- suppressing events [WPF]
- events [WPF], Preview
- events [WPF], suppressing
ms.assetid: b5032308-aa9c-4d02-af11-630ecec8df7e
ms.openlocfilehash: 95514cfce88764d92d690fb9c0a51c667a49683b
ms.sourcegitcommit: 0c48191d6d641ce88d7510e319cf38c0e35697d0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/05/2019
ms.locfileid: "57356339"
---
# <a name="preview-events"></a><span data-ttu-id="ba5ad-102">プレビュー イベント</span><span class="sxs-lookup"><span data-stu-id="ba5ad-102">Preview Events</span></span>
<span data-ttu-id="ba5ad-103">プレビュー イベント、トンネル イベントとも呼ばれますにはルーティング イベントがあるイベントを発生し、イベント データのソースとして報告された要素に対するアプリケーションのルートからルートの方向が送信されます。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-103">Preview events, also known as tunneling events, are routed events where the direction of the route travels from the application root towards the element that raised the event and is reported as the source in event data.</span></span> <span data-ttu-id="ba5ad-104">すべてのイベント シナリオがサポートまたはプレビュー イベント; が必要です。このトピックでは、カスタム コンポーネントまたはクラスでプレビュー イベントを作成する可能性がありますが、適切なである場合、プレビュー イベントが存在、アプリケーションまたはコンポーネントを処理する方法、それらの状況について説明します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-104">Not all event scenarios support or require preview events; this topic describes the situations where preview events exist, how applications or components should handle them, and cases where creating preview events in custom components or classes might be appropriate.</span></span>  
  
## <a name="preview-events-and-input"></a><span data-ttu-id="ba5ad-105">プレビュー イベントと入力</span><span class="sxs-lookup"><span data-stu-id="ba5ad-105">Preview Events and Input</span></span>  
 <span data-ttu-id="ba5ad-106">イベントは一般に、注意するプレビューを処理するときに、イベントをマークすることでイベント処理データ。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-106">When you handle Preview events in general, be cautious about marking the events handled in the event data.</span></span> <span data-ttu-id="ba5ad-107">以外の任意の要素でプレビュー イベントを処理すること (イベント データのソースとして報告される要素) を発生させた要素は、要素外の発生するイベントを処理する機会を提供しない効果があります。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-107">Handling a Preview event on any element other than the element that raised it (the element that is reported as the source in the event data) has the effect of not providing an element the opportunity to handle the event that it originated.</span></span> <span data-ttu-id="ba5ad-108">場合があります内でのコントロールの複合リレーションシップに問題の要素が存在しない場合に特に、目的の結果になります。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-108">Sometimes this is the desired result, particularly if the elements in question exist in relationships within the compositing of a control.</span></span>  
  
 <span data-ttu-id="ba5ad-109">入力イベントを具体的には、プレビュー イベントを共有もイベント データ インスタンス、同等のバブル イベント。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-109">For input events specifically, Preview events also share event data instances with the equivalent bubbling event.</span></span> <span data-ttu-id="ba5ad-110">プレビュー イベントのクラス ハンドラーを使用して、入力イベントを処理済みのマークする場合、バブル入力イベントのクラス ハンドラーは呼び出されません。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-110">If you use a Preview event class handler to mark the input event handled, the bubbling input event class handler will not be invoked.</span></span> <span data-ttu-id="ba5ad-111">または、プレビュー イベントのインスタンス ハンドラーにイベントを処理済みのマークを使用する場合、バブル イベントのハンドラーは通常呼び出されません。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-111">Or, if you use a Preview event instance handler to mark the event handled, handlers for the bubbling event will not typically be invoked.</span></span> <span data-ttu-id="ba5ad-112">クラス ハンドラーやインスタンス ハンドラーを登録またはアタッチする手法は通常使用されませんが、イベントが処理された、マークされている場合でも呼び出されるオプション。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-112">Class handlers or instance handlers can be registered or attached with an option to be invoked even if the event is marked handled, but that technique is not commonly used.</span></span>  
  
 <span data-ttu-id="ba5ad-113">クラスの処理とプレビュー イベントに関連付ける方法の詳細については、[ルーティング イベントの処理済み、およびクラス処理としてのマーキング](marking-routed-events-as-handled-and-class-handling.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-113">For more information about class handling and how it relates to Preview events see [Marking Routed Events as Handled, and Class Handling](marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
### <a name="working-around-event-suppression-by-controls"></a><span data-ttu-id="ba5ad-114">コントロールによるイベント抑制の回避</span><span class="sxs-lookup"><span data-stu-id="ba5ad-114">Working Around Event Suppression by Controls</span></span>  
 <span data-ttu-id="ba5ad-115">プレビュー イベントが頻繁に使用されている 1 つのシナリオが、複合コントロールの入力イベントを処理します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-115">One scenario where Preview events are commonly used is for composited control handling of input events.</span></span> <span data-ttu-id="ba5ad-116">場合によっては、コントロールの作成者より多くの情報をより具体的な動作を表すコンポーネント定義のイベントを置換するには、おそらくそのコントロールでは、送信元から特定のイベントを抑制します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-116">Sometimes, the author of the control suppresses a certain event from originating from their control, perhaps in order to substitute a component-defined event that carries more information or implies a more specific behavior.</span></span> <span data-ttu-id="ba5ad-117">たとえば、 [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button>を抑制します<xref:System.Windows.UIElement.MouseLeftButtonDown>と<xref:System.Windows.UIElement.MouseRightButtonDown>によって生成されるイベントのバブリング、<xref:System.Windows.Controls.Button>またはマウスをキャプチャして発生を優先してその複合要素を<xref:System.Windows.Controls.Primitives.ButtonBase.Click>によって常に発生するイベントを<xref:System.Windows.Controls.Button>自体。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-117">For instance, a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown> and <xref:System.Windows.UIElement.MouseRightButtonDown> bubbling events raised by the <xref:System.Windows.Controls.Button> or its composite elements in favor of capturing the mouse and raising a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event that is always raised by the <xref:System.Windows.Controls.Button> itself.</span></span> <span data-ttu-id="ba5ad-118">イベントとそのデータ、ルートでは、引き続きだ、 <xref:System.Windows.Controls.Button> 、イベント データをマーク<xref:System.Windows.RoutedEventArgs.Handled%2A>で動作する必要がありますが、個別に指定したイベントのハンドラーにのみ、`handledEventsToo`ケースが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-118">The event and its data still continue along the route, but because the <xref:System.Windows.Controls.Button> marks the event data as <xref:System.Windows.RoutedEventArgs.Handled%2A>, only handlers for the event that specifically indicated they should act in the `handledEventsToo` case  are invoked.</span></span>  <span data-ttu-id="ba5ad-119">代わりをコードでハンドラーをアタッチする場合は、アプリケーションのルートに近い方には、その他の要素もコントロールで抑制されたイベントを処理すること、`handledEventsToo`として指定された`true`します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-119">If other elements towards the root of your application still wanted an opportunity to handle a control-suppressed event, one alternative is to attach handlers in code with `handledEventsToo` specified as `true`.</span></span> <span data-ttu-id="ba5ad-120">プレビューと同等の入力イベントを処理するルーティングの方向を変更する単純な手法は、多くの場合。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-120">But often a simpler technique is to change the routing direction you handle to be the Preview equivalent of an input event.</span></span> <span data-ttu-id="ba5ad-121">たとえば、コントロールを抑制する場合<xref:System.Windows.UIElement.MouseLeftButtonDown>、ハンドラーを添付するをお試しください<xref:System.Windows.UIElement.PreviewMouseLeftButtonDown>代わりにします。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-121">For instance, if a control suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown>, try attaching a handler for <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> instead.</span></span> <span data-ttu-id="ba5ad-122">この手法だけが、基本要素の入力イベントなど<xref:System.Windows.UIElement.MouseLeftButtonDown>します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-122">This technique only works for base element input events such as <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span></span> <span data-ttu-id="ba5ad-123">これらの入力イベントは、トンネル/バブルのペアを使用して、両方のイベントを発生させるし、イベント データを共有します。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-123">These input events use tunnel/bubble pairs, raise both events, and share the event data.</span></span>  
  
 <span data-ttu-id="ba5ad-124">これらの手法が、副作用または制限事項のいずれか。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-124">Each of these techniques has either side effects or limitations.</span></span> <span data-ttu-id="ba5ad-125">プレビュー イベントの処理の副作用は、バブル イベントを処理するハンドラーが無効にイベントをその時点で処理をそのため、制限がある通常いない処理、Previ にまだ残っているイベントをマークすることをお勧め新しいルートの一部です。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-125">The side effect of handling the Preview event is that handling the event at that point might disable handlers that expect to handle the bubbling event, and therefore the limitation is that it is usually not a good idea to mark the event handled while it is still on the Preview part of the route.</span></span> <span data-ttu-id="ba5ad-126">制限、`handledEventsToo`手法は指定できません、`handledEventsToo`ハンドラー[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]を属性としてする必要がありますに登録するイベント ハンドラーのコード ハンドラーがアタッチされる要素へのオブジェクト参照を取得した後。</span><span class="sxs-lookup"><span data-stu-id="ba5ad-126">The limitation of the `handledEventsToo` technique is that you cannot specify a `handledEventsToo` handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] as an attribute, you must register the event handler in code after obtaining an object reference to the element where the handler is to be attached.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ba5ad-127">関連項目</span><span class="sxs-lookup"><span data-stu-id="ba5ad-127">See also</span></span>
- [<span data-ttu-id="ba5ad-128">ルーティング イベントの処理済みとしてのマーキング、およびクラス処理</span><span class="sxs-lookup"><span data-stu-id="ba5ad-128">Marking Routed Events as Handled, and Class Handling</span></span>](marking-routed-events-as-handled-and-class-handling.md)
- [<span data-ttu-id="ba5ad-129">ルーティング イベントの概要</span><span class="sxs-lookup"><span data-stu-id="ba5ad-129">Routed Events Overview</span></span>](routed-events-overview.md)
