---
title: "オブジェクトの有効期間イベント"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- events [WPF], ContentRendered
- events [WPF], Deactivated
- events [WPF], Unloaded
- Activated events [WPF]
- events [WPF], Loaded
- Application objects [WPF], lifetime events
- events [WPF], Activated
- ContentRendered events [WPF]
- Deactivated events [WPF]
- events [WPF], Initialized
- events [WPF], Closing
- Unloaded events [WPF]
- exit events [WPF]
- objects' lifetime events [WPF]
- Loaded events [WPF]
- Closing events [WPF]
- events [WPF], Closed
- Initialized events [WPF]
- Closed events [WPF]
- startup events [WPF]
- lifetime events of objects [WPF]
ms.assetid: face6fc7-465b-4502-bfe5-e88d2e729a78
caps.latest.revision: "19"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: e31997cfc1ff7500317bdfc59ac6ad12d3d27a23
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/21/2017
---
# <a name="object-lifetime-events"></a><span data-ttu-id="20bf5-102">オブジェクトの有効期間イベント</span><span class="sxs-lookup"><span data-stu-id="20bf5-102">Object Lifetime Events</span></span>
<span data-ttu-id="20bf5-103">このトピックでは、オブジェクトの有効期間における作成、使用、破棄のステージを示す特定の [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] イベントについて説明します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-103">This topic describes the specific [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] events that signify stages in an object lifetime of creation, use, and destruction.</span></span>  
  

  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="20bf5-104">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="20bf5-104">Prerequisites</span></span>  
 <span data-ttu-id="20bf5-105">このトピックは、[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] クラスの既存の依存関係プロパティのコンシューマーの観点から依存関係プロパティを理解しており、「[依存関係プロパティの概要](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)」というトピックを読んでいることを前提としています。</span><span class="sxs-lookup"><span data-stu-id="20bf5-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md) topic.</span></span> <span data-ttu-id="20bf5-106">このトピックの例を理解するには、[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] について理解し (「[XAML の概要 (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)」を参照)、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] アプリケーションの記述方法を理解していることも必要です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-106">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] (see [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)) and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="intro"></a>   
## <a name="object-lifetime-events"></a><span data-ttu-id="20bf5-107">オブジェクトの有効期間イベント</span><span class="sxs-lookup"><span data-stu-id="20bf5-107">Object Lifetime Events</span></span>  
 <span data-ttu-id="20bf5-108">[!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] マネージ コードのオブジェクトはすべて、作成、使用、破棄という一連の有効期間のステージを経由します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-108">All objects in [!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] managed code go through a similar set of stages of life, creation, use, and destruction.</span></span> <span data-ttu-id="20bf5-109">また、多くのオブジェクトには、破棄フェーズの一環として発生する有効期間の終了ステージもあります。</span><span class="sxs-lookup"><span data-stu-id="20bf5-109">Many objects also have a finalization stage of life that occurs as part of the destruction phase.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="20bf5-110"> オブジェクト (具体的には [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] が要素として識別するビジュアル オブジェクト) にも、共通する一連のオブジェクト有効期間ステージがあります。</span><span class="sxs-lookup"><span data-stu-id="20bf5-110"> objects, more specifically the visual objects that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] identifies as elements, also have a set of common stages of object life.</span></span> <span data-ttu-id="20bf5-111">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] プログラミングおよびアプリケーション モデルでは、これらのステージが一連のイベントとして公開されます。</span><span class="sxs-lookup"><span data-stu-id="20bf5-111">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programming and application models expose these stages as a series of events.</span></span> <span data-ttu-id="20bf5-112">有効期間イベントに関しては、[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] に、全般的要素、ウィンドウ要素、ナビゲーション ホスト、アプリケーション オブジェクトの 4 種類の主要オブジェクトがあります。</span><span class="sxs-lookup"><span data-stu-id="20bf5-112">There are four main types of objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] with respect to lifetime events; elements in general, window elements, navigation hosts, and application objects.</span></span> <span data-ttu-id="20bf5-113">ウィンドウ要素とナビゲーション ホストは、さらに大きなビジュアル オブジェクト (要素) のグループにも含まれます。</span><span class="sxs-lookup"><span data-stu-id="20bf5-113">Windows and navigation hosts are also within the larger grouping of visual objects (elements).</span></span> <span data-ttu-id="20bf5-114">このトピックでは、すべての要素に共通する有効期間イベントについて説明し、次にアプリケーション定義、ウィンドウ要素、またはナビゲーション ホストに適用される特定の有効期間イベントについて説明します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-114">This topic describes the lifetime events that are common to all elements and then introduces the more specific ones that apply to application definitions, windows or navigation hosts.</span></span>  
  
<a name="common_events"></a>   
## <a name="common-lifetime-events-for-elements"></a><span data-ttu-id="20bf5-115">要素に関する共通の有効期間イベント</span><span class="sxs-lookup"><span data-stu-id="20bf5-115">Common Lifetime Events for Elements</span></span>  
 <span data-ttu-id="20bf5-116">任意の WPF フレームワーク レベルの要素 (いずれかから派生するオブジェクト<xref:System.Windows.FrameworkElement>または<xref:System.Windows.FrameworkContentElement>) が 3 つの一般的な有効期間イベント: <xref:System.Windows.FrameworkElement.Initialized>、<xref:System.Windows.FrameworkElement.Loaded>と<xref:System.Windows.FrameworkElement.Unloaded>です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-116">Any WPF framework-level element (those objects deriving from either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has three common lifetime events: <xref:System.Windows.FrameworkElement.Initialized>, <xref:System.Windows.FrameworkElement.Loaded>, and <xref:System.Windows.FrameworkElement.Unloaded>.</span></span>  
  
### <a name="initialized"></a><span data-ttu-id="20bf5-117">初期化済み</span><span class="sxs-lookup"><span data-stu-id="20bf5-117">Initialized</span></span>  
 <span data-ttu-id="20bf5-118"><xref:System.Windows.FrameworkElement.Initialized>最初に発生し、コンス トラクターの呼び出しによって、オブジェクトの初期化にほぼ対応します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-118"><xref:System.Windows.FrameworkElement.Initialized> is raised first, and roughly corresponds to the initialization of the object by the call to its constructor.</span></span> <span data-ttu-id="20bf5-119">このイベントは初期化に応答して発生するため、オブジェクトのすべてのプロパティが設定されることが保証されます。</span><span class="sxs-lookup"><span data-stu-id="20bf5-119">Because the event happens in response to initialization, you are guaranteed that all properties of the object are set.</span></span> <span data-ttu-id="20bf5-120">(例外は、動的リソースまたはバインディングなどの式の使用です。これらは評価されない式となります。)すべてのプロパティが設定されている要件のシーケンスの結果として<xref:System.Windows.FrameworkElement.Initialized>最初に、要素ツリー内の最下位要素の順序で発生しますが、マークアップで定義されている入れ子になった要素で発生する次のルートに向かって要素に親。</span><span class="sxs-lookup"><span data-stu-id="20bf5-120">(An exception is expression usages such as dynamic resources or binding; these will be unevaluated expressions.) As a consequence of the requirement that all properties are set, the sequence of <xref:System.Windows.FrameworkElement.Initialized> being raised by nested elements that are defined in markup appears to occur in order of deepest elements in the element tree first, then parent elements toward the root.</span></span> <span data-ttu-id="20bf5-121">この順序に従うのは、親子のリレーションシップおよびコンテインメントがプロパティであるためです。その結果、親のプロパティを設定する子要素も完全に初期化されるまで、親は初期化を報告できません。</span><span class="sxs-lookup"><span data-stu-id="20bf5-121">This order is because the parent-child relationships and containment are properties, and therefore the parent cannot report initialization until the child elements that fill the property are also completely initialized.</span></span>  
  
 <span data-ttu-id="20bf5-122">応答ハンドラーを作成する場合、<xref:System.Windows.FrameworkElement.Initialized>イベント、考慮する必要が、要素ツリーで (論理ツリーまたはビジュアル ツリーのいずれか)、ハンドラーがアタッチされている場合の周囲の他のすべての要素が作成されている、特にという保証はありません親要素です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-122">When you are writing handlers in response to the <xref:System.Windows.FrameworkElement.Initialized> event, you must consider that there is no guarantee that all other elements in the element tree (either logical tree or visual tree) around where the handler is attached have been created, particularly parent elements.</span></span> <span data-ttu-id="20bf5-123">メンバー変数が null である可能性や、基になるバインディングによってデータ ソースがまだ設定されていない可能性があります (式レベルでも)。</span><span class="sxs-lookup"><span data-stu-id="20bf5-123">Member variables may be null, or data sources might not yet be populated by the underlying binding (even at the expression level).</span></span>  
  
### <a name="loaded"></a><span data-ttu-id="20bf5-124">読み込み</span><span class="sxs-lookup"><span data-stu-id="20bf5-124">Loaded</span></span>  
 <span data-ttu-id="20bf5-125"><xref:System.Windows.FrameworkElement.Loaded>次に発生します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-125"><xref:System.Windows.FrameworkElement.Loaded> is raised next.</span></span> <span data-ttu-id="20bf5-126"><xref:System.Windows.FrameworkElement.Loaded>最終的なレンダリングの前に、レイアウト システムに表示するためのすべての必要な値が計算された後にイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-126">The <xref:System.Windows.FrameworkElement.Loaded> event is raised before the final rendering, but after the layout system has calculated all necessary values for rendering.</span></span> <span data-ttu-id="20bf5-127"><xref:System.Windows.FrameworkElement.Loaded>論理ツリー内に含まれる要素が完了して、HWND と表示画面を提供するプレゼンテーション ソースに接続することが必要です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-127"><xref:System.Windows.FrameworkElement.Loaded> entails that the logical tree that an element is contained within is complete, and connects to a presentation source that provides the HWND and the rendering surface.</span></span> <span data-ttu-id="20bf5-128">前のバージョンに標準的なデータ バインディング (他のプロパティまたは直接定義されたデータ ソースなどのローカル ソースにバインド) が発生している<xref:System.Windows.FrameworkElement.Loaded>です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-128">Standard data binding (binding to local sources, such as other properties or directly defined data sources) will have occurred prior to <xref:System.Windows.FrameworkElement.Loaded>.</span></span> <span data-ttu-id="20bf5-129">非同期データ バインディング (外部ソースまたは動的ソース) が発生する可能性もありますが、非同期であるという性質の定義から、その保証はできません。</span><span class="sxs-lookup"><span data-stu-id="20bf5-129">Asynchronous data binding (external or dynamic sources) might have occurred, but by definition of its asynchronous nature cannot be guaranteed to have occurred.</span></span>  
  
 <span data-ttu-id="20bf5-130">ためのメカニズム、<xref:System.Windows.FrameworkElement.Loaded>イベントが発生したとは異なる<xref:System.Windows.FrameworkElement.Initialized>です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-130">The mechanism by which the <xref:System.Windows.FrameworkElement.Loaded> event is raised is different than <xref:System.Windows.FrameworkElement.Initialized>.</span></span> <span data-ttu-id="20bf5-131"><xref:System.Windows.FrameworkElement.Initialized>イベントが完了した要素のツリーで直接調整なしの要素で発生した要素。</span><span class="sxs-lookup"><span data-stu-id="20bf5-131">The <xref:System.Windows.FrameworkElement.Initialized> event is raised element by element, without a direct coordination by a completed element tree.</span></span> <span data-ttu-id="20bf5-132">これに対し、<xref:System.Windows.FrameworkElement.Loaded>全体の要素ツリー (具体的には、論理ツリー) 全体で組織的な手段としてイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-132">By contrast, the <xref:System.Windows.FrameworkElement.Loaded> event is raised as a coordinated effort throughout the entire element tree (specifically, the logical tree).</span></span> <span data-ttu-id="20bf5-133">ツリー内のすべての要素が状態と見なされますが、読み込まれたときに、<xref:System.Windows.FrameworkElement.Loaded>イベントが最初にルート要素で発生しました。</span><span class="sxs-lookup"><span data-stu-id="20bf5-133">When all elements in the tree are in a state where they are considered loaded, the <xref:System.Windows.FrameworkElement.Loaded> event is first raised on the root element.</span></span> <span data-ttu-id="20bf5-134"><xref:System.Windows.FrameworkElement.Loaded>イベントが各子要素で連続して発生し、します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-134">The <xref:System.Windows.FrameworkElement.Loaded> event is then raised successively on each child element.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="20bf5-135">この動作は、表面上は、ルーティング イベントのトンネリングに似ているとも言えます。</span><span class="sxs-lookup"><span data-stu-id="20bf5-135">This behavior might superficially resemble tunneling for a routed event.</span></span> <span data-ttu-id="20bf5-136">ただし、イベントからイベントへと伝達される情報はありません。</span><span class="sxs-lookup"><span data-stu-id="20bf5-136">However, no information is carried from event to event.</span></span> <span data-ttu-id="20bf5-137">各要素が処理する機会を常にはその<xref:System.Windows.FrameworkElement.Loaded>イベント、およびイベント データを処理済みとしてマークすることも何も起こりませんその要素を超える。</span><span class="sxs-lookup"><span data-stu-id="20bf5-137">Each element always has the opportunity to handle its <xref:System.Windows.FrameworkElement.Loaded> event, and marking the event data as handled has no effect beyond that element.</span></span>  
  
### <a name="unloaded"></a><span data-ttu-id="20bf5-138">アンロードされました</span><span class="sxs-lookup"><span data-stu-id="20bf5-138">Unloaded</span></span>  
 <span data-ttu-id="20bf5-139"><xref:System.Windows.FrameworkElement.Unloaded>最後が発生し、プレゼンテーション ソースまたは削除されるビジュアルの親によって開始されます。</span><span class="sxs-lookup"><span data-stu-id="20bf5-139"><xref:System.Windows.FrameworkElement.Unloaded> is raised last and is initiated by either the presentation source or the visual parent being removed.</span></span> <span data-ttu-id="20bf5-140">ときに<xref:System.Windows.FrameworkElement.Unloaded>が発生し、イベント ソースの親である要素を処理 (によって決定される<xref:System.Windows.FrameworkElement.Parent%2A>プロパティ) または下方論理またはビジュアル ツリー内の要素で指定された可能性がありますが既に設定されていない、データ バインディングをリソースの参照の意味、スタイル可能性があります、標準または最後既知実行時の値に設定されていないとします。</span><span class="sxs-lookup"><span data-stu-id="20bf5-140">When <xref:System.Windows.FrameworkElement.Unloaded> is raised and handled, the element that is the event source parent (as determined by <xref:System.Windows.FrameworkElement.Parent%2A> property) or any given element upwards in the logical or visual trees may have already been unset, meaning that data binding, resource references, and styles may not be set to their normal or last known run-time value.</span></span>  
  
<a name="application_model_elements"></a>   
## <a name="lifetime-events-application-model-elements"></a><span data-ttu-id="20bf5-141">有効期間イベント アプリケーション モデルの要素</span><span class="sxs-lookup"><span data-stu-id="20bf5-141">Lifetime Events Application Model Elements</span></span>  
 <span data-ttu-id="20bf5-142">要素は、次のアプリケーション モデル要素の一般的な有効期間イベントでの構築: <xref:System.Windows.Application>、 <xref:System.Windows.Window>、 <xref:System.Windows.Controls.Page>、 <xref:System.Windows.Navigation.NavigationWindow>、および<xref:System.Windows.Controls.Frame>です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-142">Building on the common lifetime events for elements are the following application model elements: <xref:System.Windows.Application>, <xref:System.Windows.Window>, <xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, and <xref:System.Windows.Controls.Frame>.</span></span> <span data-ttu-id="20bf5-143">これらの要素は、共通の有効期間イベントを拡張して、特定の目的に関連するイベントを追加します。</span><span class="sxs-lookup"><span data-stu-id="20bf5-143">These extend the common lifetime events with additional events that are relevant to their specific purpose.</span></span> <span data-ttu-id="20bf5-144">これらの詳細については、次のトピックで説明しています。</span><span class="sxs-lookup"><span data-stu-id="20bf5-144">These are discussed in detail in the following locations:</span></span>  
  
-   <span data-ttu-id="20bf5-145"><xref:System.Windows.Application>:[アプリケーション管理の概要](../../../../docs/framework/wpf/app-development/application-management-overview.md)です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-145"><xref:System.Windows.Application>: [Application Management Overview](../../../../docs/framework/wpf/app-development/application-management-overview.md).</span></span>  
  
-   <span data-ttu-id="20bf5-146"><xref:System.Windows.Window>: [WPF Windows 概要](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md)です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-146"><xref:System.Windows.Window>: [WPF Windows Overview](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md).</span></span>  
  
-   <span data-ttu-id="20bf5-147"><xref:System.Windows.Controls.Page>、 <xref:System.Windows.Navigation.NavigationWindow>、および<xref:System.Windows.Controls.Frame>:[ナビゲーション概要](../../../../docs/framework/wpf/app-development/navigation-overview.md)です。</span><span class="sxs-lookup"><span data-stu-id="20bf5-147"><xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, and <xref:System.Windows.Controls.Frame>: [Navigation Overview](../../../../docs/framework/wpf/app-development/navigation-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="20bf5-148">関連項目</span><span class="sxs-lookup"><span data-stu-id="20bf5-148">See Also</span></span>  
 [<span data-ttu-id="20bf5-149">依存関係プロパティ値の優先順位</span><span class="sxs-lookup"><span data-stu-id="20bf5-149">Dependency Property Value Precedence</span></span>](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)  
 [<span data-ttu-id="20bf5-150">ルーティング イベントの概要</span><span class="sxs-lookup"><span data-stu-id="20bf5-150">Routed Events Overview</span></span>](../../../../docs/framework/wpf/advanced/routed-events-overview.md)
