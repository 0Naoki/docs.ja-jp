---
title: XAML リソース
ms.date: 03/30/2017
helpviewer_keywords:
- reusing resources [WPF]
- resources [WPF], reusing
- reusing commonly defined objects [WPF]
- XAML [WPF], reusing resources
ms.assetid: 91580b89-a0a8-4889-aecb-fddf8e63175f
ms.openlocfilehash: 738a4f397b1677b867126c7bb439b027f951baa0
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/22/2019
ms.locfileid: "69958815"
---
# <a name="xaml-resources"></a><span data-ttu-id="cce0b-102">XAML リソース</span><span class="sxs-lookup"><span data-stu-id="cce0b-102">XAML Resources</span></span>
<span data-ttu-id="cce0b-103">リソースは、アプリケーションのさまざまな場所で再利用できるオブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-103">A resource is an object that can be reused in different places in your application.</span></span> <span data-ttu-id="cce0b-104">リソースの例としては、ブラシやスタイルなどがあります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-104">Examples of resources include brushes and styles.</span></span> <span data-ttu-id="cce0b-105">この概要では、の[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]リソースを使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-105">This overview describes how to use resources in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="cce0b-106">また、コードを使用してリソースを作成してアクセスしたり、 [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]コードとを区別したりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-106">You can also create and access resources by using code, or interchangeably between code and [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="cce0b-107">詳細については、「[リソースとコード](resources-and-code.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cce0b-107">For more information, see [Resources and Code](resources-and-code.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="cce0b-108">このトピックで説明するリソースファイルは、「 [WPF アプリケーションリソース、コンテンツ、およびデータファイル](../app-development/wpf-application-resource-content-and-data-files.md)」で説明されているリソースファイルとは異なり、「[アプリケーションリソースの管理 (.net)」で説明されている埋め込みリソースまたはリンクされたリソースとは異なります](/visualstudio/ide/managing-application-resources-dotnet)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-108">The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet).</span></span>  

<a name="usingresources"></a>   
## <a name="using-resources-in-xaml"></a><span data-ttu-id="cce0b-109">XAML でのリソースの使用</span><span class="sxs-lookup"><span data-stu-id="cce0b-109">Using Resources in XAML</span></span>  
 <span data-ttu-id="cce0b-110">次の例では<xref:System.Windows.Media.SolidColorBrush> 、ページのルート要素のリソースとしてを定義します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-110">The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page.</span></span> <span data-ttu-id="cce0b-111">次に、リソースを参照し、このリソースを使用して<xref:System.Windows.Shapes.Ellipse> <xref:System.Windows.Controls.TextBlock>、、 <xref:System.Windows.Controls.Button>、などのいくつかの子要素のプロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-111">The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.</span></span>  
  
 [!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]  
  
 <span data-ttu-id="cce0b-112">すべてのフレームワークレベル要素 (<xref:System.Windows.FrameworkElement>また<xref:System.Windows.FrameworkContentElement>は) に<xref:System.Windows.FrameworkElement.Resources%2A>は、リソースを定義するリソース (として<xref:System.Windows.ResourceDictionary>) を含むプロパティであるプロパティがあります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-112">Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is the property that contains the resources (as a <xref:System.Windows.ResourceDictionary>) that a resource defines.</span></span> <span data-ttu-id="cce0b-113">任意の要素にリソースを定義できます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-113">You can define resources on any element.</span></span> <span data-ttu-id="cce0b-114">ただし、多くの場合、リソースはルート要素 (例では<xref:System.Windows.Controls.Page> ) で定義されています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-114">However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.</span></span>  
  
 <span data-ttu-id="cce0b-115">リソースディクショナリ内の各リソースには、一意のキーが必要です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-115">Each resource in a resource dictionary must have a unique key.</span></span> <span data-ttu-id="cce0b-116">マークアップでリソースを定義する場合は、 [X:Key ディレクティブ](../../xaml-services/x-key-directive.md)を使用して一意のキーを割り当てます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-116">When you define resources in markup, you assign the unique key through the [x:Key Directive](../../xaml-services/x-key-directive.md).</span></span> <span data-ttu-id="cce0b-117">通常、キーは文字列です。ただし、適切なマークアップ拡張機能を使用して、他のオブジェクトの種類に設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-117">Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.</span></span> <span data-ttu-id="cce0b-118">リソースの文字列以外のキーは[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]、の特定の機能領域 (特に、スタイル、コンポーネントリソース、データスタイル) で使用されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-118">Nonstring keys for resources are used by certain feature areas in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], notably for styles, component resources, and data styling.</span></span>  
  
 <span data-ttu-id="cce0b-119">リソースを定義した後、キー名を指定するリソースマークアップ拡張構文を使用して、プロパティ値に使用するリソースを参照できます。次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-119">After you define a resource, you can reference the resource to be used for a property value by using a resource markup extension syntax that specifies the key name, for example:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]  
  
 <span data-ttu-id="cce0b-120">前の例では、ローダー [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]がの<xref:System.Windows.Controls.Button> `{StaticResource MyBrush}` <xref:System.Windows.Controls.Control.Background%2A>プロパティの値を処理するときに、リソース検索ロジック<xref:System.Windows.Controls.Button>はまず、要素のリソースディクショナリをチェックします。</span><span class="sxs-lookup"><span data-stu-id="cce0b-120">In the preceding example, when the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element.</span></span> <span data-ttu-id="cce0b-121">に<xref:System.Windows.Controls.Button>リソースキー `MyBrush`の定義がない (そのリソースコレクションが空である) 場合、参照は次にの<xref:System.Windows.Controls.Button>親要素を確認します (つまり<xref:System.Windows.Controls.Page>、)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-121">If <xref:System.Windows.Controls.Button> does not have a definition of the resource key `MyBrush` (it does not; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="cce0b-122">したがって、 <xref:System.Windows.Controls.Page>ルート要素でリソースを定義すると、 <xref:System.Windows.Controls.Page>の論理ツリー内のすべての要素がそのリソースにアクセスできるようになります。また、同じリソースを再利用して、リソース<xref:System.Type>に対するを受け入れるプロパティの値を設定することもできます。を.</span><span class="sxs-lookup"><span data-stu-id="cce0b-122">Thus, when you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it, and you can reuse the same resource for setting the value of any property that accepts the <xref:System.Type> that the resource represents.</span></span> <span data-ttu-id="cce0b-123">前の例では、同じ`MyBrush`リソースによって、 <xref:System.Windows.Shapes.Shape.Fill%2A> <xref:System.Windows.Controls.Control.Background%2A>の<xref:System.Windows.Controls.Button> <xref:System.Windows.Shapes.Rectangle>とのの2つの異なるプロパティが設定されています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-123">In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.</span></span>  
  
<a name="staticdynamic"></a>   
## <a name="static-and-dynamic-resources"></a><span data-ttu-id="cce0b-124">静的および動的なリソース</span><span class="sxs-lookup"><span data-stu-id="cce0b-124">Static and Dynamic Resources</span></span>  
 <span data-ttu-id="cce0b-125">リソースは、静的リソースと動的リソースのどちらかとして参照できます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-125">A resource can be referenced as either a static resource or a dynamic resource.</span></span> <span data-ttu-id="cce0b-126">これは、 [StaticResource マークアップ拡張](staticresource-markup-extension.md)機能または[Dynamicresource マークアップ拡張機能](dynamicresource-markup-extension.md)のいずれかを使用して行います。</span><span class="sxs-lookup"><span data-stu-id="cce0b-126">This is done by using either the [StaticResource Markup Extension](staticresource-markup-extension.md) or the [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span> <span data-ttu-id="cce0b-127">マークアップ拡張機能は、マーク[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]アップ拡張機能によって属性文字列を処理し、オブジェクトを[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]ローダーに返すことで、オブジェクト参照を指定できるようにする機能です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-127">A markup extension is a feature of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader.</span></span> <span data-ttu-id="cce0b-128">マークアップ拡張機能の動作の詳細については、「[マークアップ拡張機能と WPF XAML](markup-extensions-and-wpf-xaml.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cce0b-128">For more information about markup extension behavior, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).</span></span>  
  
 <span data-ttu-id="cce0b-129">マークアップ拡張機能を使用する場合、通常は、設定されるプロパティのコンテキストで評価されるのではなく、特定のマークアップ拡張機能によって処理される1つ以上のパラメーターを文字列形式で指定します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-129">When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension, rather than being evaluated in the context of the property being set.</span></span> <span data-ttu-id="cce0b-130">[StaticResource マークアップ拡張機能](staticresource-markup-extension.md)は、使用可能なすべてのリソースディクショナリでそのキーの値を検索することによって、キーを処理します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-130">The [StaticResource Markup Extension](staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries.</span></span> <span data-ttu-id="cce0b-131">読み込み中に発生します。これは、読み込みプロセスが静的リソース参照を受け取るプロパティ値を割り当てる必要がある時点です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-131">This happens during loading, which is the point in time when the loading process needs to assign the property value that takes the static resource reference.</span></span> <span data-ttu-id="cce0b-132">代わりに、 [Dynamicresource マークアップ拡張機能](dynamicresource-markup-extension.md)は、式を作成することによってキーを処理します。この式は、アプリケーションが実際に実行されるまで未評価のままです。その時点で、式が評価され、値が提供されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-132">The [DynamicResource Markup Extension](dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value.</span></span>  
  
 <span data-ttu-id="cce0b-133">リソースを参照する場合、次の考慮事項は、静的リソース参照と動的リソース参照のどちらを使用するかに影響する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-133">When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:</span></span>  
  
- <span data-ttu-id="cce0b-134">アプリケーションのリソースを作成する方法の全体的な設計 (リソースのみのアセンブリでは、アプリケーション内で[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]は、アプリケーション内では疎ではありません)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-134">The overall design of how you create the resources for your application (per page, in the application, in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], in a resource only assembly).</span></span>  
  
- <span data-ttu-id="cce0b-135">アプリケーションの機能: アプリケーションの要件のリアルタイムの部分でリソースを更新していますか。</span><span class="sxs-lookup"><span data-stu-id="cce0b-135">The application functionality: is updating resources in real time part of your application requirements?</span></span>  
  
- <span data-ttu-id="cce0b-136">そのリソース参照型のそれぞれの参照動作。</span><span class="sxs-lookup"><span data-stu-id="cce0b-136">The respective lookup behavior of that resource reference type.</span></span>  
  
- <span data-ttu-id="cce0b-137">特定のプロパティまたはリソースの種類、およびそれらの型のネイティブな動作。</span><span class="sxs-lookup"><span data-stu-id="cce0b-137">The particular property or resource type, and the native behavior of those types.</span></span>  
  
### <a name="static-resources"></a><span data-ttu-id="cce0b-138">静的リソース</span><span class="sxs-lookup"><span data-stu-id="cce0b-138">Static Resources</span></span>  
 <span data-ttu-id="cce0b-139">静的リソース参照は、次のような状況に最も適しています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-139">Static resource references work best for the following circumstances:</span></span>  
  
- <span data-ttu-id="cce0b-140">アプリケーションの設計では、すべてのリソースのほとんどがページまたはアプリケーションレベルのリソースディクショナリに集中しています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-140">Your application design concentrates most of all of its resources into page or application level resource dictionaries.</span></span> <span data-ttu-id="cce0b-141">静的リソース参照は、ページの再読み込みなどの実行時の動作に基づいて再評価されることはないため、リソースごとに不要な動的リソース参照を大量に回避すると、パフォーマンス上の利点があります。アプリケーションの設計。</span><span class="sxs-lookup"><span data-stu-id="cce0b-141">Static resource references are not reevaluated based on runtime behaviors such as reloading a page, and therefore there can be some performance benefit to avoiding large numbers of dynamic resource references when they are not necessary per your resource and application design.</span></span>  
  
- <span data-ttu-id="cce0b-142"><xref:System.Windows.DependencyObject>またはにないプロパティの値を設定しようとしています。<xref:System.Windows.Freezable></span><span class="sxs-lookup"><span data-stu-id="cce0b-142">You are setting the value of a property that is not on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.</span></span>  
  
- <span data-ttu-id="cce0b-143">DLL にコンパイルされるリソースディクショナリを作成し、アプリケーションの一部としてパッケージ化するか、アプリケーション間で共有します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-143">You are creating a resource dictionary that will be compiled into a DLL, and packaged as part of the application or shared between applications.</span></span>  
  
- <span data-ttu-id="cce0b-144">カスタムコントロールのテーマを作成し、テーマ内で使用されるリソースを定義します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-144">You are creating a theme for a custom control, and are defining resources that are used within the themes.</span></span> <span data-ttu-id="cce0b-145">この場合、動的リソース参照の参照動作は通常は必要ありません。代わりに、静的なリソース参照の動作を使用して、参照が予測可能であり、テーマに自己完結している必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-145">For this case, you typically do not want the dynamic resource reference lookup behavior, you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.</span></span> <span data-ttu-id="cce0b-146">動的リソース参照を使用すると、テーマ内の参照が実行可能になるまでは評価されません。また、テーマが適用されると、テーマが参照しようとしているキーが一部のローカル要素によって再定義され、ローカル要素が前になります。検索でテーマ自体に。</span><span class="sxs-lookup"><span data-stu-id="cce0b-146">With a dynamic resource reference, even a reference within a theme is left unevaluated until runtime, and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.</span></span> <span data-ttu-id="cce0b-147">そのような場合は、テーマが期待どおりに動作しません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-147">If that happens, your theme will not behave in an expected manner.</span></span>  
  
- <span data-ttu-id="cce0b-148">リソースを使用して、多数の依存関係プロパティを設定しています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-148">You are using resources to set large numbers of dependency properties.</span></span> <span data-ttu-id="cce0b-149">依存関係プロパティの有効な値のキャッシュは、プロパティシステムによって有効になります。したがって、読み込み時に評価できる依存関係プロパティの値を指定する場合、依存関係プロパティは再評価式を確認する必要がなく、最後の有効な値。</span><span class="sxs-lookup"><span data-stu-id="cce0b-149">Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property does not have to check for a reevaluated expression and can return the last effective value.</span></span> <span data-ttu-id="cce0b-150">この手法は、パフォーマンス上の利点があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-150">This technique can be a performance benefit.</span></span>  
  
- <span data-ttu-id="cce0b-151">すべてのコンシューマーの基になるリソースを変更する必要がある場合、または[X:Shared 属性](../../xaml-services/x-shared-attribute.md)を使用してコンシューマーごとに個別の書き込み可能インスタンスを保持する場合。</span><span class="sxs-lookup"><span data-stu-id="cce0b-151">You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../../xaml-services/x-shared-attribute.md).</span></span>  
  
#### <a name="static-resource-lookup-behavior"></a><span data-ttu-id="cce0b-152">静的リソース参照の動作</span><span class="sxs-lookup"><span data-stu-id="cce0b-152">Static resource lookup behavior</span></span>  
  
1. <span data-ttu-id="cce0b-153">参照プロセスは、プロパティを設定する要素によって定義されたリソースディクショナリ内で、要求されたキーを確認します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-153">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
2. <span data-ttu-id="cce0b-154">次に、参照プロセスによって論理ツリーが上位に、親要素とそのリソースディクショナリに向かって走査されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-154">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="cce0b-155">これは、ルート要素に到達するまで続行されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-155">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="cce0b-156">次に、アプリケーションリソースが確認されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-156">Next, application resources are checked.</span></span> <span data-ttu-id="cce0b-157">アプリケーションリソースは、 <xref:System.Windows.Application> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]アプリケーションのオブジェクトによって定義されたリソースディクショナリ内のリソースです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-157">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
 <span data-ttu-id="cce0b-158">リソースディクショナリ内からの静的リソース参照は、リソース参照の前に既に定義されているリソースを参照する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-158">Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.</span></span> <span data-ttu-id="cce0b-159">前方参照は、静的リソース参照によって解決できません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-159">Forward references cannot be resolved by a static resource reference.</span></span> <span data-ttu-id="cce0b-160">このため、静的なリソース参照を使用する場合は、リソースディクショナリの構造を設計する必要があります。これは、リソースを使用することを目的としたリソースが、それぞれのリソースディクショナリの先頭に定義されているか、その近くに定義されているかを示します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-160">For this reason, if you use static resource references, you must design your resource dictionary structure such that resources intended for by-resource use are defined at or near the beginning of each respective resource dictionary.</span></span>  
  
 <span data-ttu-id="cce0b-161">静的リソース参照は、テーマまたはシステムリソースに拡張できますが、これはローダーが[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]要求を延期することによってのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-161">Static resource lookup can extend into themes, or into system resources, but this is supported only because the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader defers the request.</span></span> <span data-ttu-id="cce0b-162">遅延は、ページが読み込まれるときのランタイムテーマがアプリケーションに適切に適用されるようにするために必要です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-162">The deferral is necessary so that the runtime theme at the time the page loads applies properly to the application.</span></span> <span data-ttu-id="cce0b-163">ただし、にのみ存在することがわかっているキーへの静的リソース参照は、テーマまたはシステムリソースとしてのみ存在することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="cce0b-163">However, static resource references to keys that are known to only exist in themes or as system resources are not recommended.</span></span> <span data-ttu-id="cce0b-164">これは、ユーザーがリアルタイムでテーマを変更した場合に、このような参照が再評価されないためです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-164">This is because such references are not reevaluated if the theme is changed by the user in realtime.</span></span> <span data-ttu-id="cce0b-165">動的リソース参照は、テーマまたはシステムリソースを要求するときに信頼性が高くなります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-165">A dynamic resource reference is more reliable when you request theme or system resources.</span></span> <span data-ttu-id="cce0b-166">例外は、テーマ要素自体が別のリソースを要求する場合です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-166">The exception is when a theme element itself requests another resource.</span></span> <span data-ttu-id="cce0b-167">これらの参照は、前述の理由により、静的なリソース参照である必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-167">These references should be static resource references, for the reasons mentioned earlier.</span></span>  
  
 <span data-ttu-id="cce0b-168">静的リソース参照が見つからない場合の例外動作は異なります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-168">The exception behavior if a static resource reference is not found varies.</span></span> <span data-ttu-id="cce0b-169">リソースが遅延された場合は、実行時に例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-169">If the resource was deferred, then the exception occurs at runtime.</span></span> <span data-ttu-id="cce0b-170">リソースが遅延されていない場合は、読み込み時に例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-170">If the resource was not deferred, the exception occurs at load time.</span></span>  
  
### <a name="dynamic-resources"></a><span data-ttu-id="cce0b-171">動的リソース</span><span class="sxs-lookup"><span data-stu-id="cce0b-171">Dynamic Resources</span></span>  
 <span data-ttu-id="cce0b-172">動的リソースは、次のような状況で最適に機能します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-172">Dynamic resources work best for the following circumstances:</span></span>  
  
- <span data-ttu-id="cce0b-173">リソースの値は、ランタイムまで不明な条件に依存します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-173">The value of the resource depends on conditions that are not known until runtime.</span></span> <span data-ttu-id="cce0b-174">これには、システムリソース、またはユーザーが設定できるリソースが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-174">This includes system resources, or resources that are otherwise user settable.</span></span> <span data-ttu-id="cce0b-175">たとえば、、 <xref:System.Windows.SystemColors> <xref:System.Windows.SystemFonts>、または<xref:System.Windows.SystemParameters>によって公開されているシステムプロパティを参照する setter 値を作成できます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-175">For example, you can create setter values that refer to system properties, as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>.</span></span> <span data-ttu-id="cce0b-176">これらの値は、最終的にユーザーおよびオペレーティングシステムのランタイム環境から取得されるため、真に動的です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-176">These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.</span></span> <span data-ttu-id="cce0b-177">また、変更できるアプリケーションレベルのテーマがある場合もあります。この場合、ページレベルのリソースへのアクセスでも変更をキャプチャする必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-177">You might also have application-level themes that can change, where page-level resource access must also capture the change.</span></span>  
  
- <span data-ttu-id="cce0b-178">カスタムコントロールのテーマスタイルを作成または参照している。</span><span class="sxs-lookup"><span data-stu-id="cce0b-178">You are creating or referencing theme styles for a custom control.</span></span>  
  
- <span data-ttu-id="cce0b-179">アプリケーションの有効期間<xref:System.Windows.ResourceDictionary>中にの内容を調整する場合。</span><span class="sxs-lookup"><span data-stu-id="cce0b-179">You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an application lifetime.</span></span>  
  
- <span data-ttu-id="cce0b-180">相互依存関係を持つ複雑なリソース構造があり、前方参照が必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-180">You have a complicated resource structure that has interdependencies, where a forward reference may be required.</span></span> <span data-ttu-id="cce0b-181">静的リソース参照では前方参照はサポートされていませんが、動的リソース参照では、リソースをランタイムに評価する必要がなく、前方参照が関連する概念ではないため、動的リソース参照はこれらをサポートします。</span><span class="sxs-lookup"><span data-stu-id="cce0b-181">Static resource references do not support forward references, but dynamic resource references do support them because the resource does not need to be evaluated until runtime, and forward references are therefore not a relevant concept.</span></span>  
  
- <span data-ttu-id="cce0b-182">コンパイルまたはワーキングセットの観点から特に大きいリソースを参照しているため、ページの読み込み時にリソースがすぐには使用されない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-182">You are referencing a resource that is particularly large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.</span></span> <span data-ttu-id="cce0b-183">静的リソース参照は、ページ[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]が読み込まれるときに常に読み込まれます。ただし、動的リソース参照は、実際に使用されるまで読み込まれません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-183">Static resource references always load from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] when the page loads; however, a dynamic resource reference does not load until it is actually used.</span></span>  
  
- <span data-ttu-id="cce0b-184">テーマまたはその他のユーザー設定の影響を受ける他の値からセッター値が取得される可能性があるスタイルを作成しています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-184">You are creating a style where setter values might come from other values that are influenced by themes or other user settings.</span></span>  
  
- <span data-ttu-id="cce0b-185">アプリケーションの有効期間中に論理ツリー内で親される可能性のある要素にリソースを適用しています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-185">You are applying resources to elements that might be reparented in the logical tree during application lifetime.</span></span> <span data-ttu-id="cce0b-186">親を変更すると、リソースルックアップスコープも変更される可能性があるため、新しいスコープに基づいて親要素のリソースを再評価するには、常に動的リソース参照を使用します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-186">Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.</span></span>  
  
#### <a name="dynamic-resource-lookup-behavior"></a><span data-ttu-id="cce0b-187">動的リソース参照の動作</span><span class="sxs-lookup"><span data-stu-id="cce0b-187">Dynamic resource lookup behavior</span></span>  
 <span data-ttu-id="cce0b-188">動的リソース参照のリソース参照動作は、または<xref:System.Windows.FrameworkElement.FindResource%2A> <xref:System.Windows.FrameworkElement.SetResourceReference%2A>を呼び出すと、コードの参照動作と同じです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-188">Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>.</span></span>  
  
1. <span data-ttu-id="cce0b-189">参照プロセスは、プロパティを設定する要素によって定義されたリソースディクショナリ内で、要求されたキーを確認します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-189">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
    - <span data-ttu-id="cce0b-190">要素がプロパティ<xref:System.Windows.FrameworkElement.Style%2A> <xref:System.Windows.Style.Resources%2A>を定義している場合は、 <xref:System.Windows.Style>内のディクショナリがチェックされます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-190">If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.Style.Resources%2A> dictionary within the <xref:System.Windows.Style> is checked.</span></span>  
  
    - <span data-ttu-id="cce0b-191">要素がプロパティ<xref:System.Windows.Controls.Control.Template%2A> <xref:System.Windows.FrameworkTemplate.Resources%2A>を定義している場合は、 <xref:System.Windows.FrameworkTemplate>内のディクショナリがチェックされます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-191">If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources%2A> dictionary within the <xref:System.Windows.FrameworkTemplate> is checked.</span></span>  
  
2. <span data-ttu-id="cce0b-192">次に、参照プロセスによって論理ツリーが上位に、親要素とそのリソースディクショナリに向かって走査されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-192">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="cce0b-193">これは、ルート要素に到達するまで続行されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-193">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="cce0b-194">次に、アプリケーションリソースが確認されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-194">Next, application resources are checked.</span></span> <span data-ttu-id="cce0b-195">アプリケーションリソースは、 <xref:System.Windows.Application> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]アプリケーションのオブジェクトによって定義されたリソースディクショナリ内のリソースです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-195">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
4. <span data-ttu-id="cce0b-196">現在アクティブなテーマのテーマリソースディクショナリがチェックされます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-196">Theme resource dictionary is checked, for the currently active theme.</span></span> <span data-ttu-id="cce0b-197">実行時にテーマが変更された場合、値は再評価されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-197">If the theme changes at runtime, the value is reevaluated.</span></span>  
  
5. <span data-ttu-id="cce0b-198">システムリソースがチェックされます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-198">System resources are checked.</span></span>  
  
 <span data-ttu-id="cce0b-199">例外の動作 (存在する場合) は、次のように異なります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-199">Exception behavior (if any) varies:</span></span>  
  
- <span data-ttu-id="cce0b-200">リソースが<xref:System.Windows.FrameworkElement.FindResource%2A>呼び出しによって要求され、が見つからなかった場合は、例外が発生します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-200">If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call, and was not found, an exception is raised.</span></span>  
  
- <span data-ttu-id="cce0b-201">リソースが<xref:System.Windows.FrameworkElement.TryFindResource%2A>呼び出しによって要求され、が見つからなかった場合は、例外は発生しませんが`null`、戻り値はになります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-201">If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call, and was not found, no exception is raised, but the returned value is `null`.</span></span> <span data-ttu-id="cce0b-202">設定するプロパティがを受け入れ`null`ない場合でも、より深い例外が発生する可能性があります (これは、設定されている個々のプロパティによって異なります)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-202">If the property being set does not accept `null`, then it is still possible that a deeper exception will be raised (this depends on the individual property being set).</span></span>  
  
- <span data-ttu-id="cce0b-203">リソースがの[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]動的リソース参照によって要求され、見つからなかった場合、動作は一般的なプロパティシステムによって異なりますが、一般的な動作は、リソースが存在するレベルでプロパティ設定操作が行われなかった場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-203">If a resource was requested by a dynamic resource reference in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists.</span></span> <span data-ttu-id="cce0b-204">たとえば、評価できないリソースを使用して個々の button 要素の背景を設定しようとした場合、値は設定されませんが、プロパティシステムと値の優先順位の他の参加者から有効な値を取得できます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-204">For instance, if you attempt to set the background on a an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.</span></span> <span data-ttu-id="cce0b-205">たとえば、背景値は、ローカルに定義されたボタンスタイルまたはテーマスタイルから取得される場合があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-205">For instance, the background value might still come from a locally defined button style, or from the theme style.</span></span> <span data-ttu-id="cce0b-206">テーマスタイルで定義されていないプロパティの場合、リソースの評価に失敗した後の有効値は、プロパティメタデータの既定値から取得される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-206">For properties that are not defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.</span></span>  
  
#### <a name="restrictions"></a><span data-ttu-id="cce0b-207">制約</span><span class="sxs-lookup"><span data-stu-id="cce0b-207">Restrictions</span></span>  
 <span data-ttu-id="cce0b-208">動的リソース参照には、いくつかの注目すべき制限があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-208">Dynamic resource references have some notable restrictions.</span></span> <span data-ttu-id="cce0b-209">少なくとも次のいずれかが true である必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-209">At least one of the following must be true:</span></span>  
  
- <span data-ttu-id="cce0b-210">設定するプロパティは、 <xref:System.Windows.FrameworkElement>または<xref:System.Windows.FrameworkContentElement>のプロパティである必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-210">The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="cce0b-211">このプロパティは、 <xref:System.Windows.DependencyProperty>でサポートされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-211">That property must be backed by a <xref:System.Windows.DependencyProperty>.</span></span>  
  
- <span data-ttu-id="cce0b-212">参照は、 <xref:System.Windows.Style> <xref:System.Windows.Setter>内の値を対象としています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-212">The reference is for a value within a <xref:System.Windows.Style><xref:System.Windows.Setter>.</span></span>  
  
- <span data-ttu-id="cce0b-213">設定する<xref:System.Windows.Freezable>プロパティは、プロパティ<xref:System.Windows.FrameworkElement> <xref:System.Windows.FrameworkContentElement>またはプロパティの値または値として指定されたのプロパティである必要があります。<xref:System.Windows.Setter></span><span class="sxs-lookup"><span data-stu-id="cce0b-213">The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.</span></span>  
  
 <span data-ttu-id="cce0b-214">設定するプロパティはプロパティ<xref:System.Windows.DependencyProperty>または<xref:System.Windows.Freezable>プロパティである必要があるため、プロパティの変更 (動的リソース値の変更) がプロパティシステムによって確認されるため、ほとんどのプロパティ変更が UI に反映される可能性があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-214">Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system.</span></span> <span data-ttu-id="cce0b-215">ほとんどのコントロールには、 <xref:System.Windows.DependencyProperty>変更やそのプロパティがレイアウトに影響を与える可能性がある場合に、コントロールの別のレイアウトを強制的に適用するロジックが含まれます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-215">Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout.</span></span> <span data-ttu-id="cce0b-216">ただし、 [Dynamicresource マークアップ拡張機能](dynamicresource-markup-extension.md)が値として使用されているすべてのプロパティでは、UI でリアルタイムに更新されるように値を提供することが保証されています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-216">However, not all properties that have a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) as their value are guaranteed to provide the value in such a way that they update in realtime in the UI.</span></span> <span data-ttu-id="cce0b-217">この機能は、プロパティによって異なりますが、プロパティを所有する型やアプリケーションの論理構造によっても異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-217">That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your application.</span></span>  
  
<a name="stylesimplicitkeys"></a>   
## <a name="styles-datatemplates-and-implicit-keys"></a><span data-ttu-id="cce0b-218">スタイル、DataTemplates、および暗黙のキー</span><span class="sxs-lookup"><span data-stu-id="cce0b-218">Styles, DataTemplates, and Implicit Keys</span></span>  
 <span data-ttu-id="cce0b-219">前に、内の<xref:System.Windows.ResourceDictionary>すべての項目にキーが必要であることが示されていました。</span><span class="sxs-lookup"><span data-stu-id="cce0b-219">Earlier, it was stated that all items in a <xref:System.Windows.ResourceDictionary> must have a key.</span></span> <span data-ttu-id="cce0b-220">ただし、これは、すべてのリソースに明示的`x:Key`なが必要であるという意味ではありません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-220">However, that does not mean that all resources must have an explicit `x:Key`.</span></span> <span data-ttu-id="cce0b-221">オブジェクトの種類によっては、リソースとして定義されている場合、キー値が別のプロパティの値に関連付けられている場合に、暗黙的なキーをサポートします。</span><span class="sxs-lookup"><span data-stu-id="cce0b-221">Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.</span></span> <span data-ttu-id="cce0b-222">これは暗黙のキー `x:Key`として知られていますが、属性は明示的なキーです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-222">This is known as an implicit key, whereas an `x:Key` attribute is an explicit key.</span></span> <span data-ttu-id="cce0b-223">明示的なキーを指定することで、暗黙のキーを上書きできます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-223">You can overwrite any implicit key by specifying an explicit key.</span></span>  
  
 <span data-ttu-id="cce0b-224">リソースの非常に重要なシナリオの1つは<xref:System.Windows.Style>、を定義する場合です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-224">One very important scenario for resources is when you define a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="cce0b-225">実際、は、 <xref:System.Windows.Style>スタイルが本質的に再利用されることを意図しているため、ほとんどの場合、リソースディクショナリ内のエントリとして定義されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-225">In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.</span></span> <span data-ttu-id="cce0b-226">スタイルの詳細については、「スタイル[とテンプレート](../controls/styling-and-templating.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cce0b-226">For more information about styles, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>  
  
 <span data-ttu-id="cce0b-227">コントロールのスタイルは、を使用して作成することも、暗黙的なキーを使用して参照することもできます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-227">Styles for controls can be both created with and referenced with an implicit key.</span></span> <span data-ttu-id="cce0b-228">コントロールの既定の外観を定義するテーマスタイルは、この暗黙のキーに依存します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-228">The theme styles that define the default appearance of a control rely on this implicit key.</span></span> <span data-ttu-id="cce0b-229">要求の観点から見た暗黙のキーは、 <xref:System.Type>コントロール自体のです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-229">The implicit key from the standpoint of requesting it is the <xref:System.Type> of the control itself.</span></span> <span data-ttu-id="cce0b-230">リソースの定義の観点からの暗黙のキーは<xref:System.Windows.Style.TargetType%2A> 、スタイルのです。</span><span class="sxs-lookup"><span data-stu-id="cce0b-230">The implicit key from the standpoint of defining the resource is the <xref:System.Windows.Style.TargetType%2A> of the style.</span></span> <span data-ttu-id="cce0b-231">したがって、カスタムコントロールのテーマを作成していて、既存のテーマスタイルと対話するスタイルを作成している場合は、その<xref:System.Windows.Style>に対して[x:Key ディレクティブ](../../xaml-services/x-key-directive.md)を指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-231">Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../../xaml-services/x-key-directive.md) for that <xref:System.Windows.Style>.</span></span> <span data-ttu-id="cce0b-232">また、テーマ付きスタイルを使用する場合は、スタイルを指定する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="cce0b-232">And if you want to use the themed styles, you do not need to specify any style at all.</span></span> <span data-ttu-id="cce0b-233">たとえば、次のスタイル定義は、 <xref:System.Windows.Style>リソースがキーを持っていないように見える場合でも動作します。</span><span class="sxs-lookup"><span data-stu-id="cce0b-233">For instance, the following style definition works, even though the <xref:System.Windows.Style> resource does not appear to have a key:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]  
  
 <span data-ttu-id="cce0b-234">このスタイルには、暗黙のキー `typeof(` <xref:System.Windows.Controls.Button> `)`というキーが実際に含まれています。</span><span class="sxs-lookup"><span data-stu-id="cce0b-234">That style really does have a key: the implicit key `typeof(`<xref:System.Windows.Controls.Button>`)`.</span></span> <span data-ttu-id="cce0b-235">マークアップでは、を型<xref:System.Windows.Style.TargetType%2A>名として直接指定できます (または、必要に応じて[{x:Type...}](../../xaml-services/x-type-markup-extension.md)を使用することもできます)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-235">In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../../xaml-services/x-type-markup-extension.md)</span></span> <span data-ttu-id="cce0b-236">を返す場合<xref:System.Type>は。</span><span class="sxs-lookup"><span data-stu-id="cce0b-236">to return a <xref:System.Type>.</span></span>  
  
 <span data-ttu-id="cce0b-237">によっ[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]て使用される既定のテーマスタイル機構を使用して、そのスタイルは<xref:System.Windows.Controls.Button> 、その<xref:System.Windows.FrameworkElement.Style%2A>プロパティまたは特定の<xref:System.Windows.Controls.Button>リソースを指定しようとしない場合でも、ページ上ののランタイムスタイルとして適用されます。スタイルへの参照。</span><span class="sxs-lookup"><span data-stu-id="cce0b-237">Through the default theme style mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself does not attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style.</span></span> <span data-ttu-id="cce0b-238">ページで定義されているスタイルは、テーマ辞書のスタイルと同じキーを使用して、参照シーケンスの前にテーマディクショナリのスタイルよりも前にあります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-238">Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.</span></span> <span data-ttu-id="cce0b-239">ページ内の任意`<Button>Hello</Button>`の`Button`場所を指定するだけで、で<xref:System.Windows.Style.TargetType%2A>定義したスタイルがそのボタンに適用されます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-239">You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button.</span></span> <span data-ttu-id="cce0b-240">必要に応じて、マークアップでわかりやすくするために、と<xref:System.Windows.Style.TargetType%2A>同じ型の値を持つスタイルを明示的にキー指定することもできますが、これは省略可能です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-240">If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A>, for clarity in your markup, but that is optional.</span></span>  
  
 <span data-ttu-id="cce0b-241">がの場合<xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> 、スタイルの暗黙のキーはコントロールに適用されませ<xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A>ん (これは`true` 、コントロールのインスタンスで明示的にではなく、コントロールクラスのネイティブ動作の一部として設定されることもあります)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-241">Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true` (also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control).</span></span> <span data-ttu-id="cce0b-242">また、派生クラスのシナリオで暗黙のキーをサポートするには、コントロール<xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>をオーバーライドする必要があります ( [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]の一部として提供されるすべての既存のコントロール)。</span><span class="sxs-lookup"><span data-stu-id="cce0b-242">Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] do this).</span></span> <span data-ttu-id="cce0b-243">スタイル、テーマ、およびコントロールのデザインの詳細については、「[スタイルコントロールを設計するためのガイドライン](../controls/guidelines-for-designing-stylable-controls.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cce0b-243">For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../controls/guidelines-for-designing-stylable-controls.md).</span></span>  
  
 <span data-ttu-id="cce0b-244"><xref:System.Windows.DataTemplate>には、暗黙のキーもあります。</span><span class="sxs-lookup"><span data-stu-id="cce0b-244"><xref:System.Windows.DataTemplate> also has an implicit key.</span></span> <span data-ttu-id="cce0b-245">の<xref:System.Windows.DataTemplate>暗黙のキー <xref:System.Windows.DataTemplate.DataType%2A>は、プロパティ値です。</span><span class="sxs-lookup"><span data-stu-id="cce0b-245">The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value.</span></span> <span data-ttu-id="cce0b-246"><xref:System.Windows.DataTemplate.DataType%2A>は、 [{x:Type...}](../../xaml-services/x-type-markup-extension.md)を明示的に使用するのではなく、型の名前として指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="cce0b-246"><xref:System.Windows.DataTemplate.DataType%2A> can also be specified as the name of the type rather than explicitly using [{x:Type...}](../../xaml-services/x-type-markup-extension.md).</span></span> <span data-ttu-id="cce0b-247">詳細については、「[データテンプレートの概要](../data/data-templating-overview.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="cce0b-247">For details, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cce0b-248">関連項目</span><span class="sxs-lookup"><span data-stu-id="cce0b-248">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="cce0b-249">アプリケーション リソース</span><span class="sxs-lookup"><span data-stu-id="cce0b-249">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="cce0b-250">リソースとコード</span><span class="sxs-lookup"><span data-stu-id="cce0b-250">Resources and Code</span></span>](resources-and-code.md)
- [<span data-ttu-id="cce0b-251">リソースを定義および参照する</span><span class="sxs-lookup"><span data-stu-id="cce0b-251">Define and Reference a Resource</span></span>](how-to-define-and-reference-a-resource.md)
- [<span data-ttu-id="cce0b-252">アプリケーション管理の概要</span><span class="sxs-lookup"><span data-stu-id="cce0b-252">Application Management Overview</span></span>](../app-development/application-management-overview.md)
- [<span data-ttu-id="cce0b-253">x:Type マークアップ拡張機能</span><span class="sxs-lookup"><span data-stu-id="cce0b-253">x:Type Markup Extension</span></span>](../../xaml-services/x-type-markup-extension.md)
- [<span data-ttu-id="cce0b-254">StaticResource のマークアップ拡張機能</span><span class="sxs-lookup"><span data-stu-id="cce0b-254">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="cce0b-255">DynamicResource マークアップ拡張</span><span class="sxs-lookup"><span data-stu-id="cce0b-255">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
