---
title: フィードのカスタマイズ (WCF Data Services)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, feeds
- WCF Data Services, Atom protocol
- Atom Publishing Protocol [WCF Data Services]
- WCF Data Services, customizing feeds
ms.assetid: 0d1a39bc-6462-4683-bd7d-e74e0fd28a85
ms.openlocfilehash: b4ea05b0112af4c1dcb6308a08ab3b31c586fbe8
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/07/2019
ms.locfileid: "70790857"
---
# <a name="feed-customization-wcf-data-services"></a><span data-ttu-id="9df3c-102">フィードのカスタマイズ (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="9df3c-102">Feed Customization (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="9df3c-103">を使用してデータをフィードとして公開します。[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9df3c-103">uses the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to expose data as a feed.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="9df3c-104">では、データフィードに Atom 形式と JavaScript Object Notation (JSON) 形式の両方をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="9df3c-104">supports both Atom and JavaScript Object Notation (JSON) formats for data feeds.</span></span> <span data-ttu-id="9df3c-105">Atom フィードを使用すると、 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]は、エンティティやリレーションシップなどのデータを、HTTP メッセージの本文に含めることができる XML 形式にシリアル化するための標準的な方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-105">When you use an Atom feed, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] provides a standard method to serialize data, such as entities and relationships, into an XML format that can be included in the body of HTTP message.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="9df3c-106">エンティティと Atom 要素に格納されているデータ間の既定のエンティティプロパティマッピングを定義します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-106">defines a default entity-property mapping between the data that is contained in entities and Atom elements.</span></span> <span data-ttu-id="9df3c-107">詳細については[、「OData:Atom 形式](https://go.microsoft.com/fwlink/?LinkID=185794)。</span><span class="sxs-lookup"><span data-stu-id="9df3c-107">For more information, see [OData: Atom Format](https://go.microsoft.com/fwlink/?LinkID=185794).</span></span>  
  
 <span data-ttu-id="9df3c-108">場合によっては、データ サービスから返されるプロパティのデータを、標準のフィードの形式ではなくカスタマイズした方法でシリアル化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-108">You may have an application scenario that requires that the property data returned by the data service be serialized in a customized manner rather than in the standard feed format.</span></span> <span data-ttu-id="9df3c-109">で[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]は、データフィードのシリアル化をカスタマイズして、エンティティのプロパティを、エントリの未使用の要素や属性、またはフィード内のエントリのカスタム要素にマップできるようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-109">With [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], you can customize the serialization in a data feed so that properties of an entity may be mapped to unused elements and attributes of an entry or to custom elements of an entry in the feed.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9df3c-110">フィードのカスタマイズは、Atom フィードでのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-110">Feed customization is only supported for Atom feeds.</span></span> <span data-ttu-id="9df3c-111">返されたフィードに対して JSON 形式が要求されたときは、カスタム フィードが返されません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-111">Custom feeds are not returned when the JSON format is requested for the returned feed.</span></span>  
  
 <span data-ttu-id="9df3c-112">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] を使用すると、Atom ペイロードに対するエンティティとプロパティの代替マッピングは、属性をデータ モデルのエンティティ型に手動で適用することによって定義できます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-112">With [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can define an alternate entity-property mapping for an Atom payload by manually applying attributes to entity types in the data model.</span></span> <span data-ttu-id="9df3c-113">これらの属性の適用方法は、データ サービスのデータ ソース プロバイダーによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-113">The data source provider of the data service determines how you should apply these attributes.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="9df3c-114">カスタム フィードを定義する場合、カスタム マッピングが定義されているすべてのエンティティ プロパティが投影に含まれることを保証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-114">When you define custom feeds, you must guarantee that all entity properties that have custom mappings defined are included in the projection.</span></span> <span data-ttu-id="9df3c-115">マップされているエンティティ プロパティがこの射影に含まれていない場合、データの損失が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-115">When a mapped entity property is not included in the projection, data loss might occur.</span></span> <span data-ttu-id="9df3c-116">詳細については、「[クエリプロジェクション](query-projections-wcf-data-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9df3c-116">For more information, see [Query Projections](query-projections-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-the-entity-framework-provider"></a><span data-ttu-id="9df3c-117">Entity Framework プロバイダーを使用したフィードのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9df3c-117">Customizing Feeds with the Entity Framework Provider</span></span>  
 <span data-ttu-id="9df3c-118">[!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] プロバイダーで使用されるデータ モデルは、.edmx ファイルの XML として表現されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-118">The data model used with the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider is represented as XML in the .edmx file.</span></span> <span data-ttu-id="9df3c-119">この場合、カスタム フィードを定義する属性が、データ モデルのエンティティ型とプロパティを表現する `EntityType` および `Property` 要素に追加されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-119">In this case, the attributes that define custom feeds are added to the `EntityType` and `Property` elements that represent entity types and properties in the data model.</span></span> <span data-ttu-id="9df3c-120">これらのフィードのカスタマイズ属性は、 [MC-CSDL\]で\[定義されていません。概念スキーマ定義ファイル形式](https://go.microsoft.com/fwlink/?LinkId=159072)。 [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)]プロバイダーがデータモデルを定義するために使用する形式です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-120">These feed customization attributes are not defined in [\[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072), which is the format that the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider uses to define the data model.</span></span> <span data-ttu-id="9df3c-121">したがって、フィードのカスタマイズ属性を特定のスキーマ名前空間で宣言する必要があります。これは、`m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"` として定義されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-121">Therefore, you must declare feed customization attributes in a specific schema namespace, which is defined as `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span></span> <span data-ttu-id="9df3c-122">次の XML フラグメントは、`Property`、`Products`、および `ProductName` プロパティを定義する `ReorderLevel` エンティティ型の `UnitsInStock` 要素に適用されたフィードのカスタマイズ属性を示します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-122">The following XML fragment shows feed customization attributes applied to `Property` elements of the `Products` entity type that define the `ProductName`, `ReorderLevel`, and `UnitsInStock` properties.</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedAttributes](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/northwind.csdl#edmfeedattributes)]  
  
 <span data-ttu-id="9df3c-123">これらの属性によって `Products` エンティティ セットに対して次のカスタム データ フィードが生成されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-123">These attributes produce the following customized data feed for the `Products` entity set.</span></span> <span data-ttu-id="9df3c-124">このカスタム データ フィードでは、`ProductName` プロパティ値が `author` 要素内に加えて、`ProductName` プロパティ要素としても表示されます。`UnitsInStock` プロパティは、一意の名前空間、および属性としての `ReorderLevel` プロパティと共にカスタム要素に表示されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-124">In the customized data feed, the `ProductName` property value is displayed in both in the `author` element and as the `ProductName` property element, and the `UnitsInStock` property is displayed in a custom element that has its own unique namespace and with the `ReorderLevel` property as an attribute:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedResultProduct](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/edmfeedresult.xml#edmfeedresultproduct)]  
  
 <span data-ttu-id="9df3c-125">詳細については、「[方法 :Entity Framework プロバイダー](how-to-customize-feeds-with-ef-provider-wcf-data-services.md)でフィードをカスタマイズします。</span><span class="sxs-lookup"><span data-stu-id="9df3c-125">For more information, see [How to: Customize Feeds with the Entity Framework Provider](how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9df3c-126">データ モデルへの拡張はエンティティ デザイナーでサポートされていないので、データ モデルを含む XML ファイルを手動で変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-126">Because extensions to the data model are not supported by the Entity Designer, you must manually modify the XML file that contains the data model.</span></span> <span data-ttu-id="9df3c-127">Entity Data Model ツールによって生成される .edmx ファイルの詳細については、「 [.Edmx ファイルの概要」 (Entity Framework)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982042(v=vs.100))を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9df3c-127">For more information about the .edmx file that is generated by the Entity Data Model tools, see [.edmx File Overview (Entity Framework)](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc982042(v=vs.100)).</span></span>  
  
### <a name="custom-feed-attributes"></a><span data-ttu-id="9df3c-128">カスタム フィード属性</span><span class="sxs-lookup"><span data-stu-id="9df3c-128">Custom Feed Attributes</span></span>  
 <span data-ttu-id="9df3c-129">次の表に、データ モデルを定義する概念スキーマ定義言語 (CSDL) に追加できるフィードをカスタマイズする XML 属性を示します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-129">The following table shows the XML attributes that customize feeds that you can add to the conceptual schema definition language (CSDL) that defines the data model.</span></span> <span data-ttu-id="9df3c-130">これらの属性は、<xref:System.Data.Services.Common.EntityPropertyMappingAttribute> のプロパティと同等です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-130">These attributes are equivalent to the properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> used with the reflection provider.</span></span>  
  
|<span data-ttu-id="9df3c-131">属性名</span><span class="sxs-lookup"><span data-stu-id="9df3c-131">Attribute name</span></span>|<span data-ttu-id="9df3c-132">説明</span><span class="sxs-lookup"><span data-stu-id="9df3c-132">Description</span></span>|  
|--------------------|-----------------|  
|`FC_ContentKind`|<span data-ttu-id="9df3c-133">コンテンツの種類を示します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-133">Indicates the type of the content.</span></span> <span data-ttu-id="9df3c-134">次のキーワードは、配信コンテンツの種類を定義します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-134">The following keywords define syndication content types.</span></span><br /><br /> <span data-ttu-id="9df3c-135">`text:`プロパティ値は、フィードのテキストとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-135">`text:` The property value is displayed in the feed as text.</span></span><br /><br /> <span data-ttu-id="9df3c-136">`html:`プロパティ値は、HTML としてフィードに表示されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-136">`html:` The property value is displayed in the feed as HTML.</span></span><br /><br /> <span data-ttu-id="9df3c-137">`xhtml:`プロパティ値は、XML 形式の HTML としてフィードに表示されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-137">`xhtml:` The property value is displayed in the feed as XML-formatted HTML.</span></span><br /><br /> <span data-ttu-id="9df3c-138">これらのキーワードは、リフレクション プロバイダーと共に使用する <xref:System.Data.Services.Common.SyndicationTextContentKind> 列挙の値と同等です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-138">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationTextContentKind> enumeration used with the reflection provider.</span></span><br /><br /> <span data-ttu-id="9df3c-139">この属性は、`FC_NsPrefix` および `FC_NsUri` 属性が使用されているときはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-139">This attribute is not supported when the `FC_NsPrefix` and `FC_NsUri` attributes are used.</span></span><br /><br /> <span data-ttu-id="9df3c-140">`xhtml` 属性の値として `FC_ContentKind` を指定する場合、そのプロパティ値に正しい形式の XML が含まれることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-140">When you specify a value of `xhtml` for the `FC_ContentKind` attribute, you must ensure that the property value contains properly formatted XML.</span></span> <span data-ttu-id="9df3c-141">データ サービスは、変換を行わずに値を返します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-141">The data service returns the value without performing any transformations.</span></span> <span data-ttu-id="9df3c-142">さらに、返された XML 内の XML 要素のプレフィックスに名前空間 URI、およびマップされたフィード内で定義されたプレフィックスが含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-142">You must also ensure that any XML element prefixes in the returned XML have a namespace URI and prefix defined in the mapped feed.</span></span>|  
|`FC_KeepInContent`|<span data-ttu-id="9df3c-143">参照されたプロパティ値をフィードのコンテンツ セクションおよびマップされた場所の両方に含める必要があることを示します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-143">Indicates that the referenced property value should be included both in the content section of the feed and in the mapped location.</span></span> <span data-ttu-id="9df3c-144">有効値は `true` または `false` です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-144">Valid values are `true` and `false`.</span></span> <span data-ttu-id="9df3c-145">結果として得られるフィードを以前のバージョン[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]のとの下位互換性`true`を持たせるには、の値を指定して、その値がフィードのコンテンツセクションに確実に含まれるようにします。</span><span class="sxs-lookup"><span data-stu-id="9df3c-145">To make the resulting feed backward-compatible with earlier versions of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], specify a value of `true` to make sure that the value is included in the content section of the feed.</span></span>|  
|`FC_NsPrefix`|<span data-ttu-id="9df3c-146">非配信マッピング内の XML 要素の名前空間プレフィックス。</span><span class="sxs-lookup"><span data-stu-id="9df3c-146">The namespace prefix of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="9df3c-147">この属性は、`FC_NsUri` 属性と一緒に使用する必要があります。この属性は、`FC_ContentKind` 属性と一緒に使用できません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-147">This attribute must be used with the `FC_NsUri` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_NsUri`|<span data-ttu-id="9df3c-148">非配信マッピング内の XML 要素の名前空間 URI。</span><span class="sxs-lookup"><span data-stu-id="9df3c-148">The namespace URI of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="9df3c-149">この属性は、`FC_NsPrefix` 属性と一緒に使用する必要があります。この属性は、`FC_ContentKind` 属性と一緒に使用できません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-149">This attribute must be used with the `FC_NsPrefix` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_SourcePath`|<span data-ttu-id="9df3c-150">このフィード マッピング規則が適用されるエンティティのプロパティのパス。</span><span class="sxs-lookup"><span data-stu-id="9df3c-150">The path of the property of the entity to which this feed mapping rule applies.</span></span> <span data-ttu-id="9df3c-151">この属性は、`EntityType` 要素で使用されている場合にのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-151">This attribute is only supported when it is used in an `EntityType` element.</span></span><br /><br /> <span data-ttu-id="9df3c-152"><xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> プロパティは、複合型を直接参照できません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-152">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot directly reference a complex type.</span></span> <span data-ttu-id="9df3c-153">複合型の場合は、プロパティ名が円記号 (`/`) で区切られたパス式を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-153">For complex types, you must use a path expression where property names are separated by a backslash (`/`) character.</span></span> <span data-ttu-id="9df3c-154">たとえば、次の値は、整数プロパティ`Person` `Age`と複合プロパティを持つエンティティ型に対して使用できます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-154">For example, the following values are allowed for an entity type `Person` with an integer property `Age` and a complex property</span></span><br /><br /> <span data-ttu-id="9df3c-155">`Address`:</span><span class="sxs-lookup"><span data-stu-id="9df3c-155">`Address`:</span></span><br /><br /> `Age`<br /><br /> `Address/Street`<br /><br /> <span data-ttu-id="9df3c-156"><xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> プロパティは、プロパティ名で無効な文字 (スペースなど) を含む値に設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-156">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot be set to a value that contains a space or any other character that is not valid in a property name.</span></span>|  
|`FC_TargetPath`|<span data-ttu-id="9df3c-157">プロパティのマップ先となる結果のフィードのターゲット要素の名前。</span><span class="sxs-lookup"><span data-stu-id="9df3c-157">The name of the target element of the resulting feed to map the property.</span></span> <span data-ttu-id="9df3c-158">この要素は、Atom 仕様またはカスタム要素によって定義された要素である場合があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-158">This element can be an element defined by the Atom specification or a custom element.</span></span><br /><br /> <span data-ttu-id="9df3c-159">次のキーワードは、[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] フィードの特定の場所をポイントする定義済みの配信ターゲット パス値です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-159">The following keywords are predefined syndication target-path values that point to specific location in an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed.</span></span><br /><br /> <span data-ttu-id="9df3c-160">`SyndicationAuthorEmail:`要素の子要素。 `atom:email` `atom:author`</span><span class="sxs-lookup"><span data-stu-id="9df3c-160">`SyndicationAuthorEmail:` The `atom:email` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="9df3c-161">`SyndicationAuthorName:`要素の子要素。 `atom:name` `atom:author`</span><span class="sxs-lookup"><span data-stu-id="9df3c-161">`SyndicationAuthorName:` The `atom:name` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="9df3c-162">`SyndicationAuthorUri:`要素の子要素。 `atom:uri` `atom:author`</span><span class="sxs-lookup"><span data-stu-id="9df3c-162">`SyndicationAuthorUri:` The `atom:uri` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="9df3c-163">`SyndicationContributorEmail:`要素の子要素。 `atom:email` `atom:contributor`</span><span class="sxs-lookup"><span data-stu-id="9df3c-163">`SyndicationContributorEmail:` The `atom:email` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="9df3c-164">`SyndicationContributorName:`要素の子要素。 `atom:name` `atom:contributor`</span><span class="sxs-lookup"><span data-stu-id="9df3c-164">`SyndicationContributorName:` The `atom:name` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="9df3c-165">`SyndicationContributorUri:`要素の子要素。 `atom:uri` `atom:contributor`</span><span class="sxs-lookup"><span data-stu-id="9df3c-165">`SyndicationContributorUri:` The `atom:uri` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="9df3c-166">`SyndicationCustomProperty:`カスタムプロパティ要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-166">`SyndicationCustomProperty:` A custom property element.</span></span> <span data-ttu-id="9df3c-167">カスタム要素にマップする際、ターゲットは、ネストされた要素が円記号 (`/`) で区切られ、属性がアンパサンド (`@`) で指定されたパス式である必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-167">When mapping to a custom element, the target must be a path expression in which nested elements are separated by a backslash (`/`) and attributes are specified by an ampersand (`@`).</span></span> <span data-ttu-id="9df3c-168">次の例では、文字列 `UnitsInStock/@ReorderLevel` によってプロパティ値がルート エントリ要素の `ReorderLevel` という子要素の `UnitsInStock` という属性にマップされます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-168">In the following example, the string `UnitsInStock/@ReorderLevel` maps a property value to an attribute named `ReorderLevel` on a child element named `UnitsInStock` of the root entry element.</span></span><br /><br /> `<Property Name="ReorderLevel" Type="Int16"               m:FC_TargetPath="UnitsInStock/@ReorderLevel"               m:FC_NsPrefix="Northwind"               m:FC_NsUri="http://schemas.examples.microsoft.com/dataservices"               m:FC_KeepInContent="false"               />`<br /><br /> <span data-ttu-id="9df3c-169">ターゲットがカスタム要素名の場合、`FC_NsPrefix` および `FC_NsUri` 属性も指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-169">When the target is a custom element name, the `FC_NsPrefix` and `FC_NsUri` attributes must also be specified.</span></span><br /><br /> <span data-ttu-id="9df3c-170">`SyndicationPublished:``atom:published`要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-170">`SyndicationPublished:` The `atom:published` element.</span></span><br /><br /> <span data-ttu-id="9df3c-171">`SyndicationRights:``atom:rights`要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-171">`SyndicationRights:` The `atom:rights` element.</span></span><br /><br /> <span data-ttu-id="9df3c-172">`SyndicationSummary:``atom:summary`要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-172">`SyndicationSummary:` The `atom:summary` element.</span></span><br /><br /> <span data-ttu-id="9df3c-173">`SyndicationTitle:``atom:title`要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-173">`SyndicationTitle:` The `atom:title` element.</span></span><br /><br /> <span data-ttu-id="9df3c-174">`SyndicationUpdated:``atom:updated`要素。</span><span class="sxs-lookup"><span data-stu-id="9df3c-174">`SyndicationUpdated:` The `atom:updated` element.</span></span><br /><br /> <span data-ttu-id="9df3c-175">これらのキーワードは、リフレクション プロバイダーと共に使用する <xref:System.Data.Services.Common.SyndicationItemProperty> 列挙の値と同等です。</span><span class="sxs-lookup"><span data-stu-id="9df3c-175">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationItemProperty> enumeration used with the reflection provider.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="9df3c-176">属性名および値では、大文字と小文字が区別されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-176">Attribute names and values are case-sensitive.</span></span> <span data-ttu-id="9df3c-177">属性は、`EntityType` 要素または 1 つ以上の `Property` 要素に適用されます (両方には適用されません)。</span><span class="sxs-lookup"><span data-stu-id="9df3c-177">Attributes can be applied either to the `EntityType` element or to one or more `Property` elements, but not to both.</span></span>  
  
## <a name="customizing-feeds-with-the-reflection-provider"></a><span data-ttu-id="9df3c-178">リフレクション プロバイダーを使用したフィードのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9df3c-178">Customizing Feeds with the Reflection Provider</span></span>  
 <span data-ttu-id="9df3c-179">リフレクション プロバイダーを使用して実装されたデータ モデル用にフィードをカスタマイズするには、<xref:System.Data.Services.Common.EntityPropertyMappingAttribute> 属性の 1 つ以上のインスタンスをデータ モデル内でエンティティ型を表現するクラスに追加します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-179">To customize feeds for a data model that was implemented by using the reflection provider, add one or more instances of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> attribute to the classes that represent entity types in the data model.</span></span> <span data-ttu-id="9df3c-180"><xref:System.Data.Services.Common.EntityPropertyMappingAttribute> クラスのプロパティは、前のセクションで説明したフィードのカスタマイズ属性に対応します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-180">The properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> class correspond to the feed customization attributes that are described in the previous section.</span></span> <span data-ttu-id="9df3c-181">両方のプロパティに対して定義されたカスタム フィード マッピングと共に `Order` 型の宣言の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-181">The following is an example of the declaration of the `Order` type, with custom feed mapping defined for both properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9df3c-182">この例のデータモデルは、トピック「 [How to:リフレクションプロバイダー](create-a-data-service-using-rp-wcf-data-services.md)を使用してデータサービスを作成します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-182">The data model for this example is defined in the topic [How to: Create a Data Service Using the Reflection Provider](create-a-data-service-using-rp-wcf-data-services.md).</span></span>  
  
 [!code-csharp[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_custom_feeds/cs/orderitems.svc.cs#customorderfeed)]
 [!code-vb[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_custom_feeds/vb/orderitems.svc.vb#customorderfeed)]  
  
 <span data-ttu-id="9df3c-183">これらの属性によって `Orders` エンティティ セットに対して次のカスタム データ フィードが生成されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-183">These attributes produce the following customized data feed for the `Orders` entity set.</span></span> <span data-ttu-id="9df3c-184">このカスタムフィードでは、 `OrderId`プロパティ値はの`author` `title` `entry`要素にのみ表示され、 `Customer`プロパティ値は要素と`Customer`プロパティ要素の両方に表示されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-184">In this customized feed, the `OrderId` property value displays only in the `title` element of the `entry` and the `Customer` property value displays both in the `author` element and as the `Customer` property element:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#IQueryableFeedResult](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria_custom_feeds/xml/iqueryablefeedresult.xml#iqueryablefeedresult)]  
  
 <span data-ttu-id="9df3c-185">詳細については、「[方法 :リフレクションプロバイダー](how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md)を使用してフィードをカスタマイズします。</span><span class="sxs-lookup"><span data-stu-id="9df3c-185">For more information, see [How to: Customize Feeds with the Reflection Provider](how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-a-custom-data-service-provider"></a><span data-ttu-id="9df3c-186">カスタム データ サービス プロバイダーを使用したフィードのカスタマイズ</span><span class="sxs-lookup"><span data-stu-id="9df3c-186">Customizing Feeds with a Custom Data Service Provider</span></span>  
 <span data-ttu-id="9df3c-187">カスタム データ サービス プロバイダーを使用して定義されたデータ モデル用のフィードのカスタマイズは、データ モデル内でエンティティ型を表現する <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> で <xref:System.Data.Services.Providers.ResourceType> を呼び出すことによってリソース型に対して定義されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-187">Feed customization for a data model defined by using a custom data service provider is defined for a resource type by calling the <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> on the <xref:System.Data.Services.Providers.ResourceType> that represents an entity type in the data model.</span></span> <span data-ttu-id="9df3c-188">詳細については、「[カスタムデータサービスプロバイダー](custom-data-service-providers-wcf-data-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9df3c-188">For more information, see [Custom Data Service Providers](custom-data-service-providers-wcf-data-services.md).</span></span>  
  
## <a name="consuming-custom-feeds"></a><span data-ttu-id="9df3c-189">カスタム フィードの処理</span><span class="sxs-lookup"><span data-stu-id="9df3c-189">Consuming Custom Feeds</span></span>  
 <span data-ttu-id="9df3c-190">アプリケーションが[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]フィードを直接使用する場合は、返されたフィードでカスタマイズされた要素および属性を処理できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-190">When your application directly consumes an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, it must be able to process any customized elements and attributes in the returned feed.</span></span> <span data-ttu-id="9df3c-191">データ サービス プロバイダーに関係なく、データ モデルにカスタム フィードを実装した場合、`$metadata` エンドポイントは、データ サービスによって返される CSDL のカスタム フィード属性としてカスタム フィード情報を返します。</span><span class="sxs-lookup"><span data-stu-id="9df3c-191">When you have implemented custom feeds in your data model, regardless of the data service provider, the `$metadata` endpoint returns custom feed information as custom feed attributes in the CSDL returned by the data service.</span></span> <span data-ttu-id="9df3c-192">**サービス参照の追加**ダイアログまたは[datasvcutil.exe](wcf-data-service-client-utility-datasvcutil-exe.md)ツールを使用してクライアントデータサービスクラスを生成する場合、データサービスへの要求と応答が正しく処理されることを保証するために、カスタマイズされたフィード属性が使用されます。</span><span class="sxs-lookup"><span data-stu-id="9df3c-192">When you use the **Add Service Reference** dialog or the [datasvcutil.exe](wcf-data-service-client-utility-datasvcutil-exe.md) tool to generate client data service classes, the customized feed attributes are used to guarantee that requests and responses to the data service are handled correctly.</span></span>  
  
## <a name="feed-customization-considerations"></a><span data-ttu-id="9df3c-193">フィードのカスタマイズに関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="9df3c-193">Feed Customization Considerations</span></span>  
 <span data-ttu-id="9df3c-194">カスタム フィードのマッピングを定義する場合は、以下を検討してください。</span><span class="sxs-lookup"><span data-stu-id="9df3c-194">You should consider the following when defining custom feed mappings.</span></span>  
  
- <span data-ttu-id="9df3c-195">クライアント[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]は、空白のみが含まれている場合、フィード内のマップされた要素を空として扱います。</span><span class="sxs-lookup"><span data-stu-id="9df3c-195">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client treats mapped elements in a feed as empty when they contain only white space.</span></span> <span data-ttu-id="9df3c-196">このため、空白のみを含むマップされた要素は、同じ空白を持つクライアントでは具体化されません。</span><span class="sxs-lookup"><span data-stu-id="9df3c-196">Because of this, mapped elements that contain only white space are not materialized on the client with the same white space.</span></span> <span data-ttu-id="9df3c-197">この空白をクライアントに保持するには、フィードマッピング属性での`KeepInContext`値`true`をに設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-197">To preserve this white space on the client, you must set the value of `KeepInContext` to `true` in the feed mapping attribute.</span></span>  
  
## <a name="versioning-requirements"></a><span data-ttu-id="9df3c-198">バージョン管理の要件</span><span class="sxs-lookup"><span data-stu-id="9df3c-198">Versioning Requirements</span></span>  
 <span data-ttu-id="9df3c-199">フィードのカスタマイズには、次に示す [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] プロトコルのバージョン管理の要件があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-199">Feed customization has the following [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol versioning requirements:</span></span>  
  
- <span data-ttu-id="9df3c-200">フィードのカスタマイズを行う場合は、クライアントとデータ サービスの両方でバージョン 2.0 以降の [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] プロトコルがサポートされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="9df3c-200">Feed customization requires that both the client and data service support version 2.0 of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol and later versions.</span></span>  
  
 <span data-ttu-id="9df3c-201">詳細については、「[データサービスのバージョン管理](data-service-versioning-wcf-data-services.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="9df3c-201">For more information, see [Data Service Versioning](data-service-versioning-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9df3c-202">関連項目</span><span class="sxs-lookup"><span data-stu-id="9df3c-202">See also</span></span>

- [<span data-ttu-id="9df3c-203">リフレクション プロバイダー</span><span class="sxs-lookup"><span data-stu-id="9df3c-203">Reflection Provider</span></span>](reflection-provider-wcf-data-services.md)
- [<span data-ttu-id="9df3c-204">Entity Framework プロバイダー</span><span class="sxs-lookup"><span data-stu-id="9df3c-204">Entity Framework Provider</span></span>](entity-framework-provider-wcf-data-services.md)
