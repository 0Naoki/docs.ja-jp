---
title: "軽減策: 水平方向スクロールおよび仮想化"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-bcl
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d5bafd9b-a3b3-4f92-8241-2aad254fb1a9
caps.latest.revision: 6
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 40eaf185e9c0c60493e9a2e5428c58b7463789fe
ms.contentlocale: ja-jp
ms.lasthandoff: 07/28/2017

---
# <a name="mitigation-horizontal-scrolling-and-virtualization"></a><span data-ttu-id="01b1b-102">軽減策: 水平方向スクロールおよび仮想化</span><span class="sxs-lookup"><span data-stu-id="01b1b-102">Mitigation: Horizontal Scrolling and Virtualization</span></span>
<span data-ttu-id="01b1b-103">この変更は、メインのスクロール方向と直交する方向で独自に仮想化を行う <xref:System.Windows.Controls.ItemsControl> に適用されます。</span><span class="sxs-lookup"><span data-stu-id="01b1b-103">This change applies to an <xref:System.Windows.Controls.ItemsControl> that does its own virtualization in the direction orthogonal to the main scrolling direction.</span></span> <span data-ttu-id="01b1b-104">(主な例として、<xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> が `true` に設定されている <xref:System.Windows.Controls.DataGrid> コントロールがあります)。特定の水平方向スクロール操作の結果が変更され、比較可能な垂直操作の結果により類似した、より直感的な結果が生成されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="01b1b-104">(The chief  example is a <xref:System.Windows.Controls.DataGrid> control with <xref:System.Windows.Controls.DataGrid.EnableColumnVirtualization%2A> set to `true`.)  The outcome of certain  horizontal scrolling operations has been changed to produce results that are more intuitive and more analogous to the results of comparable vertical operations.</span></span>  <span data-ttu-id="01b1b-105">特定の操作には**ここにスクロール**や**右端**などがあり、水平スクロール バーを右クリックすると表示されるメニューから名前を使用することができます。</span><span class="sxs-lookup"><span data-stu-id="01b1b-105">The specific operations include **Scroll Here** and **Right Edge**, to use the names from the menu obtained by right-clicking a horizontal scrollbar.</span></span>  <span data-ttu-id="01b1b-106">これらの両方でオフセット候補が計算され、<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName> が呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="01b1b-106">Both of these compute a  candidate offset and call <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.</span></span>  <span data-ttu-id="01b1b-107">新しいオフセットにスクロールすると、"ここ" または "右端" の定義が変更されている場合があります。これは、新しく非仮想化されたコンテンツで <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName> の値が変更されたためです。</span><span class="sxs-lookup"><span data-stu-id="01b1b-107">After scrolling to the new offset, the definition of "here" or "right edge" may have changed because newly de-virtualized content has changed the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A?displayProperty=fullName>.</span></span>  
  
## <a name="description-of-the-change"></a><span data-ttu-id="01b1b-108">変更の説明</span><span class="sxs-lookup"><span data-stu-id="01b1b-108">Description of the change</span></span>  
 <span data-ttu-id="01b1b-109">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)] より前では、もう "ここ" や "右端" にない場合でも、スクロール操作では単にオフセット候補を使用します。</span><span class="sxs-lookup"><span data-stu-id="01b1b-109">Prior to the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], the scroll operation simply uses the candidate offset, even though it may not be "here" or at the "right edge" any more.</span></span>  <span data-ttu-id="01b1b-110">その結果、スクロールつまみの "バウンス" などの効果が得られます。たとえば、</span><span class="sxs-lookup"><span data-stu-id="01b1b-110">This results in effects like "bouncing" the scroll thumb, best illustrated by example.</span></span>  <span data-ttu-id="01b1b-111"><xref:System.Windows.Controls.DataGrid> コントロールで <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> が 1000 に設定され、<xref:System.Windows.FrameworkElement.Width%2A> が 200 に設定されているとします。</span><span class="sxs-lookup"><span data-stu-id="01b1b-111">Suppose a <xref:System.Windows.Controls.DataGrid> control has <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> set to 1000 and <xref:System.Windows.FrameworkElement.Width%2A> set to 200.</span></span>  <span data-ttu-id="01b1b-112">"右端" へのスクロールでは、1000 - 200 = 800 というオフセット候補を使用します。</span><span class="sxs-lookup"><span data-stu-id="01b1b-112">A scroll to "Right Edge" uses candidate offset  1000 - 200 = 800.</span></span>  <span data-ttu-id="01b1b-113">そのオフセットへのスクロール時に、新しい列が非仮想化されます。これらの列が非常に広いため、<xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> を 2000 に変更したとします。</span><span class="sxs-lookup"><span data-stu-id="01b1b-113">While scrolling to that offset, new columns are de-virtualized; let's suppose they are very wide, so that the <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> changes to 2000.</span></span>  <span data-ttu-id="01b1b-114">スクロールは <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800 で終了し、つまみはスクロールバーの中央付近 (正確には 800/2000 = 40%) に "戻り" ます。</span><span class="sxs-lookup"><span data-stu-id="01b1b-114">The scroll ends with <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A>=800, and the thumb "bounces" back to near the middle of the scrollbar -- precisely at 800/2000 = 40%.</span></span>  
  
 <span data-ttu-id="01b1b-115">[!INCLUDE[net_v462](../../../includes/net-v462-md.md)] 以降では、このような場合に新しいオフセット候補が再計算されます </span><span class="sxs-lookup"><span data-stu-id="01b1b-115">Starting with the [!INCLUDE[net_v462](../../../includes/net-v462-md.md)], a new candidate offset is recomputed when this situation occurs.</span></span> <span data-ttu-id="01b1b-116">(垂直方向スクロールの動作は既にこのようになっています)。</span><span class="sxs-lookup"><span data-stu-id="01b1b-116">(This is how vertical scrolling works already.)</span></span>  
  
## <a name="impact"></a><span data-ttu-id="01b1b-117">影響</span><span class="sxs-lookup"><span data-stu-id="01b1b-117">Impact</span></span>  
 <span data-ttu-id="01b1b-118">この変更により、エンド ユーザーにはより予測可能で直感的なエクスペリエンスが提供されるようになりますが、水平方向スクロール後の <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> の正確な値に依存するアプリに影響する可能性もあります。これは、エンド ユーザーによる呼び出しであるか、<xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName> の明示的な呼び出しであるかに関係ありません。</span><span class="sxs-lookup"><span data-stu-id="01b1b-118">The change produces a more predictable and intuitive experience for the end user, but it could also affect any app that depends on the exact value of <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> after a horizontal scroll, whether invoked by the end user or by an explicit call to <xref:System.Windows.Controls.Primitives.IScrollInfo.SetHorizontalOffset%2A?displayProperty=fullName>.</span></span>  
  
## <a name="mitigation"></a><span data-ttu-id="01b1b-119">軽減策</span><span class="sxs-lookup"><span data-stu-id="01b1b-119">Mitigation</span></span>  
 <span data-ttu-id="01b1b-120"><xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> の予測値を使用するアプリを、非仮想化により <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> が変更される可能性のある水平方向スクロール後の実際の値 (および <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> の値) を取得するように変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="01b1b-120">An app that uses a predicted value for <xref:System.Windows.Controls.Primitives.IScrollInfo.HorizontalOffset%2A?displayProperty=fullName> should be changed to retrieve the actual value (and the value of <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A>) after any horizontal scroll that could change <xref:System.Windows.Controls.Primitives.IScrollInfo.ExtentWidth%2A> due to de-virtualization.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="01b1b-121">関連項目</span><span class="sxs-lookup"><span data-stu-id="01b1b-121">See Also</span></span>  
 [<span data-ttu-id="01b1b-122">ランタイムの変更点</span><span class="sxs-lookup"><span data-stu-id="01b1b-122">Runtime Changes</span></span>](../../../docs/framework/migration-guide/runtime-changes-in-the-net-framework-4-6-2.md)

