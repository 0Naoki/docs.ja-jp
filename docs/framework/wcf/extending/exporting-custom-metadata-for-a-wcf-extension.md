---
title: WCF 拡張に対するカスタム メタデータのエクスポート
ms.date: 03/30/2017
ms.assetid: 53c93882-f8ba-4192-965b-787b5e3f09c0
ms.openlocfilehash: 5134b57c59268b139239021bc2b4f6f4538ad27d
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "61857962"
---
# <a name="exporting-custom-metadata-for-a-wcf-extension"></a><span data-ttu-id="6e8c8-102">WCF 拡張に対するカスタム メタデータのエクスポート</span><span class="sxs-lookup"><span data-stu-id="6e8c8-102">Exporting Custom Metadata for a WCF Extension</span></span>
<span data-ttu-id="6e8c8-103">Windows Communication Foundation (WCF) では、メタデータのエクスポートはサービス エンドポイントを記述して、クライアントを使用してサービスを使用する方法を理解する標準化表現に投影するそれらのプロセスです。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-103">In Windows Communication Foundation (WCF), metadata export is the process of describing service endpoints and projecting them into a parallel, standardized representation that clients can use to understand how to use the service.</span></span> <span data-ttu-id="6e8c8-104">カスタム メタデータは、システム指定のメタデータ エクスポーターでエクスポートできない XML 要素で構成されます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-104">Custom metadata consists of XML elements that the system-provided metadata exporters cannot export.</span></span> <span data-ttu-id="6e8c8-105">通常、これは、ユーザー定義動作のカスタム WSDL 要素とバインド要素、およびバインディングとコントラクトの機能と要件に関するポリシー アサーションを含みます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-105">Typically, this includes custom WSDL elements for user-defined behaviors and binding elements and policy assertions about the capabilities and requirements of bindings and contracts.</span></span>  
  
 <span data-ttu-id="6e8c8-106">ここでは、カスタム WSDL またはポリシー アサーションのエクスポートについて説明し、エクスポート プロセス自体には重点を置きません。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-106">This section describes exporting custom WSDL or policy assertions, and does not focus on the exporting process itself.</span></span> <span data-ttu-id="6e8c8-107">型をエクスポートおよびインポートのメタデータがカスタムであるか、システムによって作成されたかどうかに関係なくメタデータを使用する方法の詳細については、次を参照してください。[エクスポートおよびインポートするメタデータ](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md)します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-107">For more information about how to use the types that export and import metadata regardless of whether the metadata is custom or system-constructed, see [Exporting and Importing Metadata](../../../../docs/framework/wcf/feature-details/exporting-and-importing-metadata.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="6e8c8-108">概要</span><span class="sxs-lookup"><span data-stu-id="6e8c8-108">Overview</span></span>  
 <span data-ttu-id="6e8c8-109">使用してメタデータが公開されるときに、 <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>、<xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType>が調べられるすべてのコントラクトと WCF は、システム指定の属性とバインドを使用してサポートできるバインドに対して XSD と WSDL のポリシー アサーションを含む--を生成します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-109">When metadata is published using the <xref:System.ServiceModel.Description.ServiceMetadataBehavior?displayProperty=nameWithType>, the <xref:System.ServiceModel.Description.ServiceDescription?displayProperty=nameWithType> is examined and XSD and WSDL -- including policy assertions -- are generated for all contracts and bindings that WCF can support using system-provided attributes and bindings.</span></span> <span data-ttu-id="6e8c8-110">ただし、カスタム動作属性やバインド要素を適切にエクスポートするには、あらかじめサポートしておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-110">However, custom behavior attributes or binding elements require support before they can be exported properly.</span></span>  
  
 <span data-ttu-id="6e8c8-111">ここでは、次の内容について説明します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-111">This section describes:</span></span>  
  
1. <span data-ttu-id="6e8c8-112">WSDL を発行する前に WSDL の生成データを公開する <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> インターフェイスを実装して使用する方法。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-112">How to implement and use the <xref:System.ServiceModel.Description.IWsdlExportExtension?displayProperty=nameWithType> interface, which exposes the WSDL generation data to you prior to publishing the WSDL.</span></span>  
  
2. <span data-ttu-id="6e8c8-113">WSDL データに含まれるポリシー アサーションをエクスポートする前にポリシー データを公開する <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> インターフェイスを実装して使用する方法。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-113">How to implement and use the <xref:System.ServiceModel.Description.IPolicyExportExtension?displayProperty=nameWithType> interface, which exposes the policy data to you prior to exporting the policy assertions in WSDL data.</span></span>  
  
 <span data-ttu-id="6e8c8-114">カスタム WSDL とポリシー アサーションをインポートする方法の詳細については、次を参照してください。 [WCF 拡張機能のカスタム メタデータのインポート](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-114">For more information about importing custom WSDL and policy assertions, see [Importing Custom Metadata for a WCF Extension](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md).</span></span>  
  
## <a name="exporting-custom-wsdl-elements"></a><span data-ttu-id="6e8c8-115">カスタム WSDL 要素のエクスポート</span><span class="sxs-lookup"><span data-stu-id="6e8c8-115">Exporting Custom WSDL Elements</span></span>  
 <span data-ttu-id="6e8c8-116">操作の動作、コントラクトの動作、エンドポイントの動作、またはバインド要素 <xref:System.ServiceModel.Description.IWsdlExportExtension> (それぞれ <xref:System.ServiceModel.Description.IOperationBehavior>、<xref:System.ServiceModel.Description.IContractBehavior>、<xref:System.ServiceModel.Description.IEndpointBehavior>、<xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType>) を実装し、エクスポートしようとしているサービスの説明に動作またはバインド要素を挿入します </span><span class="sxs-lookup"><span data-stu-id="6e8c8-116">Implement the <xref:System.ServiceModel.Description.IWsdlExportExtension> on an operation behavior, contract behavior, endpoint behavior or binding element (<xref:System.ServiceModel.Description.IOperationBehavior>, <xref:System.ServiceModel.Description.IContractBehavior>, <xref:System.ServiceModel.Description.IEndpointBehavior>, or <xref:System.ServiceModel.Channels.BindingElement?displayProperty=nameWithType> respectively) and insert the behaviors or binding elements into the description of the service that you are trying to export.</span></span> <span data-ttu-id="6e8c8-117">(動作を挿入する方法の詳細については、次を参照してください。[構成と、ランタイムの動作を拡張](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md))。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-117">(For more information about inserting behaviors, see [Configuring and Extending the Runtime with Behaviors](../../../../docs/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors.md)).</span></span> <span data-ttu-id="6e8c8-118"><xref:System.ServiceModel.Description.IWsdlExportExtension> はエンドポイントごとに呼び出され、コントラクトがエクスポートされていない場合は、各エンドポイントによって最初にコントラクトがエクスポートされます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-118">The <xref:System.ServiceModel.Description.IWsdlExportExtension> is called for each endpoint and each endpoint exports the contract first if it has not already been exported.</span></span> <span data-ttu-id="6e8c8-119">必要に応じて、次のいずれかのエクスポート プロセスに参加できます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-119">You can participate in either export process, depending upon your needs:</span></span>  
  
-   <span data-ttu-id="6e8c8-120"><xref:System.ServiceModel.Description.WsdlContractConversionContext> を使用して、エクスポートされたメタデータを <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> メソッドで変更する。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-120">Use the <xref:System.ServiceModel.Description.WsdlContractConversionContext> to modify the exported metadata in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method.</span></span>  
  
-   <span data-ttu-id="6e8c8-121"><xref:System.ServiceModel.Description.WsdlEndpointConversionContext> を使用して、エンドポイントに対してエクスポートされたメタデータを <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> メソッドで変更する。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-121">Use the <xref:System.ServiceModel.Description.WsdlEndpointConversionContext> to modify the exported metadata for the endpoint in the <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method.</span></span>  
  
 <span data-ttu-id="6e8c8-122"><xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> メソッドは、エクスポートされる <xref:System.ServiceModel.Description.IWsdlExportExtension> インスタンスに含まれるすべての <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> 実装で呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-122">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportContract%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations within the <xref:System.ServiceModel.Description.ContractDescription?displayProperty=nameWithType> instance that is being exported.</span></span>  <span data-ttu-id="6e8c8-123"><xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> メソッドは、エクスポートされる <xref:System.ServiceModel.Description.IWsdlExportExtension> インスタンスを持つすべての <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> 実装で呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-123">The <xref:System.ServiceModel.Description.IWsdlExportExtension.ExportEndpoint%2A> method is called on all <xref:System.ServiceModel.Description.IWsdlExportExtension> implementations with the <xref:System.ServiceModel.Description.ServiceEndpoint?displayProperty=nameWithType> instance that is being exported.</span></span>  
  
 <span data-ttu-id="6e8c8-124">詳細については、「[方法 :カスタム WSDL をエクスポート](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)サンプルとサンプル[カスタム WSDL パブリケーション](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md)します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-124">For more information, see [How to: Export Custom WSDL](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md) and the sample [Custom WSDL Publication](../../../../docs/framework/wcf/samples/custom-wsdl-publication.md).</span></span>  
  
## <a name="exporting-custom-policy-assertions"></a><span data-ttu-id="6e8c8-125">カスタム ポリシー アサーションのエクスポート</span><span class="sxs-lookup"><span data-stu-id="6e8c8-125">Exporting Custom Policy Assertions</span></span>  
 <span data-ttu-id="6e8c8-126"><xref:System.ServiceModel.Description.IPolicyExportExtension> に <xref:System.ServiceModel.Channels.BindingElement> を実装し、バインド要素をバインディングに追加して、バインディングのサポートとコントラクトの機能に関するカスタム ポリシー アサーションを WSDL に書き込みます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-126">Implement the <xref:System.ServiceModel.Description.IPolicyExportExtension> on a <xref:System.ServiceModel.Channels.BindingElement> and add the binding element to the binding to write custom policy assertions about binding support and contract capabilities into the WSDL.</span></span> <span data-ttu-id="6e8c8-127">バインディングに実装されたバインド要素をエクスポートすると、<xref:System.ServiceModel.Description.IPolicyExportExtension> が 1 回呼び出され、<xref:System.ServiceModel.Description.PolicyConversionContext> を <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> メソッドに渡します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-127">The <xref:System.ServiceModel.Description.IPolicyExportExtension> is called once when exporting the implemented binding element in a binding and passes the <xref:System.ServiceModel.Description.PolicyConversionContext> to the <xref:System.ServiceModel.Description.IPolicyExportExtension.ExportPolicy%2A> method.</span></span> <span data-ttu-id="6e8c8-128"><xref:System.ServiceModel.Description.PolicyConversionContext> インスタンスに対してこのメソッドを使用すると、メッセージ、操作、またはエンドポイント サブジェクトで WSDL バインディングに結び付けられているポリシー アサーションを追加できます。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-128">You can use the methods on the <xref:System.ServiceModel.Description.PolicyConversionContext> instance to add to the policy assertions attached to the WSDL binding at the message, operation or endpoint subjects.</span></span>  
  
 <span data-ttu-id="6e8c8-129">詳細については、「[方法 :カスタム ポリシー アサーションをエクスポート](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)します。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-129">For more information, see [How to: Export Custom Policy Assertions](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6e8c8-130">関連項目</span><span class="sxs-lookup"><span data-stu-id="6e8c8-130">See also</span></span>

- [<span data-ttu-id="6e8c8-131">方法: カスタム WSDL をエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-131">How to: Export Custom WSDL</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-wsdl.md)
- [<span data-ttu-id="6e8c8-132">方法: カスタム ポリシー アサーションをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="6e8c8-132">How to: Export Custom Policy Assertions</span></span>](../../../../docs/framework/wcf/extending/how-to-export-custom-policy-assertions.md)
- [<span data-ttu-id="6e8c8-133">WCF 拡張に対するカスタム メタデータのインポート</span><span class="sxs-lookup"><span data-stu-id="6e8c8-133">Importing Custom Metadata for a WCF Extension</span></span>](../../../../docs/framework/wcf/extending/importing-custom-metadata-for-a-wcf-extension.md)
