---
title: "方法 : Windows Communication Foundation クライアントを作成する"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- clients [WCF], running
- WCF clients [WCF], running
ms.assetid: a67884cc-1c4b-416b-8c96-5c954099f19f
caps.latest.revision: "64"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: cd2740cfef2a618e4ab220f7db84fc78a10e0980
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/02/2017
---
# <a name="how-to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="4cea3-102">方法 : Windows Communication Foundation クライアントを作成する</span><span class="sxs-lookup"><span data-stu-id="4cea3-102">How to: Create a Windows Communication Foundation Client</span></span>
<span data-ttu-id="4cea3-103">これは、[!INCLUDE[indigo1](../../../includes/indigo1-md.md)] アプリケーションの作成に必要な 6 つのタスクのうち、4 番目のタスクです。</span><span class="sxs-lookup"><span data-stu-id="4cea3-103">This is the fourth of six tasks required to create a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] application.</span></span> <span data-ttu-id="4cea3-104">タスクの 6 つのすべての概要については、次を参照してください。、[チュートリアル入門](../../../docs/framework/wcf/getting-started-tutorial.md)トピックです。</span><span class="sxs-lookup"><span data-stu-id="4cea3-104">For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic.</span></span>  
  
 <span data-ttu-id="4cea3-105">ここでは、[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] サービスからメタデータを取得し、このメタデータを使用して、サービスにアクセスできる [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] クライアント プロキシを作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-105">This topic describes how to retrieve metadata from a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service and use it to create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] proxy that can access the service.</span></span> <span data-ttu-id="4cea3-106">このタスクを完了するには、Visual Studio に用意されている "サービス参照の追加" 機能を使用します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-106">This task is completed by using the Add Service Reference functionality provided by Visual Studio .</span></span> <span data-ttu-id="4cea3-107">このツールでは、サービスの MEX エンドポイントからメタデータを取得し、選択した言語 (既定では C#) でクライアント プロキシのマネージ ソース コード ファイルを生成します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-107">This tool obtains the metadata from the service’s MEX endpoint and generates a managed source code file for a client proxy in the language you have chosen (C# by default).</span></span> <span data-ttu-id="4cea3-108">このツールでは、クライアント プロキシを作成する以外に、クライアントの構成ファイルの作成または更新も行います。この構成ファイルにより、クライアント アプリケーションはエンドポイントのいずれかにあるサービスに接続できるようになります。</span><span class="sxs-lookup"><span data-stu-id="4cea3-108">In addition to creating the client proxy, the tool also creates or updates the client configuration file which enables the client application to connect to the service at one of its endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4cea3-109">使用することも、 [ServiceModel メタデータ ユーティリティ ツール (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)プロキシ クラスおよび Visual Studio 内でサービス参照の追加を使用する代わりに構成を生成するツールです。</span><span class="sxs-lookup"><span data-stu-id="4cea3-109">You can also use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool to generate the proxy class and configuration instead of using Add Service Reference inside of Visual Studio.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="4cea3-110">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] のクラス ライブラリ プロジェクトから [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] サービスを呼び出すときは、サービス参照の追加機能を使用して、プロキシおよび関連構成ファイルを自動的に生成できます。</span><span class="sxs-lookup"><span data-stu-id="4cea3-110">When calling a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service from a class library project in [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] you can use the Add Service Reference feature to automatically generate a proxy and associated configuration file.</span></span>  <span data-ttu-id="4cea3-111">この構成ファイルはクラス ライブラリ プロジェクトで使用されません。</span><span class="sxs-lookup"><span data-stu-id="4cea3-111">The configuration file will not be used by the class library project.</span></span> <span data-ttu-id="4cea3-112">クラス ライブラリを呼び出す実行可能ファイルの app.config ファイルに、生成された構成ファイル内の設定を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4cea3-112">You will need to add the settings in the generated configuration file to the app.config file for the executable that will call the class library.</span></span>  
  
 <span data-ttu-id="4cea3-113">クライアント アプリケーションは、生成されたプロキシ クラスを使用してサービスと通信します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-113">The client application uses the generated proxy class to communicate with the service.</span></span> <span data-ttu-id="4cea3-114">この手順で説明されて[する方法: クライアントを使用して](../../../docs/framework/wcf/how-to-use-a-wcf-client.md)です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-114">This procedure is described in [How to: Use a Client](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span></span>  
  
### <a name="to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="4cea3-115">Windows Communication Foundation クライアントを作成するには</span><span class="sxs-lookup"><span data-stu-id="4cea3-115">To create a Windows Communication Foundation client</span></span>  
  
1.  <span data-ttu-id="4cea3-116">はじめにソリューションを選択するを右クリックして新しいコンソール アプリケーション プロジェクトを作成する**追加**、**新しいプロジェクト**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-116">Create a new console application project by right-clicking on the Getting Started solution, selecting, **Add**, **New Project**.</span></span> <span data-ttu-id="4cea3-117">**新しいプロジェクトの追加**ダイアログの の左側でダイアログ**Windows**  **c#**または**VB**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-117">In the **Add New Project** dialog on the left hand side of the dialog select **Windows** under **C#** or **VB**.</span></span> <span data-ttu-id="4cea3-118">ダイアログの中央のセクションで選択**コンソール アプリケーション**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-118">In the center section of the dialog select **Console Application**.</span></span> <span data-ttu-id="4cea3-119">プロジェクトに `GettingStartedClient` という名前を付けます。</span><span class="sxs-lookup"><span data-stu-id="4cea3-119">Name the project `GettingStartedClient`.</span></span>  
  
2.  <span data-ttu-id="4cea3-120">右クリック GettingStartedClient プロジェクトのターゲット フレームワークを .NET Framework 4.5 に設定**GettingStartedClient**ソリューション エクスプ ローラーを選択して**プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-120">Set the target framework of the GettingStartedClient project to .NET Framework 4.5 by right clicking on **GettingStartedClient** in the Solution Explorer and selecting **Properties**.</span></span> <span data-ttu-id="4cea3-121">ラベルの付いたボックスの一覧で**ターゲット フレームワーク**選択**.NET Framework 4.5**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-121">In the dropdown box labeled **Target Framework** select **.NET Framework 4.5**.</span></span> <span data-ttu-id="4cea3-122">VB プロジェクトは少し異なり、GettingStartedClient プロジェクトのプロパティ ダイアログ ボックスのターゲット フレームワークを設定をクリックして、**コンパイル**、画面の左側にある タブでをクリックし、 **詳細設定コンパイル オプション**ダイアログ ボックスの左下隅にあるボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-122">Setting the target framework for a VB project is a little different, in the GettingStartedClient project properties dialog, click the **Compile** tab on the left-hand side of the screen, and then click the **Advanced Compile Options** button at the lower left-hand corner of the dialog.</span></span> <span data-ttu-id="4cea3-123">選択し、 **.NET Framework 4.5**というドロップダウン ボックスで**ターゲット フレームワーク**です。</span><span class="sxs-lookup"><span data-stu-id="4cea3-123">Then select **.NET Framework 4.5** in the dropdown box labeled **Target Framework**.</span></span>  
  
     <span data-ttu-id="4cea3-124">ターゲット フレームワークを設定すると、ソリューションを再読み込みする Visual Studio 2011 キーを押して**OK**入力を求められたらです。</span><span class="sxs-lookup"><span data-stu-id="4cea3-124">Setting the target framework will cause Visual Studio 2011 to reload the solution, press **OK** when prompted.</span></span>  
  
3.  <span data-ttu-id="4cea3-125">右クリックして System.ServiceModel への参照を GettingStartedClient プロジェクトに追加、**参照**クリックし、ソリューション エクスプ ローラーで GettingStartedClient プロジェクトの下のフォルダー**追加**参照。</span><span class="sxs-lookup"><span data-stu-id="4cea3-125">Add a reference to System.ServiceModel to the GettingStartedClient project by right-clicking the **Reference** folder under the GettingStartedClient project in Solution Explorer and select **Add** Reference.</span></span> <span data-ttu-id="4cea3-126">**参照の追加**ダイアログの  **Framework**ダイアログ ボックスの左側にあります。</span><span class="sxs-lookup"><span data-stu-id="4cea3-126">In the **Add Reference** dialog select **Framework** on the left-hand side of the dialog.</span></span> <span data-ttu-id="4cea3-127">[アセンブリの検索] ボックスに「`System.ServiceModel`」と入力します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-127">In the Search Assemblies textbox, type in `System.ServiceModel`.</span></span> <span data-ttu-id="4cea3-128">ダイアログの中央のセクションで選択**System.ServiceModel**をクリックして、**追加**ボタンをクリックし、をクリックして、**閉じる**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-128">In the center section of the dialog select **System.ServiceModel**, click the **Add** button, and click the **Close** button.</span></span> <span data-ttu-id="4cea3-129">クリックして、ソリューションを保存、**すべて保存**メイン メニューの下のボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-129">Save the solution by clicking the **Save All** button below the main menu.</span></span>  
  
4.  <span data-ttu-id="4cea3-130">次に、電卓サービスへのサービス参照を追加します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-130">Next you wlll add a service reference to the Calculator Service.</span></span> <span data-ttu-id="4cea3-131">これを実行する前に、GettingStartedHost コンソール アプリケーションを起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4cea3-131">Before you can do that, you must start up the GettingStartedHost console application.</span></span> <span data-ttu-id="4cea3-132">ホストが実行されているソリューション エクスプ ローラーで GettingStartedClient プロジェクトの 参照 フォルダーを右クリックしてサービス参照の追加 ダイアログ ボックスの アドレス ボックスに次の URL でサービス参照の追加と種類を選択します HYPERLINK"http:/。/localhost:8000/ServiceModelSamples/Service"http://localhost:8000/ServiceModelSamples/Service とクリック、**移動**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-132">Once the host is running you can right click the References folder under the GettingStartedClient project in the Solution Explorer and select Add Service Reference and type in the following URL in the address box of the Add Service Reference dialog:  HYPERLINK "http://localhost:8000/ServiceModelSamples/Service" http://localhost:8000/ServiceModelSamples/Service and   click the **Go** button.</span></span> <span data-ttu-id="4cea3-133">"CalculatorService" が [サービス] ボックスに表示されたら、CalculatorService をダブルクリックして、そのサービスによって実装されているサービス コントラクトを展開して表示します。</span><span class="sxs-lookup"><span data-stu-id="4cea3-133">The CalculatorService should then be displayed in the Services list box, Double click CalculatorService and it will expand and show the service contracts implemented by the service.</span></span> <span data-ttu-id="4cea3-134">同様をクリックして既定の名前空間のままにして、 **OK**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-134">Leave the default namespace as is and click the **OK** button.</span></span>  
  
     <span data-ttu-id="4cea3-135">Visual Studio を使用してサービスへの参照を追加すると、ソリューション エクスプローラーで、新しい項目が GettingStartedClient プロジェクトの [サービス参照] フォルダーの下に表示されます。</span><span class="sxs-lookup"><span data-stu-id="4cea3-135">When you add a reference to a service using Visual Studio a new item will appear in the Solution Explorer under the Service References folder under the GettingStartedClient project.</span></span>  <span data-ttu-id="4cea3-136">使用する場合、 [ServiceModel メタデータ ユーティリティ ツール (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)ツールは、ソース コード ファイルおよび app.config ファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="4cea3-136">If you use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool a source code file and app.config file will be generated.</span></span>  
  
     <span data-ttu-id="4cea3-137">コマンド ライン ツールを使用することもできます。 [ServiceModel メタデータ ユーティリティ ツール (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)クライアント コードを作成する適切なスイッチです。</span><span class="sxs-lookup"><span data-stu-id="4cea3-137">You can also use the command-line tool [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) with the appropriate switches to create the client code.</span></span> <span data-ttu-id="4cea3-138">次の例では、サービスのコード ファイルと構成ファイルを生成しています。</span><span class="sxs-lookup"><span data-stu-id="4cea3-138">The following example generates a code file and a configuration file for the service.</span></span> <span data-ttu-id="4cea3-139">最初の例では VB でプロキシを生成する方法を示し、2 番目の例では C# でプロキシを生成する方法を示しています。</span><span class="sxs-lookup"><span data-stu-id="4cea3-139">The first example shows how to generate the proxy in VB and the second shows how to generated the proxy in C#:</span></span>  
  
    ```  
    svcutil.exe /language:vb /out:generatedProxy.vb /config:app.config http://localhost:8000/ServiceModelSamples/service  
    ```  
  
    ```csharp  
    svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config http://localhost:8000/ServiceModelSamples/service  
    ```  
  
 <span data-ttu-id="4cea3-140">これで、クライアント アプリケーションで電卓サービスを呼び出すために使用されるプロキシが作成されました。</span><span class="sxs-lookup"><span data-stu-id="4cea3-140">You have now created the proxy that the client application will use to call the calculator service.</span></span> <span data-ttu-id="4cea3-141">系列内の次のトピックに進んで:[する方法: クライアントを構成します。](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span><span class="sxs-lookup"><span data-stu-id="4cea3-141">Proceed to the next topic in the series: [How to: Configure a Client](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4cea3-142">関連項目</span><span class="sxs-lookup"><span data-stu-id="4cea3-142">See Also</span></span>  
 [<span data-ttu-id="4cea3-143">ServiceModel メタデータ ユーティリティ ツール (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="4cea3-143">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)  
 [<span data-ttu-id="4cea3-144">はじめに</span><span class="sxs-lookup"><span data-stu-id="4cea3-144">Getting Started</span></span>](../../../docs/framework/wcf/samples/getting-started-sample.md)  
 [<span data-ttu-id="4cea3-145">自己ホストします。</span><span class="sxs-lookup"><span data-stu-id="4cea3-145">Self-Host</span></span>](../../../docs/framework/wcf/samples/self-host.md)  
 [<span data-ttu-id="4cea3-146">方法: 構成ファイルを使用して、サービスのメタデータを公開</span><span class="sxs-lookup"><span data-stu-id="4cea3-146">How to: Publish Metadata for a Service Using a Configuration File</span></span>](../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)  
 [<span data-ttu-id="4cea3-147">方法: Svcutil.exe を使用してメタデータ ドキュメントをダウンロードするには</span><span class="sxs-lookup"><span data-stu-id="4cea3-147">How to: Use Svcutil.exe to Download Metadata Documents</span></span>](../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)
