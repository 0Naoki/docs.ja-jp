---
title: "ファイアウォール手順 | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
caps.latest.revision: 32
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 32
---
# ファイアウォール手順
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] サンプルが機能するように、ファイアウォール内でいくつかのポートまたはプログラムを有効にする必要があります。サンプルの多くは、通信する際に 8000 ～ 8003 の範囲のポートと 9000 のポートを使用します。既定ではファイアウォールが有効なので、こうしたポートにはアクセスできません。サンプル用にファイアウォールを有効にするには、要件とセキュリティ環境に応じて次のいずれかの手順を完了する必要があります。  
  
-   オプション 1: 実行中のサンプルを対話形式で有効にします。ファイアウォールの構成をあらかじめ変更することなく、サンプルのビルドおよび実行の開始に進みます。サンプルが実行されると、**\[Windows セキュリティの緊急警告\]** ダイアログ ボックスが表示されます。対象のプログラムを、ブロック解除の一覧に対話形式で追加できます。この手順では、この後サンプルを再起動する必要があります。  
  
-   オプション 2: サンプル プログラムをあらかじめ有効にしておきます。**Windows ファイアウォールのコントロール パネル** アプレットを開始し、実行するサンプル プログラムを有効にします。実行可能ファイルが存在するように、プログラムを最初にビルドする必要があります。手順の詳細については、後述を参照してください。  
  
-   オプション 3: ポート範囲をあらかじめ有効にしておきます。**Windows ファイアウォール**の**コントロール パネル** アプレットを開始し、サンプルで使用するポート 80、443、8000 ～ 8003、および 9000 を有効にします。手順の詳細については、後述を参照してください。このオプションは他の手順よりも安全性が低くなります。サンプルだけでなく、任意のプログラムでこれらのポートを使用できるようになるからです。  
  
 どの手順を使用するか判断に迷う場合は、最初のオプションを選択してください。他のベンダのファイアウォールを実行している場合も、同様の変更が必要になる場合があります。  
  
> [!IMPORTANT]
>  ファイアウォールの構成を変更すると、セキュリティに影響します。変更内容は記録し、サンプルの使用が終わったらそれらの変更点を削除することをお勧めします。  
  
### サンプル プログラムをあらかじめ有効にしておくには  
  
1.  このサンプルをビルドします。  
  
2.  **\[スタート\]** ボタンをクリックし、**\[ファイル名を指定して実行\]** をクリックして、「`firewall.cpl`」と入力します。これにより、**Windows ファイアウォールのコントロール パネル** アプレットが開きます。  
  
    > [!NOTE]
    >  Windows ファイアウォールを介して通信する機能が必要なサンプルを実行するには、ファイアウォール設定を変更するための権限が必要です。一部のファイウォール設定を変更できず、コンピューターがドメインに接続される場合は、システム管理者がグループ ポリシーを使用してファイアウォール設定を管理している可能性があります。  
  
3.  Windows ファイアウォールを介したプログラムを許可するには、次のいずれかの手順を実行します。  
  
    -   Windows 7 または Windows Server 2008 R2 の場合は、**\[Windows ファイアウォールを介したプログラムまたは機能を許可する\]** をクリックします。**\[設定の変更\]**、**\[別のプログラムの許可...\]** の順にクリックします。  
  
    -   [!INCLUDE[wv](../../../../includes/wv-md.md)] または [!INCLUDE[lserver](../../../../includes/lserver-md.md)] の場合は、**\[Windows ファイアウォールによるプログラムの許可\]** をクリックします。  
  
4.  **\[例外\]** タブの **\[プログラムの追加\]** をクリックします。  
  
5.  **\[参照\]** ボタンをクリックして、実行するサンプルの実行可能ファイルを選択します。  
  
6.  手順 4. と 5. を繰り返して、実行するすべてのサンプルの実行可能ファイルを追加します。  
  
7.  **\[OK\]** をクリックして、ファイアウォール アプレットを閉じます。  
  
### ポート範囲をあらかじめ有効にしておくには  
  
1.  **\[スタート\]** ボタンをクリックし、**\[ファイル名を指定して実行\]** をクリックして、「`firewall.cpl`」と入力します。これにより、**Windows ファイアウォールのコントロール パネル** アプレットが開きます。  
  
2.  Windows 7 または Windows Server 2008 R2 の場合は、次の手順を実行します。  
  
    1.  \[Windows ファイアウォール\] ウィンドウの左の列で、**\[詳細設定\]** をクリックします。  
  
    2.  左の列で、**\[受信の規則\]** をクリックします。  
  
    3.  右の列で、**\[新しい規則\]** をクリックします。  
  
    4.  **\[ポート\]** を選択して **\[次へ\]** をクリックします。  
  
    5.  **\[TCP\]** を選択し、**\[特定のローカル ポート\]** フィールドに「`8000, 8001, 8002, 8003, 9000, 80, 443`」と入力します。  
  
    6.  **\[次へ\]** をクリックします。  
  
    7.  **\[接続を許可する\]** を選択して **\[次へ\]** をクリックします。  
  
    8.  **\[ドメイン\]** と **\[プライベート\]** を選択して **\[次へ\]** をクリックします。  
  
    9. この規則の名前を「`WCF-WF 4.0 サンプル`」に設定し、**\[完了\]** をクリックします。  
  
    10. **\[送信の規則\]** をクリックし、手順 c ～ h を繰り返します。  
  
3.  [!INCLUDE[wv](../../../../includes/wv-md.md)] または [!INCLUDE[lserver](../../../../includes/lserver-md.md)] の場合は、次の手順を実行します。  
  
    1.  **\[Windows ファイアウォールによるプログラムの許可\]** をクリックします。  
  
    2.  **\[例外\]** タブの **\[ポートの追加\]** をクリックします。  
  
    3.  ポートの名前とポート番号 8000 を入力して、**\[TCP\]** オプションをクリックします。  
  
    4.  **\[スコープの変更\]** をクリックして **\[ユーザーのネットワーク \(サブネット\) のみ\]** オプションをクリックし、**\[OK\]** をクリックします。  
  
    5.  手順 b ～ d を繰り返して、ポート 8001、8002、8003、9000、80、および 443 を設定します。  
  
4.  **\[OK\]** をクリックして、ファイアウォール アプレットを閉じます。  
  
> [!NOTE]
>  サンプルの実行が終わったら、ファイアウォールのすべての例外を削除します。これを行うには、**Windows ファイアウォールのコントロール パネル** アプレットを開き、前の手順で追加したすべてのプログラムまたはポートのエントリを削除します。