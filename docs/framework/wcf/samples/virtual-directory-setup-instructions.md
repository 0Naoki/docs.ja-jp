---
title: "仮想ディレクトリのセットアップ手順 | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
ms.assetid: 3c62cab5-81a4-48b6-ac8c-9ce33a85a157
caps.latest.revision: 36
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 36
---
# 仮想ディレクトリのセットアップ手順
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] サンプルは、servicemodelsamples という共通の仮想ディレクトリの共有を想定しています。この仮想ディレクトリは %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples フォルダーにマップされています。  
  
> [!NOTE]
>  %SystemDrive% は、インターネット インフォメーション サービス \(IIS\) がインストールされているドライブの場所に応じて、通常は C: または D: になります。  
  
 「[Windows Communication Foundation サンプルの 1 回限りのセットアップの手順](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md)」で Setupvroot.bat ファイルと Cleanupvroot.bat ファイルを使用すると、仮想ディレクトリを作成できます。この仮想ディレクトリを手動で作成する場合は、次の手順に従います。  
  
## 手順  
  
#### 仮想ディレクトリを IIS 7.0 または 7.5 で作成するには  
  
1.  **\[スタート\]** メニューの **\[ファイル名を指定して実行\]** をクリックし、「**inetmgr**」と入力してインターネット インフォメーション サービス \(IIS\) MMC スナップインを開きます。  
  
2.  左のペインで、コンピューター名のノードを展開し、**\[サイト\]** ノードを展開します。  
  
3.  **\[既定の Web サイト\]** を右クリックして **\[アプリケーションの追加\]** をクリックし、**\[アプリケーションの追加\]** ウィンドウを開きます。  
  
4.  このウィンドウで、作成する仮想ディレクトリのエイリアスとして「`servicemodelsamples`」と入力します。  
  
5.  次のディレクトリを作成します。%SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples  
  
6.  物理パスを %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples に設定します。WCF サンプルの多くは、ビルド時にサービス実行可能ファイルをこの場所にコピーします。  
  
7.  **\[OK\]** をクリックします。Web アプリケーションが、WCF サンプル用に作成されました。  
  
    > [!NOTE]
    >  すべての [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] サンプルで同じ servicemodelsamples Web アプリケーションを使用するため、この作業は 1 回だけ実行してください。  
  
    > [!NOTE]
    >  このドキュメントでは、`virtual directory`という用語は `Web application`と同じ意味で使用しています。  
  
     仮想ディレクトリの作成に加えて、さらに仮想ディレクトリのプロパティを設定し、[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] サービスの実行を有効にする必要があります。詳細については、以下を参照してください。  
  
#### 仮想ディレクトリを IIS 5.1 または 6.0 で作成するには  
  
1.  コマンド プロンプト ウィンドウを開き、「`start inetmgr`」と入力して、インターネット インフォメーション サービス \(IIS\) MMC スナップインを開きます。  
  
2.  左のペインで、コンピュータ名のノード、**\[Web サイト\]** ノードの順に展開します。  
  
3.  **\[既定の Web サイト\]** を右クリックして **\[新規作成\]、\[仮想ディレクトリ\]** の順にクリックし、仮想ディレクトリの作成ウィザードを開きます。  
  
4.  このウィザードで、作成する仮想ディレクトリのエイリアスとして「`servicemodelsamples`」と入力します。  
  
5.  パスを %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples に設定します。[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] サンプルの多くは、ビルド時にサービス実行可能ファイルをこの場所にコピーします。  
  
6.  **\[次へ\]** をクリックします。  
  
7.  既定では、次のチェック ボックスがオンになっています。  
  
    -   **\[読み取り\]**  
  
    -   **\[ASP などのスクリプトを実行する\]**  
  
8.  **\[次へ\]** をクリックし、**\[完了\]** をクリックしてウィザードを完了します。  
  
    > [!NOTE]
    >  すべての [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] サンプルで同じ servicemodelsamples 仮想ディレクトリを使用するため、この作業は 1 回だけ実行してください。  
  
#### 仮想ディレクトリの追加プロパティを IIS 7.0 または 7.5 で設定するには  
  
1.  servicemodelsamples ノードをクリックします。ウィンドウの下端に沿って 2 つのビューが表示されます。**\[機能ビュー\]** が選択されていない場合は、選択します。  
  
2.  **\[ディレクトリの参照\]** のエントリをダブルクリックします。  
  
3.  操作ウィンドウで、**\[有効\]** をクリックします。これにより、Internet Explorer でディレクトリにアクセスできるようになり、サービスのデバッグに役立ちます。  
  
 最後に、servicemodelsamples フォルダーのセキュリティ プロパティを、他のユーザーがアクセスできるように設定する必要があります。詳細については、以下を参照してください。  
  
#### 仮想ディレクトリの追加プロパティを IIS 5.1 または 6.0 で設定するには  
  
1.  servicemodelsamples ノードを右クリックし、**\[プロパティ\]** をクリックします。  
  
2.  既定では、次のチェック ボックスがオンになっています。  
  
    -   **\[読み取り\]**  
  
    -   **\[ログ アクセス\]**  
  
    -   **\[このリソースにインデックスを付ける\]**  
  
3.  **\[ディレクトリの参照\]** チェック ボックスをオンにします。これにより、Internet Explorer でディレクトリにアクセスできるようになり、サービスのデバッグに役立ちます。  
  
#### フォルダーのセキュリティ プロパティを IIS 7.0 または 7.5 で設定するには  
  
1.  %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples に移動します。  
  
2.  servicemodelsamples フォルダーを右クリックして、**\[共有\]** または **\[共有する相手\]** をクリックします。  
  
3.  **\[追加\]** ボタンの左側にある下矢印をクリックします。  
  
4.  **\[検索\]** エントリを選択します。**\[ユーザーまたはグループの選択\]** ウィンドウが開きます。  
  
5.  **\[次へ\]** をクリックします。  
  
6.  **\[場所\]** をクリックします。**\[場所\]** ウィンドウが開きます。  
  
7.  使用するコンピューターのエントリを選択します。一覧表示されているドメインやネットワークのエントリではなく、ローカル コンピューターを選択してください。コンピューターの指定が終わったら、**\[OK\]** をクリックします。  
  
8.  **\[検索開始\]** をクリックします。これで、ローカル コンピューターに関連付けられたオブジェクトが検索結果に表示されます。  
  
9. **\[名前 \(相対識別名\)\]** 列で、**\[IIS\_IUSRS\]** エントリを検索します。そのエントリを選択して **\[OK\]** をクリックし、検索結果ウィンドウを閉じます。  
  
10. **\[OK\]** をクリックして **\[ユーザーまたはグループの選択\]** ウィンドウを閉じます。  
  
11. **\[共有\]** をクリックして変更内容を保存します。  
  
12. 共有を有効にするための変更が完了したら、**\[完了\]** をクリックして **\[ファイルの共有\]** ウィンドウを閉じます。  
  
#### フォルダーのセキュリティ プロパティを IIS 5.1 または 6.0 で設定するには  
  
1.  %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples に移動します。  
  
2.  **servicemodelsamples** フォルダーを右クリックして、**\[共有とセキュリティ\]** をクリックします。  
  
3.  **\[セキュリティ\]** タブをクリックします。  
  
4.  IIS 6.0 を使用している場合は、**\[グループ名またはユーザー名\]** ボックスで **\[インターネット ゲスト アカウント\]** が表示されていることを確認します。  
  
     表示されていない場合:  
  
    1.  **\[スタート\]** ボタンをクリックし、**\[コントロール パネル\]** をクリックします。  
  
    2.  **\[ユーザー アカウント\]** アイコンが表示されない場合は、**\[カテゴリの表示に切り替える\]** をクリックします。  
  
    3.  **\[ユーザー アカウント\]** アイコンをクリックします。  
  
    4.  \[コントロール パネルを選んで実行します\] の下の **\[ユーザー アカウント\]** をクリックします。  
  
    5.  **\[ユーザー アカウント\]** ダイアログ ボックスの **\[詳細\]** タブをクリックします。  
  
    6.  **\[次へ\]** をクリックします。  
  
    7.  **\[ローカル ユーザーとグループ\]** ダイアログ ボックスで、**\[ユーザー\]** フォルダーをクリックして展開します。  
  
    8.  右側のウィンドウで、**\[インターネット ゲスト アカウント\]** をダブルクリックします。  
  
    9. **\[プロパティ\]** ダイアログ ボックスで、インターネット ゲスト アカウントとして使用されている名前をコピーします。既定では、その名前は "USR\_" で始まり、その次にコンピューターの名前が続きます。  
  
    10. **\[プロパティ\]** ダイアログ ボックスを閉じます。  
  
    11. **\[ローカル ユーザーとグループ\]** ダイアログ ボックスを閉じます。  
  
    12. **\[ユーザー アカウント\]** ダイアログ ボックスを閉じます。  
  
    13. その他の **\[ユーザー アカウント\]** ダイアログ ボックスを閉じます。  
  
    14. **\[servicemodelsamples のプロパティ\]** ダイアログ ボックスの **\[セキュリティ\]** タブで、**\[追加\]** ボタンをクリックします。  
  
    15. コンピューター名、バックスラッシュの順に入力し、続いてインターネット ユーザー アカウントの名前を貼り付けます。たとえば、myMachineName\\%InternetGuestAccountName% のようになります。  
  
    16. **\[名前の確認\]** をクリックして、追加した名前を検証します。名前が有効な場合は、すべての文字が下線付きの大文字になります。  
  
5.  IIS 6.0 の場合はさらに、**\[グループ名またはユーザー名\]** ボックスに NETWORK SERVICE が表示されていることを確認します。  
  
     NETWORK SERVICE が表示されていない場合:  
  
    1.  **\[追加\]** をクリックします。  
  
    2.  **\[ユーザーまたはグループの選択\]** ダイアログ ボックスに、コンピューター名、バックスラッシュの順に入力します。  
  
    3.  バックスラッシュの後に、スペースを入れずに「service」と入力します。  
  
    4.  **\[名前の確認\]** をクリックします。  
  
    5.  複数の名前が表示された場合は、**\[NETWORK SERVICE\]** をクリックして **\[OK\]** をクリックします。  
  
    6.  **\[OK\]** をクリックして **\[ユーザーまたはグループの選択\]** ダイアログ ボックスを閉じます。  
  
6.  Windows XP SP2 で IIS 5.1 を使用している場合は、**\[グループ名またはユーザー名\]** ボックスに "インターネット ゲスト アカウント" と "ASPNET" の両方が表示されていることを確認します。  
  
     ASPNET ユーザーは、組み込みの **\[ユーザー\]** セキュリティ グループのメンバになることができます。この場合、**\[ユーザー\]** グループがこのダイアログ ボックスに表示されていれば、許可されたユーザーの名前の一覧に別個の項目として ASPNET を追加する必要はありません。  
  
     ASPNET が **\[ユーザー\]** セキュリティ グループのメンバであるかどうかを確認するには :  
  
    1.  **\[スタート\]** メニューの **\[コントロール パネル\]** をクリックします。  
  
    2.  **\[ユーザー アカウント\]** アイコンをクリックします。  
  
    3.  **\[グループ\]** 列で、**\[ASPNET\]** の値が "Users" であることを確認します。  
  
## 参照  
 [インターネット インフォメーション サービスのホスティング手順](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md)