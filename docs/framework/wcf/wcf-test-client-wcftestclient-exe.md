---
title: WCF のテスト用クライアント (WcfTestClient.exe)
ms.date: 03/30/2017
ms.assetid: d4302855-677f-4640-aa90-c5d785d72fb7
ms.openlocfilehash: 78be40268b46c4c85ee034db67d67ee0fbf2158f
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2018
ms.locfileid: "33809746"
---
# <a name="wcf-test-client-wcftestclientexe"></a>WCF のテスト用クライアント (WcfTestClient.exe)
Windows Communication Foundation (WCF) をテスト クライアント (WcfTestClient.exe) は、ユーザーがテスト パラメーターを入力し、その入力をサービスを有効にし、サービスを返信する応答を表示する GUI ツールです。 テストできるように WCF サービス ホストと組み合わせると、シームレスにサービスを提供します。  
  
 通常、WCF テスト クライアント (WcfTestClient.exe) は、次の場所に入手できます: C:\Program Files (x86) \Microsoft Visual Studio\2017\Community\Common7\IDE - コミュニティされるいずれかの"Enterprise"、「担当者」または「コミュニティ」に依存Visual Studio のレベルがインストールされます。
  
## <a name="scenarios-for-using-test-client"></a>テスト用クライアントを使用するシナリオ  
 次のセクションでは、WCF テスト クライアントを開発プロセスを効率化を使用できる最も一般的なシナリオについて説明します。  
  
### <a name="inside-visual-studio"></a>Visual Studio 内  
  
#### <a name="wcf-service-host-starts-wcf-test-client-with-a-single-service"></a>WCF サービス ホストが、1 つのサービスを使用する WCF のテスト用クライアントを開始する  
 新しい WCF サービス プロジェクトを作成し、デバッガーの起動時に f5 キーを押すと、プロジェクトでサービスをホストする WCF サービス ホストが開始されます。 次に、WCF テスト クライアントが開き、構成ファイルで定義されているサービス エンドポイントの一覧を表示します。 ユーザーは、パラメーターをテストしてサービスを呼び出すことができ、このプロセスを繰り返して、サービスのテストおよび検証を継続的に行うことができます。  
  
#### <a name="wcf-service-host-starts-wcf-test-client-with-multiple-services"></a>WCF サービス ホストが、複数のサービスを使用する WCF のテスト用クライアントを開始する  
 複数のサービスを含むサービス プロジェクトをデバッグする際に WCF テスト クライアントを使用することもできます。 WCF テスト クライアントが開いたら、自動的にプロジェクトのサービスの一覧を繰り返し処理し、テストするためにそれらを開きます。  
  
### <a name="outside-visual-studio"></a>Visual Studio の外部  
 インターネット上の任意のサービスをテストする Visual Studio の外部 WCF テスト クライアント (WcfTestClient.exe) を呼び出すこともできます。 このツールを見つけるには、次の場所に移動します。  
  
 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\  
  
 ツールを使用するには、ファイル名をダブルクリックしてこの場所からツールを開くか、コマンド ラインからツールを起動します。  
  
 Uri の任意の数は、WCF テスト クライアントは、コマンドライン引数として受け取ります。  これらの引数には、テストできるサービスの URI を指定します。  
  
 `wcfTestClient.exe URI1 URI2 …`  
  
 WCF テスト クライアント ウィンドウを開いた後にをクリックして**ファイル**->**サービスの追加**、開きたいサービスのエンドポイント アドレスを入力します。  
  
## <a name="wcf-test-client-user-interface"></a>WCF のテスト用クライアントのユーザー インターフェイス  
 WCF テスト クライアントは、1 つのサービスまたは複数のサービスで使用できます。  
  
### <a name="service-operations"></a>サービス操作  
 WCF テスト クライアントのメイン ウィンドウの左側のウィンドウには、すべての利用可能なサービス、および、それぞれのエンドポイントと操作が一覧表示します。  
  
 操作をダブルクリックすると、その操作の名前が付いた新しいタブ内の右ペインで、操作の内容を表示できます。  
  
 左ペインには、クライアントの構成ファイルも表示されます。 いずれかの項目をダブルクリックすると、右ペインの新しいタブ付きウィンドウにファイルの内容が表示されます。  
  
### <a name="entering-test-parameters"></a>テスト パラメーターの入力  
 テスト パラメーターを表示するには、右ペインで操作をダブルクリックして開きます。 パラメーターを示す**表示書式**既定では、表示され、サービスをテスト パラメーターに任意の値を入力できます。  
  
 表示するには、メッセージの XML をクリックして**XML**です。 それらをサービスに送信する をクリックして**Invoke**です。  
  
 データセット パラメーターをクリックして、**しています.** ボタンの横に**を編集しています.** データ グリッドを表示する新しいウィンドウで編集します。 外観に注意してください、 **DataSet のコピー**と**貼り付けデータセット**ボタン。 最初の編集時に DataSet オブジェクトのスキーマが不明の場合、DataGrid は空になります。 スキーマが同じ DataSet オブジェクトを DataGrid の現在のオブジェクトに貼り付ける必要があります  (スキーマは、貼り付け操作の前に別の場所からコピーする必要があります)。クリックして、将来の使用量のデータセット オブジェクトをコピーすることも、 **DataSet のコピー**ボタンをクリックします。  
  
 サービスの応答がテスト パラメーターの下に表示されます。  
  
> [!NOTE]
>  想定される戻り値が文字列の場合、入力が引用符で囲まれていなくても、結果は引用符で囲まれた文字列として表示されます。  
  
 サービスのコントラクトの作成時に特定の操作を一方向として指定した場合は、サービスの応答は表示されません。 メッセージが配信のキューに置かれると、メッセージが正常に送信されたことを通知するダイアログ ボックスがすぐに表示されます。  
  
### <a name="session-support"></a>セッション サポート  
 **新しいプロキシを開始**サービス操作のタブでチェック ボックスでは、セッション サポートを切り替えることができます。 既定では、このチェック ボックスはオフになります。  
  
 特定の操作 (または同じサービス エンドポイントの別の操作) のテスト パラメーターを入力し、をクリックして**Invoke**複数回チェック ボックスをオフになって、これらの操作が 1 つのプロキシを共有し、サービスの状態が複数の操作には、永続化されます。  
  
 場合、**新しいプロキシを開始** チェック ボックスをオンになって、新しいプロキシが開始された各**Invoke**、前のセッション シナリオが終了すると、およびサービスの状態をリセットします。  
  
### <a name="editing-client-configuration"></a>クライアント構成の編集  
 WCF テスト クライアントのメイン ウィンドウの左側のウィンドウには、クライアント構成ファイルが一覧表示します。 いずれかの項目をダブルクリックすると、右ペインにファイルの内容が表示されます。  
  
#### <a name="edit-with-service-configuration-editor"></a>サービス構成エディターを使用した編集  
 右クリック**Config ファイル**、左側のウィンドウ クリックし、コンテキスト メニューで**SvcConfigEditor で編集**です。 サービス構成エディターが起動し、クライアント構成の内容が表示されます。 このツール内で構成を編集して保存できます。  
  
 サービス構成エディターでファイルを保存した後は、WCF テスト クライアントは、ファイルが外部で変更されましたし、再読み込みするかどうかを確認することを通知する警告メッセージを表示します。  
  
 選択した場合**はい**、[Client.dll.config] タブで設定内容がエディターで行った変更を反映します。  
  
 選択した場合**いいえ**の構成 [Client.dll.config] タブの内容が変更されない、および変更されたコンテンツは自動的にソース ファイルに保存します。  
  
#### <a name="restore-to-default-configuration"></a>既定の構成への復元  
 すべての変更をキャンセルし、既定のクライアント構成に復元を右クリックしたい場合**Config ファイル**、左側のウィンドウ クリックし、コンテキスト メニューで**既定の構成に復元**です。既定の構成値が読み込まれ、[Client.dll.config] タブの内容を復元します。  
  
#### <a name="validate-changes"></a>変更の検証  
 保存された変更は、WCF テスト クライアントに読み込まれるは、WCF スキーマに対して有効かどうか、構成がチェックされます。 エラーが見つかった場合は、エラーの詳細を示すダイアログ ボックスが表示されます。  
  
 プロキシの生成は、バイナリのコンパイル中、またはサービスの呼び出し、中に (つまり、および「... の編集」、「復元...」) の編集をサポートするメニュー項目が無効になります。 WCF テスト クライアントに更新された構成の読み込み時に、サービスの呼び出しも無効になります。  
  
#### <a name="persist-client-configuration"></a>クライアント構成の保持  
 **ツール**->**オプション**->**クライアント構成** タブには、**常に再生成の構成時に起動します。サービス**オプションは、既定で有効にします。 このオプションは、WCF テスト クライアントでサービスが読み込まれるたびに、最新のサービス コントラクトとサービスの App.config ファイルに基づいて構成ファイル再生することを指定します。  
  
 WCF サービスのクライアントの構成を編集し、常に使用する、この更新ファイルをオフにすることができます、サービスをデバッグするかどうか、**を再生成**オプション。 これにより、サービスを更新し、WCF テスト クライアントを再び開く場合でも、Client.dll.config ファイルは、更新されたサービスに基づいて再生成の代わりに以前に更新したです。  
  
 ただし、再生成されたプロキシとの一貫性を保つために、構成ファイルの編集が必要になる場合があります。 サービスを更新したことが原因で、再生成されたプロキシと構成ファイルが一致しなくなると、サービスを呼び出したときにエラーが発生します。  
  
> [!CAUTION]
>  変更したクライアント構成ファイルを後で再利用することにした場合、該当するファイルは次の場所で見つけることができます。  
>   
>  \Documents and 設定\\\My Documents\Test クライアント プロジェクトの [ユーザー アカウント]。  
>   
>  クライアント構成ファイルに格納されている更新された資格情報は、このフォルダーのアクセス制御リスト (ACL) によって保護されています。  
  
### <a name="adding-removing-and-refreshing-services"></a>サービスの追加、削除、および更新  
  
#### <a name="add-service"></a>サービスの追加  
 をクリックして**ファイル**->**サービスの追加**WCF テスト クライアントにサービスを追加します。 次に、追加するサービスの URI (エンドポイント アドレス) を入力する必要があります。 サービスのアドレスには、MEX アドレスまたは WSDL アドレスを指定できます。  
  
 10 の最近追加されたサービスのエンドポイントの一覧を見つけることもできます、**最近サービス**サブメニュー。 それらのいずれかを選択した場合、指定されたサービスは、WCF テスト クライアントに追加されます。  
  
 また、サービスのツリーのルートを右クリックすることもできます。**マイ サービス プロジェクト**、を選択し**サービスの追加**に同じ結果を実現します。  
  
 プロキシの生成中、バイナリのコンパイル中、またはサービスの呼び出し中は、サービスの追加をサポートするメニュー項目が無効になります。 また、サービスの呼び出しも無効になります。  
  
#### <a name="remove-service"></a>サービスの削除  
 削除して、選択するサービスのサービス ルートを右クリックして**サービスの削除**WCF テスト クライアントからサービスを削除します。  
  
 プロキシの生成中、バイナリのコンパイル中、またはサービスの呼び出し中は、サービスの削除をサポートするメニュー項目が無効になります。 また、サービスの呼び出しも無効になります。  
  
#### <a name="refresh-service"></a>サービスの更新  
 変更が行われた場合、サービスに WCF テスト クライアントが実行されていると、そのサービスの WCF テスト クライアントの実装が最新であることを確認するときに右クリックし、サービスのサービス ルート**更新サービス**です。 更新後、サービスの状態はリセットされます。  
  
 プロキシの生成中、バイナリのコンパイル中、またはサービスの呼び出し中は、サービスの更新をサポートするメニュー項目が無効になります。 また、サービスの呼び出しも無効になります。  
  
## <a name="location-of-files-generated-by-the-test-client"></a>テスト クライアントが生成するファイルの場所  
 既定では、WCF テスト クライアントによって生成されたクライアント コードと構成ファイルは"%appdata%\Local\temp\Test Client Projects"フォルダーです。 WCF テスト クライアントが終了した後、このフォルダーが削除されます。 WCF テスト クライアントで、構成ファイルが変更されたかどうか、**常に再生成 Config サービスの起動時**オプションが無効になっている、変更されたファイルは"My Documents\Test クライアント プロジェクトの下の"キャッシュ Config"フォルダーにコピーDocuments\Test Client Projects"のマッピング (メタデータのアドレスの名前へのファイルの) XML ファイルをインデックスとして使用します。  
  
 コマンドラインを使用して、WCF テスト クライアントを起動することも、`/ProjectPath`スイッチを生成されたファイルを格納する新しいパスを指定またはを使用して、`/RestoreProjectPath`スイッチを既定の場所を復元します。 構文は次のとおりです。  
  
 `wcfTestClient.exe /ProjectPath [desired location]`  
  
 このコマンドを実行しても、WCF テスト クライアントは開きません。 フォルダーの場所が変更されるだけです。 WCF テスト クライアントが実行されているかどうかどうかは、このコマンドを実行することができます。 新しい場所は、WCF テスト クライアントを再起動したときに適用されます。 場所の情報は、レジストリか、"%appdata%\Local\temp\Test Client Projects"フォルダーの WcfTestClient.exe.option ファイルに保存できます。  
  
## <a name="features-supported-by-wcf-test-client"></a>WCF のテスト用クライアントでサポートされる機能  
 WCF テスト クライアントでサポートされる機能の一覧を次に示します。  
  
-   サービスの呼び出し : 要求/応答メッセージおよび一方向メッセージ  
  
-   バインディング : Svcutil.exe でサポートされるすべてのバインディング  
  
-   セッションの制御  
  
-   メッセージ コントラクト  
  
-   XML シリアル化  
  
 WCF テスト クライアントでサポートされない機能の一覧を次に示します。  
  
-   型: <xref:System.IO.Stream>、<xref:System.ServiceModel.Channels.Message>、<xref:System.Xml.XmlElement>、<xref:System.Xml.XmlAttribute>、<xref:System.Xml.XmlNode>、<xref:System.Xml.Serialization.IXmlSerializable> インターフェイスを実装する型 (関連する <xref:System.Xml.Serialization.XmlSchemaProviderAttribute> 属性を含む)、<xref:System.Xml.Linq.XDocument> 型と <xref:System.Xml.Linq.XElement> 型、および ADO.NET <xref:System.Data.DataTable> 型。  
  
-   双方向コントラクト  
  
-   トランザクション  
  
-   セキュリティ : [!INCLUDE[infocard](../../../includes/infocard-md.md)]、証明書、およびユーザー名/パスワード  
  
-   バインディング : WSFederationBinding、任意のコンテキスト バインディングおよび HTTPS バインディング、WebHttpBinding (JSON 応答メッセージ サポート)  
  
## <a name="closing-wcf-test-client"></a>WCF のテスト用クライアントの終了  
 次のように WCF テスト クライアントを閉じることができます。  
  
-   **ファイル** メニューのをクリックして**終了**です。 また、WCF テスト クライアントのメイン ウィンドウで次のようにクリックします。**閉じる**です。 これらのアクションも WCF サービスの自動ホストをシャット ダウン、および Visual Studio で WCF テスト クライアントを起動した場合は、Visual Studio デバッグ プロセスを停止します。  
  
-   右クリックし、 **WCF サービス ホスト**をクリックして通知領域アイコン**終了します。** これにより、シャット ダウン、WCF サービスの自動ホストと WCF テスト クライアントの両方と、Visual Studio のデバッグ処理を停止します。  
  
## <a name="see-also"></a>関連項目  
 [WCF サービス ホスト (WcfSvcHost.exe)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)
