---
title: "Windows Communication Foundation のセキュリティ動作"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 513232c0-39fd-4409-bda6-5ebd5e0ea7b0
caps.latest.revision: "23"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.openlocfilehash: f338eff156646a2df063da84eead274a34a39159
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/21/2017
---
# <a name="security-behaviors-in-wcf"></a><span data-ttu-id="61984-102">Windows Communication Foundation のセキュリティ動作</span><span class="sxs-lookup"><span data-stu-id="61984-102">Security Behaviors in WCF</span></span>
<span data-ttu-id="61984-103">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] では、さまざまな動作によって、サービス レベルまたはエンドポイント レベルで実行時の動作が変更されます </span><span class="sxs-lookup"><span data-stu-id="61984-103">In [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], behaviors modify run-time behavior at the service level or at the endpoint level.</span></span> <span data-ttu-id="61984-104">([!INCLUDE[crabout](../../../../includes/crabout-md.md)]動作は一般を参照してください[サービスの実行時の動作を指定する](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md))。*セキュリティ動作*および監査ログの資格情報、認証、承認、制御を許可します。</span><span class="sxs-lookup"><span data-stu-id="61984-104">([!INCLUDE[crabout](../../../../includes/crabout-md.md)] behaviors in general, see [Specifying Service Run-Time Behavior](../../../../docs/framework/wcf/specifying-service-run-time-behavior.md).) *Security behaviors* allow control over credentials, authentication, authorization, and auditing logs.</span></span> <span data-ttu-id="61984-105">動作は、プログラムまたは構成を通じて使用できます。</span><span class="sxs-lookup"><span data-stu-id="61984-105">You can use behaviors either by programming or through configuration.</span></span> <span data-ttu-id="61984-106">ここでは、セキュリティ機能に関連する以下の動作の構成について説明します。</span><span class="sxs-lookup"><span data-stu-id="61984-106">This topic focuses on configuring the following behaviors related to security functions:</span></span>  
  
-   <span data-ttu-id="61984-107">[\<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-107">[\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md).</span></span>  
  
-   <span data-ttu-id="61984-108">[\<clientCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-108">[\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md).</span></span>  
  
-   <span data-ttu-id="61984-109">[\<serviceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-109">[\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md).</span></span>  
  
-   <span data-ttu-id="61984-110">[\<serviceSecurityAudit >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-110">[\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md).</span></span>  
  
-   <span data-ttu-id="61984-111">[\<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md)をも使用すると、クライアントがメタデータにアクセスできるセキュリティで保護されたエンドポイントを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-111">[\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md), which also enables you to specify a secure endpoint that clients can access for metadata.</span></span>  
  
## <a name="setting-credentials-with-behaviors"></a><span data-ttu-id="61984-112">動作を使用した資格情報の設定</span><span class="sxs-lookup"><span data-stu-id="61984-112">Setting Credentials with Behaviors</span></span>  
 <span data-ttu-id="61984-113">使用して、 [ \<serviceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md)と[ \<clientCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md)サービスまたはクライアントの資格情報の値を設定します。</span><span class="sxs-lookup"><span data-stu-id="61984-113">Use the [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) and [\<clientCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/clientcredentials.md) to set credential values for a service or client.</span></span> <span data-ttu-id="61984-114">基になるバインド構成によって、資格情報を設定する必要があるかどうかが決まります。</span><span class="sxs-lookup"><span data-stu-id="61984-114">The underlying binding configuration determines whether a credential has to be set.</span></span> <span data-ttu-id="61984-115">たとえば、セキュリティ モードが `None` に設定されている場合、クライアントとサービスは相互に認証を行わないため、どの種類の資格情報も必要ありません。</span><span class="sxs-lookup"><span data-stu-id="61984-115">For example, if the security mode is set to `None`, both clients and services do not authenticate each other and require no credentials of any type.</span></span>  
  
 <span data-ttu-id="61984-116">一方、サービス バインディングでは、クライアント資格情報の種類が必要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="61984-116">On the other hand, the service binding can require a client credential type.</span></span> <span data-ttu-id="61984-117">その場合は、動作を使用して資格情報の値を設定することが必要になる場合があります </span><span class="sxs-lookup"><span data-stu-id="61984-117">In that case, you may have to set a credential value using a behavior.</span></span> <span data-ttu-id="61984-118">([!INCLUDE[crabout](../../../../includes/crabout-md.md)] 、資格情報の種類を参照してください[資格情報の種類を選択すると](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md))。Windows 資格情報を使用して認証を行う場合などは、実際の資格情報の値が環境によって自動的に設定されるため、資格情報の別のセットを指定する場合を除き、資格情報の値を明示的に設定する必要がないこともあります。</span><span class="sxs-lookup"><span data-stu-id="61984-118">([!INCLUDE[crabout](../../../../includes/crabout-md.md)] the possible types of credentials, see [Selecting a Credential Type](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md).) In some cases, such as when Windows credentials are used to authenticate, the environment automatically establishes the actual credential value and you do not need to explicitly set the credential value (unless you want to specify a different set of credentials).</span></span>  
  
 <span data-ttu-id="61984-119">子要素としてすべてのサービス資格情報がある、 [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-119">All service credentials are found as child elements of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="61984-120">サービス資格情報として使用される証明書を次の例に示します。</span><span class="sxs-lookup"><span data-stu-id="61984-120">The following example shows a certificate used as a service credential.</span></span>  
  
```xml  
<configuration>  
 <system.serviceModel>  
  <behaviors>  
   <serviceBehaviors>  
    <behavior name="ServiceBehavior1">  
     <serviceCredentials>  
      <serviceCertificate findValue="000000000000000000000000000"   
                          storeLocation="CurrentUser"  
      storeName="Root" x509FindType="FindByThumbprint" />  
     </serviceCredentials>  
    </behavior>  
   </serviceBehaviors>  
  </behaviors>  
 </system.serviceModel>  
</configuration>  
```  
  
## <a name="service-credentials"></a><span data-ttu-id="61984-121">サービス資格情報</span><span class="sxs-lookup"><span data-stu-id="61984-121">Service Credentials</span></span>  
 <span data-ttu-id="61984-122">[ \<ServiceCredentials >](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) 4 つの子要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="61984-122">The [\<serviceCredentials>](../../../../docs/framework/configure-apps/file-schema/wcf/servicecredentials.md) contains four child elements.</span></span> <span data-ttu-id="61984-123">以下のセクションでは、これらの要素とそれぞれの使い方について説明します。</span><span class="sxs-lookup"><span data-stu-id="61984-123">The elements and their usages are discussed in the following sections.</span></span>  
  
### <a name="servicecertificate-element"></a><span data-ttu-id="61984-124">\<serviceCertificate > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-124">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="61984-125">メッセージ セキュリティ モードを使用しているクライアントへのサービスの認証に使用する X.509 証明書を指定するには、この要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-125">Use this element to specify an X.509 certificate that is used to authenticate the service to clients using Message security mode.</span></span> <span data-ttu-id="61984-126">定期的に更新される証明書を使用している場合は、証明書のサムプリントが変更されます。</span><span class="sxs-lookup"><span data-stu-id="61984-126">If you are using a certificate that is periodically renewed, then its thumbprint changes.</span></span> <span data-ttu-id="61984-127">その場合、証明書を同じサブジェクト名で再発行できるため、`X509FindType` としてサブジェクト名を使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-127">In that case, use the subject name as the `X509FindType` because the certificate can be reissued with the same subject name.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="61984-128">参照してください、要素を使用して[する方法: クライアントの資格情報の値を指定](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-128"> using the element, see [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
### <a name="certificate-of-clientcertificate-element"></a><span data-ttu-id="61984-129">\<証明書 > の\<clientCertificate > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-129">\<certificate> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="61984-130">使用して、 [\<証明書 >](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md)要素、サービスは、クライアントと安全に通信するには、事前に、クライアントの証明書がある必要とします。</span><span class="sxs-lookup"><span data-stu-id="61984-130">Use the [\<certificate>](../../../../docs/framework/configure-apps/file-schema/wcf/certificate-of-clientcertificate-element.md) element when the service must have the client's certificate in advance to communicate securely with the client.</span></span> <span data-ttu-id="61984-131">このような状況は、双方向通信パターンを使用する場合に生じます。</span><span class="sxs-lookup"><span data-stu-id="61984-131">This occurs when using the duplex communication pattern.</span></span> <span data-ttu-id="61984-132">より一般的な要求/応答パターンでは、クライアントが自身の証明書を要求に含め、サービスはこの証明書を使用して、クライアントへの応答をセキュリティで保護します。</span><span class="sxs-lookup"><span data-stu-id="61984-132">In the more typical request-reply pattern, the client includes its certificate in the request, which the service uses to secure its response back to the client.</span></span> <span data-ttu-id="61984-133">ただし、双方向通信パターンには要求も応答もありません。</span><span class="sxs-lookup"><span data-stu-id="61984-133">The duplex communication pattern, however, has no requests and replies.</span></span> <span data-ttu-id="61984-134">サービスは、クライアントの証明書を通信から推測できないため、クライアントへのメッセージをセキュリティで保護するためにクライアントの証明書が前もって必要になります。</span><span class="sxs-lookup"><span data-stu-id="61984-134">The service cannot infer the client's certificate from the communication and therefore the service requires the client's certificate in advance to secure the messages to the client.</span></span> <span data-ttu-id="61984-135">クライアントの証明書を帯域外方式で取得し、この要素を使用して証明書を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-135">You must obtain the client's certificate in an out-of-band manner and specify the certificate using this element.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="61984-136">双方向サービスを参照してください[する方法: 双方向コントラクトを作成する](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-136"> duplex services, see [How to: Create a Duplex Contract](../../../../docs/framework/wcf/feature-details/how-to-create-a-duplex-contract.md).</span></span>  
  
### <a name="authentication-of-clientcertificate-element"></a><span data-ttu-id="61984-137">\<認証 > の\<clientCertificate > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-137">\<authentication> of \<clientCertificate> Element</span></span>  
 <span data-ttu-id="61984-138">[\<認証 >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md)要素では、クライアントの認証方法をカスタマイズすることができます。</span><span class="sxs-lookup"><span data-stu-id="61984-138">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) element enables you to customize how clients are authenticated.</span></span> <span data-ttu-id="61984-139">`CertificateValidationMode` 属性は、`None`、`ChainTrust`、`PeerOrChainTrust`、`PeerTrust`、または `Custom` に設定できます。</span><span class="sxs-lookup"><span data-stu-id="61984-139">You can set the `CertificateValidationMode` attribute to `None`, `ChainTrust`, `PeerOrChainTrust`, `PeerTrust`, or `Custom`.</span></span> <span data-ttu-id="61984-140">既定では、レベルに設定が`ChainTrust`で終了する証明書の階層で各証明書を検索することを指定する、*ルート機関*チェーンの上部にあります。</span><span class="sxs-lookup"><span data-stu-id="61984-140">By default, the level is set to `ChainTrust`, which specifies that each certificate must be found in a hierarchy of certificates ending in a *root authority* at the top of the chain.</span></span> <span data-ttu-id="61984-141">これは最もセキュリティで保護されているモードです。</span><span class="sxs-lookup"><span data-stu-id="61984-141">This is the most secure mode.</span></span> <span data-ttu-id="61984-142">また、値を `PeerOrChainTrust` に設定することもできます。これは、信頼されたチェーン内の証明書と共に、自己発行された証明書 (ピア信頼) も受け入れるよう指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-142">You can also set the value to `PeerOrChainTrust`, which specifies that self-issued certificates (peer trust) are accepted as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="61984-143">自己発行の資格情報は信頼された証明機関から購入したものである必要はないため、この値はクライアントとサービスの開発およびデバッグに使用されます。</span><span class="sxs-lookup"><span data-stu-id="61984-143">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="61984-144">クライアントを展開するときは、代わりに `ChainTrust` 値を使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-144">When deploying a client, use the `ChainTrust` value instead.</span></span> <span data-ttu-id="61984-145">また、値を `Custom` に設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="61984-145">You can also set the value to `Custom`.</span></span> <span data-ttu-id="61984-146">`Custom` 値に設定する場合は、`CustomCertificateValidatorType` 属性を、証明書の検証に使用するアセンブリと型に設定する必要もあります。</span><span class="sxs-lookup"><span data-stu-id="61984-146">When set to the `Custom` value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="61984-147">独自のカスタム検証を作成するには、抽象 <xref:System.IdentityModel.Selectors.X509CertificateValidator> クラスを継承する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-147">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
### <a name="issuedtokenauthentication-element"></a><span data-ttu-id="61984-148">\<issuedTokenAuthentication > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-148">\<issuedTokenAuthentication> Element</span></span>  
 <span data-ttu-id="61984-149">発行されるトークンのシナリオには、3 つの段階があります。</span><span class="sxs-lookup"><span data-stu-id="61984-149">The issued token scenario has three stages.</span></span> <span data-ttu-id="61984-150">最初の段階で、サービスにアクセスしようとしているクライアントは呼びます、*トークン サービスをセキュリティで保護された*(STS)。</span><span class="sxs-lookup"><span data-stu-id="61984-150">In the first stage, a client trying to access a service is referred to a *secure token service* (STS).</span></span> <span data-ttu-id="61984-151">次に、STS がクライアントを認証し、その後、クライアントにトークン (通常は、SAML (Security Assertions Markup Language) トークン) を発行します。</span><span class="sxs-lookup"><span data-stu-id="61984-151">The STS then authenticates the client and subsequently issues the client a token, typically a Security Assertions Markup Language (SAML) token.</span></span> <span data-ttu-id="61984-152">最後に、クライアントがトークンを持ってサービスに戻ります。</span><span class="sxs-lookup"><span data-stu-id="61984-152">The client then returns to the service with the token.</span></span> <span data-ttu-id="61984-153">サービスはトークンを調べ、トークンを認証することでクライアントの認証を可能にするデータを確認します。</span><span class="sxs-lookup"><span data-stu-id="61984-153">The service examines the token for data that allows the service to authenticate the token and therefore the client.</span></span> <span data-ttu-id="61984-154">トークンを認証するには、セキュリティ トークン サービスで使用される証明書がサービスによって認識されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-154">To authenticate the token, the certificate that the secure token service uses must be known to the service.</span></span> <span data-ttu-id="61984-155">[ \<IssuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md)要素は、このようなセキュリティ トークン サービスの証明書のリポジトリ。</span><span class="sxs-lookup"><span data-stu-id="61984-155">The [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) element is the repository for any such secure token service certificates.</span></span> <span data-ttu-id="61984-156">証明書を追加するには、使用、 [ \<knownCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-156">To add certificates, use the [\<knownCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/knowncertificates.md).</span></span> <span data-ttu-id="61984-157">挿入、 [\<追加 >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md)証明書ごとに、次の例で示すようにします。</span><span class="sxs-lookup"><span data-stu-id="61984-157">Insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-knowncertificates.md) for each certificate, as shown in the following example.</span></span>  
  
```xml  
<issuedTokenAuthentication>  
   <knownCertificates>  
      <add findValue="www.contoso.com"   
           storeLocation="LocalMachine" storeName="My"   
           X509FindType="FindBySubjectName" />  
    </knownCertificates>  
</issuedTokenAuthentication>  
```  
  
 <span data-ttu-id="61984-158">既定では、証明書はセキュリティ トークン サービスから取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-158">By default, the certificates must be obtained from a secure token service.</span></span> <span data-ttu-id="61984-159">このような "既知" の証明書により、正当なクライアントのみがサービスにアクセスできるようになります。</span><span class="sxs-lookup"><span data-stu-id="61984-159">These "known" certificates ensure that only legitimate clients can access a service.</span></span>  
  
 <span data-ttu-id="61984-160">使用する必要があります、 [ \<allowedAudienceUris >](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md)利用するフェデレーション アプリケーション内のコレクション、*トークン サービスをセキュリティで保護された*(STS) を発行する`SamlSecurityToken`セキュリティ トークン。</span><span class="sxs-lookup"><span data-stu-id="61984-160">You should use the [\<allowedAudienceUris>](../../../../docs/framework/configure-apps/file-schema/wcf/allowedaudienceuris.md) collection in a federated application that utilizes a *secure token service* (STS) that issues `SamlSecurityToken` security tokens.</span></span> <span data-ttu-id="61984-161">STS がセキュリティ トークンを発行する場合、このセキュリティ トークンに `SamlAudienceRestrictionCondition` を追加して、セキュリティ トークンの提供先となる Web サービスの URI を指定できます。</span><span class="sxs-lookup"><span data-stu-id="61984-161">When the STS issues the security token, it can specify the URI of the Web services for which the security token is intended by adding a `SamlAudienceRestrictionCondition` to the security token.</span></span> <span data-ttu-id="61984-162">これにより、受け取り側 `SamlSecurityTokenAuthenticator` Web サービスは、次のようにしてこのチェックが行われるように指定することで、発行されたセキュリティ トークンがこの Web サービスを対象としていることを確認できます。</span><span class="sxs-lookup"><span data-stu-id="61984-162">That allows the `SamlSecurityTokenAuthenticator` for the recipient Web service to verify that the issued security token is intended for this Web service by specifying that this check should happen by doing the following:</span></span>  
  
-   <span data-ttu-id="61984-163">設定、`audienceUriMode`の属性[ \<issuedTokenAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md)に`Always`または`BearerKeyOnly`です。</span><span class="sxs-lookup"><span data-stu-id="61984-163">Set the `audienceUriMode` attribute of [\<issuedTokenAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtokenauthentication-of-servicecredentials.md) to `Always` or `BearerKeyOnly`.</span></span>  
  
-   <span data-ttu-id="61984-164">このコレクションに URI を追加して、有効な URI のセットを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-164">Specify the set of valid URIs, by adding the URIs to this collection.</span></span> <span data-ttu-id="61984-165">これを行うには、挿入、 [\<追加 >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md)の各 URI に対して</span><span class="sxs-lookup"><span data-stu-id="61984-165">To do this, insert an [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-allowedaudienceuris.md) for each URI</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-166">「<xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="61984-166"> <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator>.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="61984-167">この構成要素を使用して参照してください[する方法: フェデレーション サービスの資格情報の構成](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-167"> using this configuration element, see [How to: Configure Credentials on a Federation Service](../../../../docs/framework/wcf/feature-details/how-to-configure-credentials-on-a-federation-service.md).</span></span>  
  
#### <a name="allowing-anonymous-cardspace-users"></a><span data-ttu-id="61984-168">匿名の CardSpace ユーザーの許可</span><span class="sxs-lookup"><span data-stu-id="61984-168">Allowing Anonymous CardSpace Users</span></span>  
 <span data-ttu-id="61984-169">`AllowUntrustedRsaIssuers` 要素の `<IssuedTokenAuthentication>` 属性を `true` に設定すると、任意の RSA キー ペアで署名された自己発行トークンを提示することがすべてのクライアントに明示的に許可されます。</span><span class="sxs-lookup"><span data-stu-id="61984-169">Setting the `AllowUntrustedRsaIssuers` attribute of the `<IssuedTokenAuthentication>` element to `true` explicitly allows any client to present a self-issued token signed with an arbitrary RSA key pair.</span></span> <span data-ttu-id="61984-170">発行者が*信頼されていない*キーに関連付けられている発行者のデータがあるないためです。</span><span class="sxs-lookup"><span data-stu-id="61984-170">The issuer is *untrusted* because the key has no issuer data associated with it.</span></span> <span data-ttu-id="61984-171">[!INCLUDE[infocard](../../../../includes/infocard-md.md)] ユーザーは、ID の自己提供クレームを含む自己発行カードを作成できます。</span><span class="sxs-lookup"><span data-stu-id="61984-171">A [!INCLUDE[infocard](../../../../includes/infocard-md.md)] user can create a self-issued card that includes self-provided claims of identity.</span></span> <span data-ttu-id="61984-172">この機能を使用するときは十分に注意してください。</span><span class="sxs-lookup"><span data-stu-id="61984-172">Use this capability with caution.</span></span> <span data-ttu-id="61984-173">この機能を使用する場合は、RSA 公開キーを、ユーザー名と一緒にデータベースに格納する必要のある比較的安全なパスワードとして考えます。</span><span class="sxs-lookup"><span data-stu-id="61984-173">To use this feature, think of the RSA public key as a more secure password that should be stored in a database along with a user name.</span></span> <span data-ttu-id="61984-174">サービスへのクライアント アクセスを許可する前に、クライアントから提示された RSA 公開キーを、提示されたユーザー名に対応する格納済みの公開キーと比較して検証します。</span><span class="sxs-lookup"><span data-stu-id="61984-174">Before allowing a client access to the service, verify the client-presented RSA public key by comparing it with the stored public key for the presented user name.</span></span> <span data-ttu-id="61984-175">これは、ユーザーが各自のユーザー名を登録し、自己発行の RSA 公開キーに関連付けることができる登録プロセスが確立されていることが前提となります。</span><span class="sxs-lookup"><span data-stu-id="61984-175">This presumes that you have established a registration process whereby users can register their user names and associate them with the self-issued RSA public keys.</span></span>  
  
## <a name="client-credentials"></a><span data-ttu-id="61984-176">クライアント資格情報</span><span class="sxs-lookup"><span data-stu-id="61984-176">Client Credentials</span></span>  
 <span data-ttu-id="61984-177">クライアント資格情報は、相互認証が必要な場合にサービスに対するクライアントの認証に使用されます。</span><span class="sxs-lookup"><span data-stu-id="61984-177">Client credentials are used to authenticate the client to services in cases where mutual authentication is required.</span></span> <span data-ttu-id="61984-178">また、このセクションを使用して、クライアントがサービスの証明書によってサービスへのメッセージをセキュリティで保護する必要がある場合に使用するサービス証明書を指定することもできます。</span><span class="sxs-lookup"><span data-stu-id="61984-178">You can use the section to specify service certificates for scenarios where the client must secure messages to a service with the service's certificate.</span></span>  
  
 <span data-ttu-id="61984-179">セキュリティ トークン サービスまたはローカル発行者から発行されたトークンを使用するフェデレーション シナリオの一部として、クライアントを構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="61984-179">You can also configure a client as part of a federation scenario to use issued tokens from a secure token service or a local issuer of tokens.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="61984-180">フェデレーション シナリオを参照して[フェデレーションと発行されたトークン](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-180"> federated scenarios, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span> <span data-ttu-id="61984-181">すべてのクライアント資格情報が見つかります、 [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)、次のコードに示すようにします。</span><span class="sxs-lookup"><span data-stu-id="61984-181">All client credentials are found under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md), as shown in the following code.</span></span>  
  
```xml  
<behaviors>  
 <endpointBehaviors>  
  <behavior name="EndpointBehavior1">  
   <clientCredentials>  
    <clientCertificate findValue="cn=www.contoso.com"     
        storeLocation="LocalMachine"  
        storeName="AuthRoot" x509FindType="FindBySubjectName" />  
    <serviceCertificate>  
     <defaultCertificate findValue="www.cohowinery.com"   
                    storeLocation="LocalMachine"  
                    storeName="Root" x509FindType="FindByIssuerName" />  
    <authentication revocationMode="Online"  
                    trustedStoreLocation="LocalMachine" />  
    </serviceCertificate>  
   </clientCredentials>  
  </behavior>  
 </endpointBehaviors>  
```  
  
#### <a name="clientcertifictate-element"></a><span data-ttu-id="61984-182">\<clientCertifictate > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-182">\<clientCertifictate> Element</span></span>  
 <span data-ttu-id="61984-183">この要素で、クライアントの認証に使用する証明書を設定します。</span><span class="sxs-lookup"><span data-stu-id="61984-183">Set the certificate used to authenticate the client with this element.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-184">[する方法: クライアント資格情報の値を指定](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-184"> [How to: Specify Client Credential Values](../../../../docs/framework/wcf/how-to-specify-client-credential-values.md).</span></span>  
  
#### <a name="httpdigest"></a><span data-ttu-id="61984-185">\<httpDigest ></span><span class="sxs-lookup"><span data-stu-id="61984-185">\<httpDigest></span></span>  
 <span data-ttu-id="61984-186">この機能は、Windows の Active Directory およびインターネット インフォメーション サービス (IIS) と共に有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-186">This feature must be enabled with Active Directory on Windows and Internet Information Services (IIS).</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-187">[ダイジェスト認証は IIS 6.0 で](http://go.microsoft.com/fwlink/?LinkId=88443)です。</span><span class="sxs-lookup"><span data-stu-id="61984-187"> [Digest Authentication in IIS 6.0](http://go.microsoft.com/fwlink/?LinkId=88443).</span></span>  
  
#### <a name="issuedtoken-element"></a><span data-ttu-id="61984-188">\<issuedToken > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-188">\<issuedToken> Element</span></span>  
 <span data-ttu-id="61984-189">[ \<IssuedToken >](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md)トークン、またはセキュリティ トークン サービスで使用する動作のローカル発行者を構成するための要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="61984-189">The [\<issuedToken>](../../../../docs/framework/configure-apps/file-schema/wcf/issuedtoken.md) contains the elements used to configure a local issuer of tokens, or behaviors used with an security token service.</span></span> <span data-ttu-id="61984-190">クライアントを構成するのにはローカル発行者を使用する方法について、次を参照してください。[する方法: ローカル発行者を構成する](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-190">For instructions on configuring a client to use a local issuer, see [How to: Configure a Local Issuer](../../../../docs/framework/wcf/feature-details/how-to-configure-a-local-issuer.md).</span></span>  
  
#### <a name="localissueraddress"></a><span data-ttu-id="61984-191">\<localIssuerAddress ></span><span class="sxs-lookup"><span data-stu-id="61984-191">\<localIssuerAddress></span></span>  
 <span data-ttu-id="61984-192">既定のセキュリティ トークン サービス アドレスを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-192">Specifies a default security token service address.</span></span> <span data-ttu-id="61984-193">この要素を使用するのは、<xref:System.ServiceModel.WSFederationHttpBinding> がセキュリティ トークン サービスに URL を提供しない場合、またはフェデレーション バインディングの発行者アドレスが http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous または `null` の場合です。</span><span class="sxs-lookup"><span data-stu-id="61984-193">This is used when the <xref:System.ServiceModel.WSFederationHttpBinding> does not supply a URL for the security token service, or when the issuer address of a federated binding is http://schemas.microsoft.com/2005/12/ServiceModel/Addressing/Anonymous or `null`.</span></span> <span data-ttu-id="61984-194">そのような場合、<xref:System.ServiceModel.Description.ClientCredentials> は、ローカルの発行者およびバインディングのアドレスと共に構成し、その発行者と通信するために使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-194">In such cases, the <xref:System.ServiceModel.Description.ClientCredentials> must be configured with the address of the local issuer and the binding to use to communicate with that issuer.</span></span>  
  
#### <a name="issuerchannelbehaviors"></a><span data-ttu-id="61984-195">\<issuerChannelBehaviors ></span><span class="sxs-lookup"><span data-stu-id="61984-195">\<issuerChannelBehaviors></span></span>  
 <span data-ttu-id="61984-196">使用して、 [ \<issuerChannelBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md)を追加する[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]クライアントの動作、セキュリティ トークン サービスと通信するときに使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-196">Use the [\<issuerChannelBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/issuerchannelbehaviors-element.md) to add [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client behaviors used when communicating with a security token service.</span></span> <span data-ttu-id="61984-197">クライアントの動作を定義、 [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)セクションです。</span><span class="sxs-lookup"><span data-stu-id="61984-197">Define client behaviors in the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md) section.</span></span> <span data-ttu-id="61984-198">未定義の動作を使用するのには、追加、<`add`> 要素を`<issuerChannelBehaviors>`2 つの属性を持つ要素。</span><span class="sxs-lookup"><span data-stu-id="61984-198">To use a defined behavior, add an <`add`> element to the `<issuerChannelBehaviors>` element with two attributes.</span></span> <span data-ttu-id="61984-199">次の例に示すように、`issuerAddress` をセキュリティ トークン サービスの URL に設定し、`behaviorConfiguration` 属性を定義済みのエンドポイントの動作の名前に設定します。</span><span class="sxs-lookup"><span data-stu-id="61984-199">Set the `issuerAddress` to the URL of the security token service and set the `behaviorConfiguration` attribute to the name of the defined endpoint behavior, as shown in the following example.</span></span>  
  
```xml  
<clientCredentials>  
   <issuedToken>  
      <issuerChannelBehaviors>  
         <add issuerAddress="http://www.contoso.com"  
               behaviorConfiguration="clientBehavior1" />     
```  
  
#### <a name="servicecertificate-element"></a><span data-ttu-id="61984-200">\<serviceCertificate > 要素</span><span class="sxs-lookup"><span data-stu-id="61984-200">\<serviceCertificate> Element</span></span>  
 <span data-ttu-id="61984-201">サービス証明書の認証を制御するには、この要素を使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-201">Use this element to control authentication of service certificates.</span></span>  
  
 <span data-ttu-id="61984-202">[ \<DefaultCertificate >](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md)要素は、サービスは証明書がないことを指定するときに使用する単一の証明書を格納できます。</span><span class="sxs-lookup"><span data-stu-id="61984-202">The [\<defaultCertificate>](../../../../docs/framework/configure-apps/file-schema/wcf/defaultcertificate-element.md) element can store a single certificate used when the service specifies no certificate.</span></span>  
  
 <span data-ttu-id="61984-203">使用して、 [ \<scopedCertificates >](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md)と[\<追加 >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md)を特定のサービスに関連付けられているサービス証明書を設定します。</span><span class="sxs-lookup"><span data-stu-id="61984-203">Use the [\<scopedCertificates>](../../../../docs/framework/configure-apps/file-schema/wcf/scopedcertificates-element.md) and [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-scopedcertificates-element.md) to set service certificates that are associated with specific services.</span></span> <span data-ttu-id="61984-204">`<add>` 要素には、証明書をサービスに関連付けるために使用する `targetUri` 属性があります。</span><span class="sxs-lookup"><span data-stu-id="61984-204">The `<add>` element includes a `targetUri` attribute that is used to associate the certificate with the service.</span></span>  
  
 <span data-ttu-id="61984-205">[\<認証 >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)要素は、証明書を認証に使用される信頼のレベルを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-205">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element specifies the level of trust used to authenticate certificates.</span></span> <span data-ttu-id="61984-206">既定のレベルは "ChainTrust" に設定され、チェーンの最上位の信頼された証明機関で終了する証明書の階層構造で各証明書を検索するよう指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-206">By default, the level is set to "ChainTrust," which specifies that each certificate must be found in a hierarchy of certificates ending in a trusted certification authority at the top of the chain.</span></span> <span data-ttu-id="61984-207">これは最もセキュリティで保護されているモードです。</span><span class="sxs-lookup"><span data-stu-id="61984-207">This is the most secure mode.</span></span> <span data-ttu-id="61984-208">また、値を "PeerOrChainTrust" に設定することもできます。これは、信頼されたチェーン内の証明書と共に、自己発行された証明書 (ピア信頼) も受け入れることを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-208">You can also set the value to "PeerOrChainTrust", which specifies that self-issued certificates (peer trust) are accepted, as well as certificates that are in a trusted chain.</span></span> <span data-ttu-id="61984-209">自己発行の資格情報は信頼された証明機関から購入したものである必要はないため、この値はクライアントとサービスの開発およびデバッグに使用されます。</span><span class="sxs-lookup"><span data-stu-id="61984-209">This value is used when developing and debugging clients and services because self-issued certificates need not be purchased from a trusted authority.</span></span> <span data-ttu-id="61984-210">クライアントを展開するときは、代わりに "ChainTrust" 値を使用します。</span><span class="sxs-lookup"><span data-stu-id="61984-210">When deploying a client, use the "ChainTrust" value instead.</span></span> <span data-ttu-id="61984-211">値を "Custom" または "None" に設定できます。</span><span class="sxs-lookup"><span data-stu-id="61984-211">You can also set the value to "Custom" or "None."</span></span> <span data-ttu-id="61984-212">"Custom" 値を使用するには、`CustomCertificateValidatorType` 属性も証明書の検証に使用するアセンブリと型に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-212">To use the "Custom" value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="61984-213">独自のカスタム検証を作成するには、抽象 <xref:System.IdentityModel.Selectors.X509CertificateValidator> クラスを継承する必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-213">To create your own custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-214">[する方法: カスタム証明書検証を使用するサービスを作成する](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-214"> [How to: Create a Service that Employs a Custom Certificate Validator](../../../../docs/framework/wcf/extending/how-to-create-a-service-that-employs-a-custom-certificate-validator.md).</span></span>  
  
 <span data-ttu-id="61984-215">[\<認証 >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)要素が含まれています、`RevocationMode`失効の証明書を確認する方法を指定する属性。</span><span class="sxs-lookup"><span data-stu-id="61984-215">The [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element includes a `RevocationMode` attribute that specifies how certificates are checked for revocation.</span></span> <span data-ttu-id="61984-216">既定値は "online" です。この場合、証明書が失効していないかどうかが自動的にチェックされます。</span><span class="sxs-lookup"><span data-stu-id="61984-216">The default is "online", which indicates that certificates are automatically checked for revocation.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-217">[証明書の使用](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-217"> [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).</span></span>  
  
## <a name="serviceauthorization"></a><span data-ttu-id="61984-218">ServiceAuthorization</span><span class="sxs-lookup"><span data-stu-id="61984-218">ServiceAuthorization</span></span>  
 <span data-ttu-id="61984-219">[ \<ServiceAuthorization >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md)要素には、承認、カスタム ロール プロバイダー、および権限借用の影響を与える要素が含まれています。</span><span class="sxs-lookup"><span data-stu-id="61984-219">The [\<serviceAuthorization>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceauthorization-element.md) element contains elements that affect authorization, custom role providers, and impersonation.</span></span>  
  
 <span data-ttu-id="61984-220"><xref:System.Security.Permissions.PrincipalPermissionAttribute> クラスは、サービス メソッドに適用されます。</span><span class="sxs-lookup"><span data-stu-id="61984-220">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> class is applied to a service method.</span></span> <span data-ttu-id="61984-221">この属性は、保護メソッドの使用を承認するときに使用するユーザー グループを指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-221">The attribute specifies the groups of users to use when authorizing use of a protected method.</span></span> <span data-ttu-id="61984-222">既定値は "UseWindowsGroups" で、リソースにアクセスしようとしている ID を Windows グループ ("管理者" や "ユーザー" など) で検索するよう指定します。</span><span class="sxs-lookup"><span data-stu-id="61984-222">The default value is "UseWindowsGroups" and specifies that Windows groups, such as "Administrators" or "Users," are searched for an identity trying to access a resource.</span></span> <span data-ttu-id="61984-223">"UseAspNetRoles"を指定することもできます。 下に構成されているカスタム ロール プロバイダーを使用する、<`system.web` > 要素を次のコードに示すようにします。</span><span class="sxs-lookup"><span data-stu-id="61984-223">You can also specify "UseAspNetRoles" to use a custom role provider that is configured under the <`system.web` > element, as shown in the following code.</span></span>  
  
```xml  
<system.web>  
  <membership defaultProvider="SqlProvider"   
   userIsOnlineTimeWindow="15">  
     <providers>  
       <clear />  
       <add   
          name="SqlProvider"   
          type="System.Web.Security.SqlMembershipProvider"   
          connectionStringName="SqlConn"  
          applicationName="MembershipProvider"  
          enablePasswordRetrieval="false"  
          enablePasswordReset="false"  
          requiresQuestionAndAnswer="false"  
          requiresUniqueEmail="true"  
          passwordFormat="Hashed" />  
     </providers>  
   </membership>  
  <!-- Other configuration code not shown.-->  
</system.web>  
```  
  
 <span data-ttu-id="61984-224">`roleProviderName` 属性で `principalPermissionMode` を使用する方法を次のコードに示します。</span><span class="sxs-lookup"><span data-stu-id="61984-224">The following code shows the `roleProviderName` used with the `principalPermissionMode` attribute.</span></span>  
  
```xml  
<behaviors>  
 <behavior name="ServiceBehaviour">          
  <serviceAuthorization principalPermissionMode ="UseAspNetRoles"   
                        roleProviderName ="SqlProvider" />  
</behavior>   
   <!-- Other configuration code not shown. -->  
</behaviors>  
```  
  
## <a name="configuring-security-audits"></a><span data-ttu-id="61984-225">セキュリティ監査の構成</span><span class="sxs-lookup"><span data-stu-id="61984-225">Configuring Security Audits</span></span>  
 <span data-ttu-id="61984-226">使用して、 [ \<serviceSecurityAudit >](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md)書き込まれたログと新機能を指定するログに記録するイベントの種類。</span><span class="sxs-lookup"><span data-stu-id="61984-226">Use the [\<serviceSecurityAudit>](../../../../docs/framework/configure-apps/file-schema/wcf/servicesecurityaudit.md) to specify the log written to, and what types of events to log.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="61984-227">[監査](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)です。</span><span class="sxs-lookup"><span data-stu-id="61984-227"> [Auditing](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).</span></span>  
  
```xml  
<system.serviceModel>  
<serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceSecurityAudit auditLogLocation="Application"   
             suppressAuditFailure="true"  
             serviceAuthorizationAuditLevel="Success"   
             messageAuthenticationAuditLevel="Success" />  
    </behavior>  
  </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="secure-metadata-exchange"></a><span data-ttu-id="61984-228">セキュリティで保護されたメタデータ交換</span><span class="sxs-lookup"><span data-stu-id="61984-228">Secure Metadata Exchange</span></span>  
 <span data-ttu-id="61984-229">メタデータをクライアントにエクスポートすると、構成やクライアント コードのダウンロードが可能になるため、サービスとクライアントの開発者にとって便利です。</span><span class="sxs-lookup"><span data-stu-id="61984-229">Exporting metadata to clients is convenient for service and client developers, as it enables downloads of configuration and client code.</span></span> <span data-ttu-id="61984-230">サービスが悪意のあるユーザーに公開されないようにするために、SSL over HTTP (HTTPS) 機構を使用して転送をセキュリティで保護できます。</span><span class="sxs-lookup"><span data-stu-id="61984-230">To reduce the exposure of a service to malicious users, it is possible to secure the transfer using the SSL over HTTP (HTTPS) mechanism.</span></span> <span data-ttu-id="61984-231">転送を保護するには、まず、サービスをホストしているコンピューターの特定のポートに適切な X.509 証明書をバインドする必要があります。</span><span class="sxs-lookup"><span data-stu-id="61984-231">To do so, you must first bind a suitable X.509 certificate to a specific port on the computer that is hosting the service.</span></span> <span data-ttu-id="61984-232">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [証明書の使用](../../../../docs/framework/wcf/feature-details/working-with-certificates.md))。次に、追加、 [ \<serviceMetadata >](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md)をサービスの構成に設定し、`HttpsGetEnabled`属性を`true`です。</span><span class="sxs-lookup"><span data-stu-id="61984-232">([!INCLUDE[crdefault](../../../../includes/crdefault-md.md)] [Working with Certificates](../../../../docs/framework/wcf/feature-details/working-with-certificates.md).) Second, add a [\<serviceMetadata>](../../../../docs/framework/configure-apps/file-schema/wcf/servicemetadata.md) to the service configuration and set the `HttpsGetEnabled` attribute to `true`.</span></span> <span data-ttu-id="61984-233">最後に、次の例に示すように、`HttpsGetUrl` 属性をサービス メタデータ エンドポイントの URL に設定します。</span><span class="sxs-lookup"><span data-stu-id="61984-233">Finally, set the `HttpsGetUrl` attribute to the URL of the service metadata endpoint, as shown in the following example.</span></span>  
  
```xml  
<behaviors>  
 <serviceBehaviors>  
  <behavior name="NewBehavior">  
    <serviceMetadata httpsGetEnabled="true"   
     httpsGetUrl="https://myComputerName/myEndpoint" />  
  </behavior>  
 </serviceBehaviors>  
</behaviors>  
```  
  
## <a name="see-also"></a><span data-ttu-id="61984-234">関連項目</span><span class="sxs-lookup"><span data-stu-id="61984-234">See Also</span></span>  
 [<span data-ttu-id="61984-235">監査</span><span class="sxs-lookup"><span data-stu-id="61984-235">Auditing</span></span>](../../../../docs/framework/wcf/feature-details/auditing-security-events.md)  
 [<span data-ttu-id="61984-236">Windows Server App Fabric のセキュリティ モデル</span><span class="sxs-lookup"><span data-stu-id="61984-236">Security Model for Windows Server App Fabric</span></span>](http://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
