---
title: ASP.NET AJAX 用の WCF サービスの作成
ms.date: 03/30/2017
ms.assetid: 04c0402c-e617-4ba5-aedf-d17692234776
ms.openlocfilehash: c2d56380b626cd0eafc178b4db3584883b00a6bf
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/04/2018
---
# <a name="creating-wcf-services-for-aspnet-ajax"></a><span data-ttu-id="6c628-102">ASP.NET AJAX 用の WCF サービスの作成</span><span class="sxs-lookup"><span data-stu-id="6c628-102">Creating WCF Services for ASP.NET AJAX</span></span>
<span data-ttu-id="6c628-103">Microsoft ASP.NET AJAX により、応答性に優れ、使い慣れたユーザー インターフェイス要素を使用して、充実したユーザー エクスペリエンスを提供する Web ページを簡単に作成できます。</span><span class="sxs-lookup"><span data-stu-id="6c628-103">Microsoft ASP.NET AJAX enables you to quickly create Web pages that include a rich user experience with responsive and familiar user interface elements.</span></span> <span data-ttu-id="6c628-104">ASP.NET AJAX には、ブラウザーに依存しない ECMAScript (JavaScript) テクノロジとダイナミック HTML (DHTML) テクノロジを組み込んだクライアント スクリプト ライブラリが用意されており、これらのライブラリが ASP.NET 2.0 サーバー ベース開発プラットフォームと統合されます。</span><span class="sxs-lookup"><span data-stu-id="6c628-104">ASP.NET AJAX provides client-script libraries that incorporate cross-browser ECMAScript (JavaScript) and dynamic HTML (DHTML) technologies, and it integrates them with the ASP.NET 2.0 server-based development platform.</span></span> <span data-ttu-id="6c628-105">ASP.NET AJAX を使用することで、Web アプリケーションのユーザー エクスペリエンスと効率を向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="6c628-105">By using ASP.NET AJAX, you can improve the user experience and the efficiency of your Web applications.</span></span>  
  
 <span data-ttu-id="6c628-106">ASP.NET AJAX は、クライアント スクリプト ライブラリとサーバー コンポーネントを統合した強固な開発フレームワークです。</span><span class="sxs-lookup"><span data-stu-id="6c628-106">ASP.NET AJAX consists of client-script libraries and of server components that are integrated to provide a robust development framework.</span></span> <span data-ttu-id="6c628-107">ASP.NET ページからサービスにアクセスする場合、サービス URL をページ上の ASP.NET スクリプト マネージャーに追加すると、標準の JavaScript 関数の呼び出しとまったく同じに見える JavaScript コードを使い、サービス操作を呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6c628-107">To access a service from an ASP.NET page: once the service URL is added to the ASP.NET Script Manager control on the page, service operations may be invoked using JavaScript code that looks exactly like a regular JavaScript function call.</span></span> <span data-ttu-id="6c628-108">参照してください[ASP.NET AJAX の学習](http://go.microsoft.com/fwlink/?LinkId=186475)AJAX フレームワーク内で Web サービスの使用に関するします。</span><span class="sxs-lookup"><span data-stu-id="6c628-108">See [Learn ASP.NET AJAX](http://go.microsoft.com/fwlink/?LinkId=186475) about the use of Web services within the AJAX framework.</span></span>  
  
 <span data-ttu-id="6c628-109">ほとんどの Windows Communication Foundation (WCF) サービスは、適切な ASP.NET AJAX エンドポイントを追加することで ASP.NET AJAX と互換性のあるサービスとして公開する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c628-109">Most Windows Communication Foundation (WCF) services may be exposed as a service compatible with ASP.NET AJAX by adding an appropriate ASP.NET AJAX endpoint.</span></span>  
  
 <span data-ttu-id="6c628-110">Visual Studio を使用している場合で、AJAX 対応 WCF サービスの構築済みテンプレートを使用することがあります、**新しい項目の追加**ダイアログ ASP.NET Web サイトや Web アプリケーションを使用する場合。</span><span class="sxs-lookup"><span data-stu-id="6c628-110">If you are using Visual Studio, you may use a pre-built template for AJAX-enabled WCF services, available in the **Add New Item** dialog when working with ASP.NET Web Sites or Web Applications.</span></span>  
  
 <span data-ttu-id="6c628-111">Visual Studio テンプレートを使用しない場合、ASP.NET AJAX エンドポイントを作成するには次の 2 つの方法があります。</span><span class="sxs-lookup"><span data-stu-id="6c628-111">If you are not using the Visual Studio templates, there are two ways to create an ASP.NET AJAX endpoint:</span></span>  
  
-   <span data-ttu-id="6c628-112">構成を使用せずに、動的ホスト アクティブ化を使用してエンドポイントを作成する。</span><span class="sxs-lookup"><span data-stu-id="6c628-112">Create the endpoint using dynamic host activation without using any configuration.</span></span> <span data-ttu-id="6c628-113">これは、WCF 構成システムの操作に慣れていない場合の最も簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="6c628-113">This is the most basic approach if you are unfamiliar with the WCF configuration system.</span></span> <span data-ttu-id="6c628-114">詳細については、次を参照してください。[する方法: ASP.NET AJAX エンドポイントなしを使用して構成を追加](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-114">For more information, see [How to: Add an ASP.NET AJAX Endpoint Without Using Configuration](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md).</span></span>  
  
-   <span data-ttu-id="6c628-115">構成を使用して WCF サービスに AJAX 対応エンドポイントを追加します。</span><span class="sxs-lookup"><span data-stu-id="6c628-115">Add an AJAX-enabled endpoint to a WCF service using configuration.</span></span> <span data-ttu-id="6c628-116">詳細については、次を参照してください。[する方法: ASP.NET AJAX エンドポイントを追加する構成を使用する](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-116">For more information, see [How to: Use Configuration to Add an ASP.NET AJAX Endpoint](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md).</span></span>  
  
 <span data-ttu-id="6c628-117">説明されている Web プログラミング モデル、 [WCF Web HTTP プログラミング モデルの概要](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md)は ASP.NET AJAX サービスで使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c628-117">The Web Programming Model described in the [WCF Web HTTP Programming Model Overview](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model-overview.md) may be used with ASP.NET AJAX services.</span></span> <span data-ttu-id="6c628-118">具体的には、次のように使用します。</span><span class="sxs-lookup"><span data-stu-id="6c628-118">Specifically:</span></span>  
  
-   <span data-ttu-id="6c628-119"><xref:System.ServiceModel.Web.WebGetAttribute> および <xref:System.ServiceModel.Web.WebInvokeAttribute> 属性を使用して、HTTP GET 動詞と HTTP POST 動詞のいずれかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="6c628-119">You can use the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes to select between HTTP GET and HTTP POST verbs.</span></span> <span data-ttu-id="6c628-120">正しく使用すれば、アプリケーションのパフォーマンスを大幅に向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="6c628-120">If used correctly, this may significantly improve your application’s performance.</span></span> <span data-ttu-id="6c628-121">詳細については、次を参照してください。[する方法: ASP.NET AJAX エンドポイントに対して HTTP POST または HTTP GET 要求を選択](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-121">For more information, see [How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md).</span></span>  
  
-   <span data-ttu-id="6c628-122"><xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> および <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> プロパティを使用して、サービスが返すデータを、既定の JSON (JavaScript Object Notation) ではなく XML データにすることができます。</span><span class="sxs-lookup"><span data-stu-id="6c628-122">You can use the <xref:System.ServiceModel.Web.WebGetAttribute.ResponseFormat%2A> and <xref:System.ServiceModel.Web.WebInvokeAttribute.ResponseFormat%2A> properties to cause your service to return XML data instead of the default JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="6c628-123">これを ASP.NET AJAX フレームワークで行うと、JavaScript クライアントは XML DOM オブジェクトを受け取ります。</span><span class="sxs-lookup"><span data-stu-id="6c628-123">Doing this with the ASP.NET AJAX framework causes the JavaScript client to receive an XML DOM object.</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="6c628-124">この動作を機能させるには、コンテンツ タイプを text/xml に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c628-124">Your operation must set the content type to text/xml for this to work.</span></span> <span data-ttu-id="6c628-125">設定しない場合、JavaScript クライアントは XML DOM オブジェクトではなく XML を含む文字列を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="6c628-125">Otherwise, the JavaScript client will receive a string containing the XML instead of an XML DOM object.</span></span>  
  
     <span data-ttu-id="6c628-126">コンテンツ タイプが適切に設定された XML データを返す操作の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="6c628-126">The following is an example of an operation that returns XML data with the content type set appropriately:</span></span>  
  
    ```  
    [OperationContract, WebGet(ResponseFormat=WebMessageFormat.Xml)]  
    public XElement GetData()  
    {  
    XElement x;  
    //Get some data here...  
  
    WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml";      
    return x;  
    }  
    ```  
  
-   <span data-ttu-id="6c628-127">ASP.NET AJAX との互換性が必要な場合、<xref:System.ServiceModel.Web.WebGetAttribute> および <xref:System.ServiceModel.Web.WebInvokeAttribute> 属性の他の属性は変更できません。</span><span class="sxs-lookup"><span data-stu-id="6c628-127">No other properties on the <xref:System.ServiceModel.Web.WebGetAttribute> and <xref:System.ServiceModel.Web.WebInvokeAttribute> attributes can be changed if compatibility with ASP.NET AJAX is required.</span></span> <span data-ttu-id="6c628-128">ASP.NET AJAX 呼び出し規則に違反しない限り、Web プログラミング モデルのその他の機能を使用できます。</span><span class="sxs-lookup"><span data-stu-id="6c628-128">Other aspects of the Web Programming Model can be used as long as the ASP.NET AJAX calling conventions are not violated.</span></span>  
  
 <span data-ttu-id="6c628-129">高度なシナリオでは、WCF での AJAX サポートの追加の詳細情報が認識する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c628-129">More advanced scenarios require some additional details of AJAX support in WCF be understood:</span></span>  
  
-   <span data-ttu-id="6c628-130">データの転送方法と詳細については、AJAX ページのクライアントと JavaScript を使用して WCF サービスの間で .NET Framework の型を JavaScript の型にマップする方法を理解するのを参照してください。 [JSON とその他のデータ転送形式のサポート](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-130">To understand how data is transferred between an AJAX page client and a WCF service using JavaScript, and for details on how .NET Framework types map to JavaScript types, see [Support for JSON and Other Data Transfer Formats](../../../../docs/framework/wcf/feature-details/support-for-json-and-other-data-transfer-formats.md).</span></span>  
  
-   <span data-ttu-id="6c628-131">たとえば、URL ベースの認証や ASP.NET セッション情報へのアクセスなどの ASP.NET 機能を活用するには、構成で ASP.NET 互換モードを有効にします。</span><span class="sxs-lookup"><span data-stu-id="6c628-131">To take advantage of ASP.NET features, for example, URL-based authentication and accessing the ASP.NET session information, you may want to enable the ASP.NET Compatibility Mode through configuration.</span></span>  
  
 <span data-ttu-id="6c628-132">ASP.NET AJAX フレームワークなしで WCF AJAX エンドポイントで使用できます可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6c628-132">AJAX endpoints in WCF may even be consumed without the ASP.NET AJAX framework.</span></span> <span data-ttu-id="6c628-133">これを行うには、WCF での AJAX サポートのサポート アーキテクチャを理解することが必要です。</span><span class="sxs-lookup"><span data-stu-id="6c628-133">Doing so requires an understanding of the support architecture of AJAX support in WCF.</span></span> <span data-ttu-id="6c628-134">このアーキテクチャの詳細については、次を参照してください。 [WCF Web HTTP プログラミング オブジェクト モデル](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-134">For a discussion of this architecture, see [WCF Web HTTP Programming Object Model](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-object-model.md).</span></span> <span data-ttu-id="6c628-135">この方法を示すコード サンプルは、次を参照してください。、 [JSON と XML での AJAX サービス](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c628-135">For a code sample demonstrating this approach, see the [AJAX Service with JSON and XML](../../../../docs/framework/wcf/samples/ajax-service-with-json-and-xml-sample.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6c628-136">関連項目</span><span class="sxs-lookup"><span data-stu-id="6c628-136">See Also</span></span>  
 [<span data-ttu-id="6c628-137">WCF Web HTTP プログラミング モデル</span><span class="sxs-lookup"><span data-stu-id="6c628-137">WCF Web HTTP Programming Model</span></span>](../../../../docs/framework/wcf/feature-details/wcf-web-http-programming-model.md)  
 [<span data-ttu-id="6c628-138">方法 : 構成を使用せずに ASP.NET AJAX エンドポイントを追加する</span><span class="sxs-lookup"><span data-stu-id="6c628-138">How to: Add an ASP.NET AJAX Endpoint Without Using Configuration</span></span>](../../../../docs/framework/wcf/feature-details/how-to-add-an-aspnet-ajax-endpoint-without-using-configuration.md)  
 [<span data-ttu-id="6c628-139">方法 : 構成を使用して ASP.NET AJAX エンドポイントを追加する</span><span class="sxs-lookup"><span data-stu-id="6c628-139">How to: Use Configuration to Add an ASP.NET AJAX Endpoint</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-configuration-to-add-an-aspnet-ajax-endpoint.md)  
 [<span data-ttu-id="6c628-140">方法 : ASP.NET AJAX エンドポイントのために HTTP POST または HTTP GET を選択する</span><span class="sxs-lookup"><span data-stu-id="6c628-140">How to: Choose between HTTP POST and HTTP GET requests for ASP.NET AJAX Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/http-post-and-http-get-requests-for-aspnet-ajax-endpoints.md)
