---
title: インターネット インフォメーション サービスでホストされる WCF サービスの配置
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: b2b58de703a0864ac0666cb4738a95726e28bcaf
ms.sourcegitcommit: 3c1c3ba79895335ff3737934e39372555ca7d6d0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/05/2018
ms.locfileid: "43740102"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="48054-102">インターネット インフォメーション サービスでホストされる WCF サービスの配置</span><span class="sxs-lookup"><span data-stu-id="48054-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>
<span data-ttu-id="48054-103">開発と、インターネット インフォメーション サービス (IIS) でホストされる Windows Communication Foundation (WCF) サービスのデプロイは、次のタスクで構成されます。</span><span class="sxs-lookup"><span data-stu-id="48054-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>  
  
-   <span data-ttu-id="48054-104">ある IIS、ASP.NET、WCF、および WCF のアクティブ化コンポーネントが正しくインストールされ、登録されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="48054-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>  
  
-   <span data-ttu-id="48054-105">新しい IIS アプリケーションを作成するか、既存の [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] アプリケーションを再利用します。</span><span class="sxs-lookup"><span data-stu-id="48054-105">Create a new IIS application, or reuse an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span>  
  
-   <span data-ttu-id="48054-106">WCF サービスの .svc ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="48054-106">Create a .svc file for the WCF service.</span></span>  
  
-   <span data-ttu-id="48054-107">IIS アプリケーションにサービス実装を展開します。</span><span class="sxs-lookup"><span data-stu-id="48054-107">Deploy the service implementation to the IIS application.</span></span>  
  
-   <span data-ttu-id="48054-108">WCF サービスを構成します。</span><span class="sxs-lookup"><span data-stu-id="48054-108">Configure the WCF service.</span></span>  
  
 <span data-ttu-id="48054-109">IIS でホストされる WCF サービスの作成の詳細なチュートリアルを参照してください。[方法: IIS で WCF サービスをホスト](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)します。</span><span class="sxs-lookup"><span data-stu-id="48054-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>  
  
## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="48054-110">IIS、ASP.NET、および WCF が正しくインストールおよび登録されていることの確認</span><span class="sxs-lookup"><span data-stu-id="48054-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>  
 <span data-ttu-id="48054-111">IIS でホストされる WCF services が正しく機能するには、WCF、IIS、および ASP.NET をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="48054-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="48054-112">WCF をインストールする手順 (の一部として、 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)])、ASP.NET と IIS が使用されているオペレーティング システムのバージョンによって異なります。</span><span class="sxs-lookup"><span data-stu-id="48054-112">The procedures for installing WCF (as part of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET and IIS vary depending on the operating system version being used.</span></span> <span data-ttu-id="48054-113">WCF のインストールの詳細については、[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]を参照してください[Microsoft .NET Framework 4 の Web インストーラー](https://go.microsoft.com/fwlink/?LinkId=201185)します。</span><span class="sxs-lookup"><span data-stu-id="48054-113">For more information about installing WCF and the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], see [Microsoft .NET Framework 4 Web Installer](https://go.microsoft.com/fwlink/?LinkId=201185).</span></span> <span data-ttu-id="48054-114">IIS をインストールするための手順をご覧[IIS をインストールする](https://go.microsoft.com/fwlink/?LinkId=201188)します。</span><span class="sxs-lookup"><span data-stu-id="48054-114">Instructions for installing IIS can be found at [Installing IIS](https://go.microsoft.com/fwlink/?LinkId=201188).</span></span>  
  
 <span data-ttu-id="48054-115">インストール プロセス、 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] IIS が既にコンピューターに存在する場合は、IIS で WCF を自動的に登録します。</span><span class="sxs-lookup"><span data-stu-id="48054-115">The installation process for the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="48054-116">後に IIS がインストールされている場合、 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]、IIS で WCF を登録する追加の手順が必要と[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="48054-116">If IIS is installed after the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], an additional step is required to register WCF with IIS and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="48054-117">使用しているオペレーティング システムに応じて、次のように実行します。</span><span class="sxs-lookup"><span data-stu-id="48054-117">You can do this as follows, depending on your operating system:</span></span>  
  
-   [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]<span data-ttu-id="48054-118">、Windows 7、および[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: を使用して、 [ServiceModel 登録ツール (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) WCF を IIS に登録するためのツール: このツールを使用する次のように入力します。 **ServiceModelReg.exe/i/x** 、Visual studioコマンド プロンプト。</span><span class="sxs-lookup"><span data-stu-id="48054-118">, Windows 7, and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS: To use this tool, type **ServiceModelReg.exe /i /x** in the Visual Studio command prompt.</span></span> <span data-ttu-id="48054-119">このコマンド プロンプトを開くには、[スタート] ボタンをクリックし、 **[すべてのプログラム]**, **[Microsoft Visual Studio 2012]**, **[Visual Studio ツール]** の順にポイントし、 **[Visual Studio コマンド プロンプト]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="48054-119">You can open this command prompt by clicking the start button, selecting **All Programs**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**, and **Visual Studio Command Prompt**</span></span>  
  
-   [!INCLUDE[wv](../../../../includes/wv-md.md)]<span data-ttu-id="48054-120">: [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]のサブコンポーネントの Windows Communication Foundation アクティベーション コンポーネントをインストールします。</span><span class="sxs-lookup"><span data-stu-id="48054-120">: Install the Windows Communication Foundation Activation Components subcomponent of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span> <span data-ttu-id="48054-121">コントロール パネルで、次のようにクリックします。**プログラム追加と削除**し**追加\/Windows コンポーネントの削除**します。</span><span class="sxs-lookup"><span data-stu-id="48054-121">To do this, in Control Panel, click **Add or Remove Programs** and then **Add\/Remove Windows Components**.</span></span> <span data-ttu-id="48054-122">**Windows コンポーネント ウィザード**がアクティブになります。</span><span class="sxs-lookup"><span data-stu-id="48054-122">This activates the **Windows Component Wizard**.</span></span>  
  
-   <span data-ttu-id="48054-123">Windows 7:</span><span class="sxs-lookup"><span data-stu-id="48054-123">Windows 7:</span></span>  
  
 <span data-ttu-id="48054-124">最後に、ASP.NET が .NET Framework Version 4 を使用するように設定されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48054-124">Finally you must verify that ASP.NET is configured to use the .NET Framework version 4.</span></span> <span data-ttu-id="48054-125">これには、–i オプションを指定して ASPNET_Regiis ツールを実行します。</span><span class="sxs-lookup"><span data-stu-id="48054-125">You do this by running the ASPNET_Regiis tool with the –i option.</span></span> <span data-ttu-id="48054-126">詳細については、次を参照してください[ASP.NET IIS 登録ツール。](https://go.microsoft.com/fwlink/?LinkId=201186)</span><span class="sxs-lookup"><span data-stu-id="48054-126">For more information, see [ASP.NET IIS Registration Tool](https://go.microsoft.com/fwlink/?LinkId=201186)</span></span>  
  
## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="48054-127">新しい IIS アプリケーションの作成、または既存の ASP.NET アプリケーションの再利用</span><span class="sxs-lookup"><span data-stu-id="48054-127">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>  
 <span data-ttu-id="48054-128">IIS でホストされる WCF サービスは、IIS アプリケーションの内部にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="48054-128">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="48054-129">排他的に WCF サービスをホストする新しい IIS アプリケーションを作成することができます。</span><span class="sxs-lookup"><span data-stu-id="48054-129">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="48054-130">または、既にホストしている既存のアプリケーションに、WCF サービスをデプロイできる[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]コンテンツ (.aspx ページや ASP.NET Web サービス (ASMX))。</span><span class="sxs-lookup"><span data-stu-id="48054-130">Alternatively, you can deploy an WCF service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="48054-131">これらのオプションの詳細についてを参照してください、「ホスティング WCF - サイド ASP.NET を使用した」と「ASP.NET 互換モードでは WCF サービスをホスティング」セクション[WCF サービスと ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)します。</span><span class="sxs-lookup"><span data-stu-id="48054-131">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md).</span></span>  
  
 <span data-ttu-id="48054-132">[!INCLUDE[iis601](../../../../includes/iis601-md.md)] とそれ以降のバージョンでは、隔離されているオブジェクト指向プログラミング アプリケーションは定期的に再起動されることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="48054-132">Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="48054-133">既定値は 1740 分です。</span><span class="sxs-lookup"><span data-stu-id="48054-133">The default value is 1740 minutes.</span></span> <span data-ttu-id="48054-134">サポートされている最大値は 71,582 分です。</span><span class="sxs-lookup"><span data-stu-id="48054-134">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="48054-135">この再起動は、無効にできます。</span><span class="sxs-lookup"><span data-stu-id="48054-135">This restart can be disabled.</span></span> <span data-ttu-id="48054-136">このプロパティの詳細については、次を参照してください。、 [PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968)します。</span><span class="sxs-lookup"><span data-stu-id="48054-136">For more information about this property, see the [PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968).</span></span>  
  
## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="48054-137">WCF サービス用の .svc ファイルの作成</span><span class="sxs-lookup"><span data-stu-id="48054-137">Create an .svc File for the WCF Service</span></span>  
 <span data-ttu-id="48054-138">IIS でホストされる WCF サービスは、IIS アプリケーション内の特別なコンテンツ ファイル (.svc ファイル) として表されます。</span><span class="sxs-lookup"><span data-stu-id="48054-138">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="48054-139">これは、ASMX ページが、IIS アプリケーションの内部で .asmx ファイルとして表現されるのと同様です。</span><span class="sxs-lookup"><span data-stu-id="48054-139">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="48054-140">.Svc ファイルには、WCF 固有の処理ディレクティブが含まれています ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) インフラストラクチャをホストしている WCF 受信メッセージに応答してホストされるサービスをアクティブ化できるようにします。</span><span class="sxs-lookup"><span data-stu-id="48054-140">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="48054-141">.svc ファイルの最も一般的な構文を次のステートメントに示します。</span><span class="sxs-lookup"><span data-stu-id="48054-141">The most common syntax for a .svc file is in the following statement.</span></span>  
  
```  
<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>  
```  
  
 <span data-ttu-id="48054-142">含まれています、 [ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)ディレクティブと単一の属性`Service`します。</span><span class="sxs-lookup"><span data-stu-id="48054-142">It consists of the [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="48054-143">`Service` 属性の値は、サービス実装の共通言語ランタイム (CLR: Common Language Runtime) 型名です。</span><span class="sxs-lookup"><span data-stu-id="48054-143">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="48054-144">このディレクティブを使用することは、次のコードを使用してサービス ホストを作成することと基本的に同じです。</span><span class="sxs-lookup"><span data-stu-id="48054-144">Using this directive is basically equivalent to creating a service host using the following code.</span></span>  
  
```csharp  
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );  
```  
  
 <span data-ttu-id="48054-145">サービスのベース アドレスの一覧を作成するなど、追加のホスト構成を実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="48054-145">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="48054-146">カスタム <xref:System.ServiceModel.Activation.ServiceHostFactory> を使用して、このディレクティブをカスタム ホスト ソリューション用に拡張することもできます。</span><span class="sxs-lookup"><span data-stu-id="48054-146">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="48054-147">WCF サービスをホストする IIS アプリケーションは作成との有効期間を管理する責任を負いません<xref:System.ServiceModel.ServiceHost>インスタンス。</span><span class="sxs-lookup"><span data-stu-id="48054-147">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="48054-148">管理対象の WCF ホスティング インフラストラクチャの作成、必要な<xref:System.ServiceModel.ServiceHost>.svc ファイルの最初の要求が受信したときにインスタンスを動的にします。</span><span class="sxs-lookup"><span data-stu-id="48054-148">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="48054-149">このインスタンスは、コードによって明示的に閉じられるか、アプリケーションがリサイクルされるときまで解放されません。</span><span class="sxs-lookup"><span data-stu-id="48054-149">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>  
  
 <span data-ttu-id="48054-150">.Svc ファイルの構文の詳細については、次を参照してください。 [ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)します。</span><span class="sxs-lookup"><span data-stu-id="48054-150">For more information about the syntax for .svc files, see [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>  
  
## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="48054-151">IIS アプリケーションへのサービス実装の展開</span><span class="sxs-lookup"><span data-stu-id="48054-151">Deploy the Service Implementation to the IIS Application</span></span>  
 <span data-ttu-id="48054-152">IIS でホストされる WCF サービスと同様の動的なコンパイル モデルを使用して、[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="48054-152">WCF services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)].</span></span> <span data-ttu-id="48054-153">同様[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]、次のように、さまざまな場所にいくつかの方法で、IIS でホストされる WCF サービスの実装コードを配置することができます。</span><span class="sxs-lookup"><span data-stu-id="48054-153">Just as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>  
  
-   <span data-ttu-id="48054-154">グローバル アセンブリ キャッシュ (GAC: Global Assembly Cache) またはアプリケーションの \bin ディレクトリに配置される、プリコンパイルされた .dll ファイルとして展開します。</span><span class="sxs-lookup"><span data-stu-id="48054-154">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="48054-155">プリコンパイルされたバイナリは、新しいバージョンのクラス ライブラリが展開されるまで更新されません。</span><span class="sxs-lookup"><span data-stu-id="48054-155">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>  
  
-   <span data-ttu-id="48054-156">ようにコンパイルされていないソース ファイルは、アプリケーションの \App_Code ディレクトリにあります。</span><span class="sxs-lookup"><span data-stu-id="48054-156">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="48054-157">このディレクトリに配置されたソース ファイルは、アプリケーションの最初の要求を処理するときに動的に要求されます。</span><span class="sxs-lookup"><span data-stu-id="48054-157">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="48054-158">\App_Code ディレクトリ内のファイルを変更すると、次の要求を受け取ったときにアプリケーション全体がリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="48054-158">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>  
  
-   <span data-ttu-id="48054-159">コンパイルされていないコードは、.svc ファイルで直接配置します。</span><span class="sxs-lookup"><span data-stu-id="48054-159">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="48054-160">実装コードでは、後は、サービスの .svc ファイルに配置されているインラインことができます、 \@ServiceHost ディレクティブ。</span><span class="sxs-lookup"><span data-stu-id="48054-160">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="48054-161">インライン コードを変更すると、次の要求を受け取ったときにアプリケーションがリサイクルされ、再コンパイルされます。</span><span class="sxs-lookup"><span data-stu-id="48054-161">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>  
  
 <span data-ttu-id="48054-162">詳細については、[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]コンパイル モデルを参照してください[ASP.NET コンパイルの概要](https://go.microsoft.com/fwlink/?LinkId=94773)します。</span><span class="sxs-lookup"><span data-stu-id="48054-162">For more information about the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](https://go.microsoft.com/fwlink/?LinkId=94773).</span></span>  
  
## <a name="configure-the-wcf-service"></a><span data-ttu-id="48054-163">WCF サービスの構成</span><span class="sxs-lookup"><span data-stu-id="48054-163">Configure the WCF Service</span></span>  
 <span data-ttu-id="48054-164">IIS でホストされる WCF サービスは、アプリケーションの Web.config ファイルに設定を保存します。</span><span class="sxs-lookup"><span data-stu-id="48054-164">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="48054-165">IIS でホストされるサービスは、IIS の外部でホストされる WCF サービスとして、同じ構成要素と構文を使用します。</span><span class="sxs-lookup"><span data-stu-id="48054-165">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="48054-166">ただし、次の制約は、IIS ホスト環境に固有です。</span><span class="sxs-lookup"><span data-stu-id="48054-166">However, the following constraints are unique to the IIS hosting environment:</span></span>  
  
-   <span data-ttu-id="48054-167">IIS でホストされるサービスのベース アドレス。</span><span class="sxs-lookup"><span data-stu-id="48054-167">Base addresses for IIS-hosted services.</span></span>  
  
-   <span data-ttu-id="48054-168">アプリケーションが IIS の外部でのホスティングの WCF サービスは、一連の情報を渡すことによって、ホストするサービスのベース アドレスを制御できますアドレス Uri を<xref:System.ServiceModel.ServiceHost>コンス トラクターまたは提供することで、 [\<ホスト >](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)内の要素、サービスの構成。</span><span class="sxs-lookup"><span data-stu-id="48054-168">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="48054-169">IIS でホストされるサービスは、それぞれのベース アドレスを制御できません。IIS でホストされるサービスのベース アドレスは、その .svc ファイルのアドレスです。</span><span class="sxs-lookup"><span data-stu-id="48054-169">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>  
  
### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="48054-170">IIS でホストされるサービスのエンドポイント アドレス</span><span class="sxs-lookup"><span data-stu-id="48054-170">Endpoint Addresses for IIS-Hosted Services</span></span>  
 <span data-ttu-id="48054-171">IIS でホストされるときのエンドポイント アドレスは、常にサービスを表す .svc ファイルのアドレスを基準にした相対アドレスと見なされます。</span><span class="sxs-lookup"><span data-stu-id="48054-171">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="48054-172">たとえば、WCF サービスのベース アドレスは http://localhost/Application1/MyService.svc次のエンドポイント構成を使用します。</span><span class="sxs-lookup"><span data-stu-id="48054-172">For example, if the base address of a WCF service is http://localhost/Application1/MyService.svc with the following endpoint configuration.</span></span>  
  
```xml  
<endpoint address="anotherEndpoint" .../>  
```  
  
 <span data-ttu-id="48054-173">これにより、エンドポイントに到達可能な"http://localhost/Application1/MyService.svc/anotherEndpoint"。</span><span class="sxs-lookup"><span data-stu-id="48054-173">This provides an endpoint that can be reached at "http://localhost/Application1/MyService.svc/anotherEndpoint".</span></span>  
  
 <span data-ttu-id="48054-174">相対アドレスに到達できるエンドポイントを提供すると、空の文字列を使用するエンドポイント構成要素同様に、 http://localhost/Application1/MyService.svc、ベース アドレスであります。</span><span class="sxs-lookup"><span data-stu-id="48054-174">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at http://localhost/Application1/MyService.svc, which is the base address.</span></span>  
  
```xml  
<endpoint address="" ... />  
```  
  
 <span data-ttu-id="48054-175">IIS でホストされるサービスのエンドポイントには、常に相対エンドポイント アドレスを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48054-175">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="48054-176">完全修飾エンドポイント アドレスを指定 (たとえば、 http://localhost/MyService.svc)エンドポイント アドレスが、エンドポイントを公開するサービスをホストする IIS アプリケーションを指していない場合、サービスの展開でエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="48054-176">Supplying a fully-qualified endpoint address (for example, http://localhost/MyService.svc) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="48054-177">ホストされるサービスに相対エンドポイント アドレスを使用すると、このような競合が回避されます。</span><span class="sxs-lookup"><span data-stu-id="48054-177">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>  
  
### <a name="available-transports"></a><span data-ttu-id="48054-178">利用可能なトランスポート</span><span class="sxs-lookup"><span data-stu-id="48054-178">Available Transports</span></span>  
 <span data-ttu-id="48054-179">IIS 5.1 でホストされる WCF サービスと[!INCLUDE[iis601](../../../../includes/iis601-md.md)]HTTP ベースの通信を使用してに制限されます。</span><span class="sxs-lookup"><span data-stu-id="48054-179">WCF services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="48054-180">これらの IIS プラットフォームでホストされるサービスで、非 HTTP バインドを使用するように構成すると、サービスをアクティブ化するときにエラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="48054-180">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="48054-181">[!INCLUDE[iisver](../../../../includes/iisver-md.md)]でサポートされるトランスポートには、既存の MSMQ アプリケーションとの後方互換性を実現する HTTP、Net.TCP、Net.Pipe、Net.MSMQ、msmq.formatname があります。</span><span class="sxs-lookup"><span data-stu-id="48054-181">For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>  
  
### <a name="http-transport-security"></a><span data-ttu-id="48054-182">HTTP トランスポート セキュリティ</span><span class="sxs-lookup"><span data-stu-id="48054-182">HTTP Transport Security</span></span>  
 <span data-ttu-id="48054-183">IIS でホストされる WCF サービスと http を使用して、トランスポート セキュリティ (たとえば、HTTPS と HTTP 認証方式など、基本、ダイジェスト、および Windows 統合認証) のサービスを含む IIS 仮想ディレクトリでは、それらがサポートしていれば設定。</span><span class="sxs-lookup"><span data-stu-id="48054-183">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="48054-184">ホストされるエンドポイントのバインディングでの HTTP トランスポート セキュリティ設定は、そのエンドポイントを格納する IIS 仮想ディレクトリでのトランスポート セキュリティ設定と一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="48054-184">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>  
  
 <span data-ttu-id="48054-185">たとえば、WCF エンドポイントが HTTP ダイジェスト認証を使用するように構成は、HTTP ダイジェスト認証を許可することも構成されている IIS 仮想ディレクトリ内になければなりません。</span><span class="sxs-lookup"><span data-stu-id="48054-185">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="48054-186">サービスのアクティブ化中にエラー発生の IIS 設定と WCF エンドポイントの設定の組み合わせが一致しません。</span><span class="sxs-lookup"><span data-stu-id="48054-186">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="48054-187">関連項目</span><span class="sxs-lookup"><span data-stu-id="48054-187">See Also</span></span>  
 [<span data-ttu-id="48054-188">インターネット インフォメーション サービスでのホスティング</span><span class="sxs-lookup"><span data-stu-id="48054-188">Hosting in Internet Information Services</span></span>](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)  
 [<span data-ttu-id="48054-189">インターネット インフォメーション サービス ホスティングのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="48054-189">Internet Information Services Hosting Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md)  
 [<span data-ttu-id="48054-190">Windows Server App Fabric のホスティング機能</span><span class="sxs-lookup"><span data-stu-id="48054-190">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=201276)
