---
title: アクセス制御機構
ms.date: 03/30/2017
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
ms.openlocfilehash: 53b20e7f11f5accd1436f29063817142681e4f74
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/18/2019
ms.locfileid: "59213260"
---
# <a name="access-control-mechanisms"></a><span data-ttu-id="47207-102">アクセス制御機構</span><span class="sxs-lookup"><span data-stu-id="47207-102">Access Control Mechanisms</span></span>
<span data-ttu-id="47207-103">Windows Communication Foundation (WCF) といくつかの方法でアクセスを制御することができます。</span><span class="sxs-lookup"><span data-stu-id="47207-103">You can control access in several way with Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="47207-104">ここでは、正しい機構を選択して使用できるように、さまざまな機構について簡単に説明し、各機構を使用するタイミングに関するヒントを提供します。</span><span class="sxs-lookup"><span data-stu-id="47207-104">This topic briefly discusses the various mechanisms and provides suggestions on when to use each; it is intended to help you select the correct mechanism to use.</span></span> <span data-ttu-id="47207-105">ここでは、アクセス テクノロジを単純なものから順に示します。</span><span class="sxs-lookup"><span data-stu-id="47207-105">The access technologies are listed in order of complexity.</span></span> <span data-ttu-id="47207-106">最も単純なのは <xref:System.Security.Permissions.PrincipalPermissionAttribute> で、最も複雑なのは ID モデルです。</span><span class="sxs-lookup"><span data-stu-id="47207-106">The simplest is the <xref:System.Security.Permissions.PrincipalPermissionAttribute>; the most complex is the Identity Model.</span></span>  
  
 <span data-ttu-id="47207-107">これらのメカニズムに加え、WCF における偽装と委任が [委任と偽装](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md) で説明されています。</span><span class="sxs-lookup"><span data-stu-id="47207-107">In addition to these mechanisms, impersonation and delegation with WCF is explained in [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="principalpermissionattribute"></a><span data-ttu-id="47207-108">PrincipalPermissionAttribute</span><span class="sxs-lookup"><span data-stu-id="47207-108">PrincipalPermissionAttribute</span></span>  
 <span data-ttu-id="47207-109"><xref:System.Security.Permissions.PrincipalPermissionAttribute> は、サービス メソッドへのアクセスを制限するために使用します。</span><span class="sxs-lookup"><span data-stu-id="47207-109">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> is used to restrict access to a service method.</span></span> <span data-ttu-id="47207-110">この属性をメソッドに適用して使用すると、特定の呼び出し元の ID や Windows グループまたは [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ロールでのメンバーシップを要求できます。</span><span class="sxs-lookup"><span data-stu-id="47207-110">When the attribute is applied to a method, it can be used to demand a specific caller's identity or membership in a Windows group or [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role.</span></span> <span data-ttu-id="47207-111">クライアントが、X.509 証明書を使用して認証された場合は、サブジェクト名と証明書の拇印で構成されるプライマリ ID がクライアントに割り当てられています。</span><span class="sxs-lookup"><span data-stu-id="47207-111">If the client is authenticated using an X.509 certificate, it is given a primary identity that consists of the subject name plus the thumbprint of the certificate.</span></span>  
  
 <span data-ttu-id="47207-112">サービスのユーザーが常に、サービスが実行されているものと同じ Windows ドメインのメンバーである場合、サービスが実行されているコンピューター上のリソースへのアクセスを制御するには、<xref:System.Security.Permissions.PrincipalPermissionAttribute> を使用します。</span><span class="sxs-lookup"><span data-stu-id="47207-112">Use the <xref:System.Security.Permissions.PrincipalPermissionAttribute> to control access to resources on the computer that the service is running on, and if the users of the service will always be part of the same Windows domain that the service is running on.</span></span> <span data-ttu-id="47207-113">指定したアクセス レベル (なし、読み取り専用、または読み取りと書き込みなど) を持つ Windows グループを簡単に作成できます。</span><span class="sxs-lookup"><span data-stu-id="47207-113">You can easily create Windows groups that have specified levels of access (such as none, read-only, or read and write).</span></span>  
  
 <span data-ttu-id="47207-114">詳細については、属性を使用して、次を参照してください。[方法。PrincipalPermissionAttribute クラスでアクセスを制限する](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-114">For more information about using the attribute, see [How to: Restrict Access with the PrincipalPermissionAttribute Class](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span></span> <span data-ttu-id="47207-115">Id に関する詳細については、次を参照してください。[サービス Id と認証](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-115">For more information about identity, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
## <a name="aspnet-membership-provider"></a><span data-ttu-id="47207-116">ASP.NET メンバーシップ プロバイダー</span><span class="sxs-lookup"><span data-stu-id="47207-116">ASP.NET Membership Provider</span></span>  
 <span data-ttu-id="47207-117">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] の機能の 1 つに、メンバーシップ プロバイダーがあります。</span><span class="sxs-lookup"><span data-stu-id="47207-117">A feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the membership provider.</span></span> <span data-ttu-id="47207-118">メンバーシップ プロバイダーは、厳密にはアクセス制御機構ではありませんが、これを使用すると、サービスのエンドポイントにアクセスできる ID のセットを制限することで、サービスへのアクセスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="47207-118">Even though the membership provider is not technically an access control mechanism, it allows controlling access to the service by limiting the set of possible identities that can access the service's endpoint.</span></span> <span data-ttu-id="47207-119">メンバーシップ機能には、ユーザー名/パスワードの組み合わせを設定できるデータベースが含まれています。この組み合わせによって、Web サイトのユーザーはサイトのアカウントを確立できます。</span><span class="sxs-lookup"><span data-stu-id="47207-119">The membership feature includes a database that can be populated with user name/password combinations that enable users of a Web site to establish accounts with the site.</span></span> <span data-ttu-id="47207-120">ユーザーがメンバーシップ プロバイダーを使用するサービスにアクセスするには、自分の名前とパスワードを使用してログオンする必要があります。</span><span class="sxs-lookup"><span data-stu-id="47207-120">To access a service that uses the membership provider, a user must log on with his or her user name and password.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="47207-121">使用してデータベースを設定する必要があります最初、[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]機能の前に、WCF サービスを使用すると承認に使用できます。</span><span class="sxs-lookup"><span data-stu-id="47207-121">You must first populate the database using the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] feature before a WCF service can use it for authorization purposes.</span></span>  
  
 <span data-ttu-id="47207-122">また、このメンバーシップ機能を使用すると、既存の [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web サイトにメンバーシップ データベースが既にある場合に、同じユーザー名とパスワードで承認された同じユーザーがサービスを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="47207-122">You can also use the membership feature if you already have a membership database from an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web site and you want to enable the same users to use your service, authorized with the same user names and passwords.</span></span>  
  
 <span data-ttu-id="47207-123">メンバーシップ機能を使用して WCF サービスの詳細については、次を参照してください。[方法。ASP.NET メンバーシップ プロバイダーを使用して、](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-123">For more information about using the membership feature in a WCF service, see [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).</span></span>  
  
## <a name="aspnet-role-provider"></a><span data-ttu-id="47207-124">ASP.NET ロール プロバイダー</span><span class="sxs-lookup"><span data-stu-id="47207-124">ASP.NET Role Provider</span></span>  
 <span data-ttu-id="47207-125">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] には、ロールを使用して承認を管理する機能もあります。</span><span class="sxs-lookup"><span data-stu-id="47207-125">Another feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the ability to manage authorization using roles.</span></span> <span data-ttu-id="47207-126">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ロール プロバイダーを使用すると、開発者は、ユーザーのロールを作成し、各ユーザーを 1 つまたは複数のロールに割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="47207-126">The [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider enables a developer to create roles for users and to assign each user to a role or roles.</span></span> <span data-ttu-id="47207-127">メンバーシップ プロバイダーと同様に、ロールと割り当てはデータベースに格納され、[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ロール プロバイダーの特定の実装によって提供されるツールを使用して設定できます。</span><span class="sxs-lookup"><span data-stu-id="47207-127">As with the membership provider, the roles and assignments are stored in a database, and can be populated using tools provided by a particular implementation of the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider.</span></span> <span data-ttu-id="47207-128">として、メンバーシップ機能と WCF 開発者ことができます、情報を参照して、データベース内の役割サービスのユーザーを認証します。</span><span class="sxs-lookup"><span data-stu-id="47207-128">As with the membership feature, WCF developers can use the information in the database to authorize service users by roles.</span></span> <span data-ttu-id="47207-129">たとえば、上記の `PrincipalPermissionAttribute` アクセス制御機構と組み合わせてロール プロバイダーを使用できます。</span><span class="sxs-lookup"><span data-stu-id="47207-129">They can, for example, use the role provider in combination with the `PrincipalPermissionAttribute` access control mechanism described above.</span></span>  
  
 <span data-ttu-id="47207-130">使用することも、[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]が既にある場合、ロール プロバイダー[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]ロール プロバイダー データベースし、WCF サービスで、同じ一連のルールとユーザーの割り当てを使用する場合。</span><span class="sxs-lookup"><span data-stu-id="47207-130">You can also use the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you have an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider database and want to use the same set of rules and user assignments in your WCF service.</span></span>  
  
 <span data-ttu-id="47207-131">ロール プロバイダー機能の使用に関する詳細については、次を参照してください。[方法。ASP.NET ロール プロバイダーを使用して、サービスと](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-131">For more information about using the role provider feature, see [How to: Use the ASP.NET Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md).</span></span>  
  
## <a name="authorization-manager"></a><span data-ttu-id="47207-132">承認マネージャー</span><span class="sxs-lookup"><span data-stu-id="47207-132">Authorization Manager</span></span>  
 <span data-ttu-id="47207-133">さらに、承認マネージャー (AzMan) と [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ロール プロバイダーを組み合わせてクライアントを承認する機能もあります。</span><span class="sxs-lookup"><span data-stu-id="47207-133">Another feature combines the Authorization Manager (AzMan) with the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider to authorize clients.</span></span> <span data-ttu-id="47207-134">Web サービスを [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] によってホストする場合は、サービスの承認が AzMan 経由で行われるように AzMan をアプリケーションに統合できます。</span><span class="sxs-lookup"><span data-stu-id="47207-134">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts a Web service, AzMan can be integrated into the application so that authorization to the service is done through AzMan.</span></span> [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] <span data-ttu-id="47207-135">ロール マネージャーは、アプリケーション ロールの管理、ロールへのユーザーの追加と削除、およびロール メンバーシップのチェックを実行できるようにする API を提供しますが、指定されたタスクまたは操作の実行がユーザーに許可されているかどうかを照会する機能は提供しません。</span><span class="sxs-lookup"><span data-stu-id="47207-135">role manager provides an API that enables you to manage application roles, add and remove users from roles, and check role membership, but it does not allow you to query whether a user is authorized to perform a named task or operation.</span></span> <span data-ttu-id="47207-136">AzMan を使用すると、個々の操作を定義してタスクに結合できます。</span><span class="sxs-lookup"><span data-stu-id="47207-136">AzMan allows you to define individual operations and combine them into tasks.</span></span> <span data-ttu-id="47207-137">AZMan では、ロールのチェックだけでなく、ユーザーがタスクを実行できるかどうかをチェックすることもできます。</span><span class="sxs-lookup"><span data-stu-id="47207-137">With AZMan, in addition to role checks, you can also check whether a user can perform a task.</span></span> <span data-ttu-id="47207-138">ロールの割り当てとタスクの承認は、アプリケーションの外部で構成することも、アプリケーション内でプログラムによって実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="47207-138">Role assignment and task authorization can be configured outside of the application or performed programmatically within the application.</span></span> <span data-ttu-id="47207-139">AzMan 管理 Microsoft 管理コンソール (MMC: Microsoft Management Console) スナップインにより、管理者は、ロールが実行時に実行できるタスクを変更したり、ユーザーのロール メンバーシップを管理したりできます。</span><span class="sxs-lookup"><span data-stu-id="47207-139">The AzMan administration Microsoft Management Console (MMC) snap-in allows administrators to change the tasks a role can perform at run time and to manage each user's membership of roles.</span></span>  
  
 <span data-ttu-id="47207-140">また、AzMan と [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ロール プロバイダーは、既存の AzMan インストールに既にアクセスでき、AzMan とロール プロバイダーの組み合わせの機能を使用してサービス ユーザーを承認する場合にも使用できます。</span><span class="sxs-lookup"><span data-stu-id="47207-140">You can also use AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you already have access to an existing AzMan installation and want to authorize your service users using the features of the AzMan/role provider combination.</span></span>  
  
 <span data-ttu-id="47207-141">AzMan の詳細については、[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]ロール プロバイダーを参照してください[How To:ASP.NET 2.0 で Authorization Manager (AzMan) 使用](https://go.microsoft.com/fwlink/?LinkId=88951)します。</span><span class="sxs-lookup"><span data-stu-id="47207-141">For more information about AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider, see [How To: Use Authorization Manager (AzMan) with ASP.NET 2.0](https://go.microsoft.com/fwlink/?LinkId=88951).</span></span> <span data-ttu-id="47207-142">AzMan とロール プロバイダーを使用して WCF サービスの詳細については、次を参照してください。[方法。サービスと ASP.NET の承認マネージャー ロール プロバイダーを使用して](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-142">For more information about using AzMan and the role provider for WCF services, see [How to: Use the ASP.NET Authorization Manager Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).</span></span>  
  
## <a name="identity-model"></a><span data-ttu-id="47207-143">ID モデル</span><span class="sxs-lookup"><span data-stu-id="47207-143">Identity Model</span></span>  
 <span data-ttu-id="47207-144">ID モデルは、クライアントを承認するためのクレームとポリシーを管理できるようにする API のセットです。</span><span class="sxs-lookup"><span data-stu-id="47207-144">The Identity Model is a set of APIs that enable you to manage claims and policies to authorize clients.</span></span> <span data-ttu-id="47207-145">ID モデルを使用すると、呼び出し元がサービスに対するそれ自体の認証に使用した資格情報に含まれるすべてのクレームを調べ、それらをサービスのポリシー セットと比較し、この比較に基づいてアクセスを許可または拒否できます。</span><span class="sxs-lookup"><span data-stu-id="47207-145">With the Identity Model, you can examine every claim contained in credentials that the caller used to authenticate itself to the service, compare the claims to the set of policies for the service, and grant or deny access based on the comparison.</span></span>  
  
 <span data-ttu-id="47207-146">アクセスを許可する前に、微調整と、特定の条件を設定する機能が必要な場合は、ID モデルを使用します。</span><span class="sxs-lookup"><span data-stu-id="47207-146">Use the Identity Model if you need fine control and the ability to set specific criteria before granting access.</span></span> <span data-ttu-id="47207-147">たとえば、<xref:System.Security.Permissions.PrincipalPermissionAttribute> を使用した場合、条件は、ユーザー ID が認証され、それが特定のロールに属するということだけになります。</span><span class="sxs-lookup"><span data-stu-id="47207-147">For example, when using the <xref:System.Security.Permissions.PrincipalPermissionAttribute>, the criterion is simply that the identity of the user is authenticated and belongs to a specific role.</span></span> <span data-ttu-id="47207-148">これに対し、ID モデルを使用すると、ドキュメントの参照を許可されるにはユーザーが 18 才以上であり、有効な運転免許証を所有している必要があることを明確に示すポリシーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="47207-148">In contrast, using the Identity Model, you can create a policy that states the user must be over 18 years of age and possesses a valid driver's license before being allowed to view a document.</span></span>  
  
 <span data-ttu-id="47207-149">ID モデルのクレームに基づくアクセス制御の恩恵を受けることができる例として、発行済みトークンのシナリオでフェデレーション資格情報を使用する場合が挙げられます。</span><span class="sxs-lookup"><span data-stu-id="47207-149">One example where you can benefit from the Identity Model claim-based access control is when using federation credentials in the issued token scenario.</span></span> <span data-ttu-id="47207-150">フェデレーションと発行済みトークンの詳細については、次を参照してください。[フェデレーションと発行されたトークン](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-150">For more information about federation and issued tokens, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>  
  
 <span data-ttu-id="47207-151">Id モデルの詳細については、次を参照してください。[管理クレームと Id モデルでの承認](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)します。</span><span class="sxs-lookup"><span data-stu-id="47207-151">For more information about the Identity Model, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="47207-152">関連項目</span><span class="sxs-lookup"><span data-stu-id="47207-152">See also</span></span>

- <xref:System.Security.Permissions.PrincipalPermissionAttribute>
- [<span data-ttu-id="47207-153">方法: PrincipalPermissionAttribute クラスでアクセスを制限します。</span><span class="sxs-lookup"><span data-stu-id="47207-153">How to: Restrict Access with the PrincipalPermissionAttribute Class</span></span>](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)
- [<span data-ttu-id="47207-154">方法: サービスで ASP.NET ロール プロバイダーを使用します。</span><span class="sxs-lookup"><span data-stu-id="47207-154">How to: Use the ASP.NET Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)
- [<span data-ttu-id="47207-155">方法: サービスと ASP.NET の承認マネージャー ロール プロバイダーを使用します。</span><span class="sxs-lookup"><span data-stu-id="47207-155">How to: Use the ASP.NET Authorization Manager Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)
- [<span data-ttu-id="47207-156">ID モデルを使用したクレームと承認の管理</span><span class="sxs-lookup"><span data-stu-id="47207-156">Managing Claims and Authorization with the Identity Model</span></span>](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)
- [<span data-ttu-id="47207-157">委任と偽装</span><span class="sxs-lookup"><span data-stu-id="47207-157">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
