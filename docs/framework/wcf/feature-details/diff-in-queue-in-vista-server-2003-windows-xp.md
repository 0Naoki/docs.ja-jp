---
title: "Windows Vista、Windows Server 2003、および Windows XP におけるキュー機能の相違点"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: queues [WCF], differences in operating systems
ms.assetid: aa809d93-d0a3-4ae6-a726-d015cca37c04
caps.latest.revision: "21"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 669c6be6756d79b30266c9fda0909fedc71aeae3
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/02/2017
---
# <a name="differences-in-queuing-features-in-windows-vista-windows-server-2003-and-windows-xp"></a><span data-ttu-id="e314a-102">Windows Vista、Windows Server 2003、および Windows XP におけるキュー機能の相違点</span><span class="sxs-lookup"><span data-stu-id="e314a-102">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>
<span data-ttu-id="e314a-103">ここでは、[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]、[!INCLUDE[wv](../../../../includes/wv-md.md)]、および [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] における [!INCLUDE[wxp](../../../../includes/wxp-md.md)] キュー機能の相違について説明します。</span><span class="sxs-lookup"><span data-stu-id="e314a-103">This topic summarizes the differences in the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] queues feature between [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
## <a name="application-specific-dead-letter-queue"></a><span data-ttu-id="e314a-104">アプリケーションごとの配信不能キュー</span><span class="sxs-lookup"><span data-stu-id="e314a-104">Application-Specific Dead-Letter Queue</span></span>  
 <span data-ttu-id="e314a-105">キューに置かれたメッセージは、受信側のアプリケーションでタイムリーに読み取らなれないと、無期限にキューに残ることがあります。</span><span class="sxs-lookup"><span data-stu-id="e314a-105">Queued messages can remain in the queue indefinitely if the receiving application does not read them in a timely fashion.</span></span> <span data-ttu-id="e314a-106">時間依存のメッセージでは、このような動作は適切ではありません。</span><span class="sxs-lookup"><span data-stu-id="e314a-106">This behavior is not advisable if the messages are time-sensitive.</span></span> <span data-ttu-id="e314a-107">時間依存のメッセージとは、キューに置かれたバインディングで `TimeToLive` プロパティが設定されているメッセージです。</span><span class="sxs-lookup"><span data-stu-id="e314a-107">Time-sensitive messages have a `TimeToLive` property set in the queued binding.</span></span> <span data-ttu-id="e314a-108">このプロパティでは、メッセージの期限が切れるまでのキュー内での保持期間を指定します。</span><span class="sxs-lookup"><span data-stu-id="e314a-108">This property indicates how long the messages can be in the queue before they expire.</span></span> <span data-ttu-id="e314a-109">期限切れのメッセージは、配信不能キューと呼ばれる特別なキューに送信されます。</span><span class="sxs-lookup"><span data-stu-id="e314a-109">Expired messages are sent to a special queue called the dead-letter queue.</span></span> <span data-ttu-id="e314a-110">また、キューのクォータの超過、認証エラーの発生など、その他の理由でメッセージが配信不能キューに送信される場合もあります。</span><span class="sxs-lookup"><span data-stu-id="e314a-110">A message can also end up in a dead-letter queue for other reasons, such as exceeding a queue quota or experiencing an authentication failure.</span></span>  
  
 <span data-ttu-id="e314a-111">通常は、同じキュー マネージャーを共有する、キューに置かれたすべてのアプリケーションに対して、システム全体の配信不能キューが 1 つ存在します。</span><span class="sxs-lookup"><span data-stu-id="e314a-111">Typically, a single system-wide dead-letter queue exists for all queued applications that share a queue manager.</span></span> <span data-ttu-id="e314a-112">アプリケーションごとの配信不能キューを使用した場合は、個々のアプリケーションがそのアプリケーションごとの配信不能キューを指定できます。このため、キューに置かれた、同じキュー マネージャーを共有しているアプリケーション間の分離を改善できます。</span><span class="sxs-lookup"><span data-stu-id="e314a-112">A dead-letter queue for each application enables better isolation between queued applications that share a queue manager by allowing these applications to specify their own application-specific dead-letter queue.</span></span> <span data-ttu-id="e314a-113">配信不能キューを他のアプリケーションと共有しているアプリケーションは、キューをブラウズしてそのアプリケーション用のメッセージを見つける必要があります。</span><span class="sxs-lookup"><span data-stu-id="e314a-113">An application that shares a dead-letter queue with other applications has to browse the queue to find messages that are applicable to it.</span></span> <span data-ttu-id="e314a-114">アプリケーションごとの配信不能キューが使用されている場合、アプリケーション専用の配信不能キューにあるメッセージはすべて、そのアプリケーション用ということになります。</span><span class="sxs-lookup"><span data-stu-id="e314a-114">With an application-specific dead-letter queue, the application can be assured that all messages in its dead-letter queue are applicable to it.</span></span>  
  
 [!INCLUDE[wv](../../../../includes/wv-md.md)]<span data-ttu-id="e314a-115"> では、アプリケーションごとの配信不能キューが提供されます。</span><span class="sxs-lookup"><span data-stu-id="e314a-115"> provides for application-specific dead-letter queues.</span></span> <span data-ttu-id="e314a-116">[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] と [!INCLUDE[wxp](../../../../includes/wxp-md.md)] では、アプリケーションごとの配信不能キューを使用できないので、アプリケーションは、システム全体の配信不能キューを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e314a-116">Application-specific dead-letter queues are not available in [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)], and applications must use the system-wide dead-letter queue.</span></span>  
  
## <a name="poison-message-handling"></a><span data-ttu-id="e314a-117">有害メッセージの処理</span><span class="sxs-lookup"><span data-stu-id="e314a-117">Poison-Message Handling</span></span>  
 <span data-ttu-id="e314a-118">有害メッセージとは、受信側アプリケーションへの配信試行の回数が最大値を超えたメッセージのことです。</span><span class="sxs-lookup"><span data-stu-id="e314a-118">A poison message is a message that has exceeded the maximum number of delivery attempts to the receiving application.</span></span> <span data-ttu-id="e314a-119">この状況が生じるのは、トランザクション キューからメッセージを読み取るアプリケーションが、エラーなどの原因でメッセージをすぐに処理できないような場合です。</span><span class="sxs-lookup"><span data-stu-id="e314a-119">This situation can arise when an application that reads a message from a transactional queue cannot process the message immediately because of errors.</span></span> <span data-ttu-id="e314a-120">アプリケーションは、キューに置かれたメッセージを受信したトランザクションを中止した場合、メッセージをキューに戻します。</span><span class="sxs-lookup"><span data-stu-id="e314a-120">If the application aborts the transaction in which the queued message was received, it returns the message to the queue.</span></span> <span data-ttu-id="e314a-121">その後、アプリケーションは、新しいトランザクションで再度メッセージを取得しようとします。</span><span class="sxs-lookup"><span data-stu-id="e314a-121">The application then tries to retrieve the message again in a new transaction.</span></span> <span data-ttu-id="e314a-122">エラーを引き起こす問題が解決しないと、受信側のアプリケーションは、同じメッセージの受信と中止を繰り返すループから出られなくなる可能性があります。その結果、配信試行回数が最大値を超過し、有害メッセージの状況が生じます。</span><span class="sxs-lookup"><span data-stu-id="e314a-122">If the problem that causes the error is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until it exceeds the maximum number of delivery attempts, and a poison message results.</span></span>  
  
 <span data-ttu-id="e314a-123">[!INCLUDE[wv](../../../../includes/wv-md.md)]、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]、および [!INCLUDE[wxp](../../../../includes/wxp-md.md)] のメッセージ キュー (MSMQ) には、有害メッセージの処理に関して次のような重要な相違点があります。</span><span class="sxs-lookup"><span data-stu-id="e314a-123">The key differences between Message Queuing (MSMQ) on [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] that are relevant to poison handling include the following:</span></span>  
  
-   <span data-ttu-id="e314a-124">[!INCLUDE[wv](../../../../includes/wv-md.md)] の MSMQ はサブキューをサポートしますが、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] と [!INCLUDE[wxp](../../../../includes/wxp-md.md)] はサポートしません。</span><span class="sxs-lookup"><span data-stu-id="e314a-124">MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports subqueues, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not support subqueues.</span></span> <span data-ttu-id="e314a-125">サブキューは、有害メッセージ処理で使用されます。</span><span class="sxs-lookup"><span data-stu-id="e314a-125">Subqueues are used in poison-message handling.</span></span> <span data-ttu-id="e314a-126">再試行キューと有害キューは、有害メッセージ処理の設定に基づいて作成されるアプリケーション キューのサブキューです。</span><span class="sxs-lookup"><span data-stu-id="e314a-126">The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings.</span></span> <span data-ttu-id="e314a-127">作成する再試行サブキューの数は、`MaxRetryCycles` で指定します。</span><span class="sxs-lookup"><span data-stu-id="e314a-127">The `MaxRetryCycles` dictates how many retry subqueues to create.</span></span> <span data-ttu-id="e314a-128">したがって、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] または [!INCLUDE[wxp](../../../../includes/wxp-md.md)] で実行している場合、`MaxRetryCycles` は無視されるため、`ReceiveErrorHandling.Move` は使用できません。</span><span class="sxs-lookup"><span data-stu-id="e314a-128">Therefore, when running on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed.</span></span>  
  
-   <span data-ttu-id="e314a-129">[!INCLUDE[wv](../../../../includes/wv-md.md)] の MSMQ では、否定受信確認がサポートされます。[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] と [!INCLUDE[wxp](../../../../includes/wxp-md.md)] の MSMQ ではサポートされません。</span><span class="sxs-lookup"><span data-stu-id="e314a-129">MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports negative acknowledgment, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not.</span></span> <span data-ttu-id="e314a-130">受信側キュー マネージャーから否定受信確認を受け取ると、送信側キュー マネージャーは拒否されたメッセージを配信不能キューに入れます。</span><span class="sxs-lookup"><span data-stu-id="e314a-130">A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue.</span></span> <span data-ttu-id="e314a-131">そのため、`ReceiveErrorHandling.Reject` は、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] と [!INCLUDE[wxp](../../../../includes/wxp-md.md)] では使用できません。</span><span class="sxs-lookup"><span data-stu-id="e314a-131">As such, `ReceiveErrorHandling.Reject` is not allowed with [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="e314a-132">[!INCLUDE[wv](../../../../includes/wv-md.md)] の MSMQ は、メッセージの配信試行回数を保持するメッセージ プロパティをサポートします。</span><span class="sxs-lookup"><span data-stu-id="e314a-132">MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports a message property that keeps count of the number of times message delivery is attempted.</span></span> <span data-ttu-id="e314a-133">この中止回数のプロパティは、[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] と [!INCLUDE[wxp](../../../../includes/wxp-md.md)] では使用できません。</span><span class="sxs-lookup"><span data-stu-id="e314a-133">This abort count property is not available on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e314a-134"> は、中止回数をメモリで保持するため、同じメッセージが Web ファーム内の複数の [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] サービスによって読み取られた場合、このプロパティは、正確な値を格納できない可能性があります。</span><span class="sxs-lookup"><span data-stu-id="e314a-134"> maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in a Web farm.</span></span>  
  
## <a name="remote-transactional-read"></a><span data-ttu-id="e314a-135">リモート トランザクション読み取り</span><span class="sxs-lookup"><span data-stu-id="e314a-135">Remote Transactional Read</span></span>  
 <span data-ttu-id="e314a-136">[!INCLUDE[wv](../../../../includes/wv-md.md)] 上の MSMQ は、リモート トランザクション読み取りをサポートします。</span><span class="sxs-lookup"><span data-stu-id="e314a-136">MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transactional reads.</span></span> <span data-ttu-id="e314a-137">これによって、キューから読み取りを行うアプリケーションを、そのキューをホストしているコンピューターとは別のコンピューター上でホストすることが可能になります。</span><span class="sxs-lookup"><span data-stu-id="e314a-137">This allows an application that is reading from a queue to be hosted on a computer that is different from the computer on which the queue is hosted.</span></span> <span data-ttu-id="e314a-138">これにより、サービスのファーム全体で中央のキューから読み取りを行うことができるようになり、システムの全体のスループットが向上します。</span><span class="sxs-lookup"><span data-stu-id="e314a-138">This ensures the ability to have a farm of services reading from a central queue, which increases the overall throughput of the system.</span></span> <span data-ttu-id="e314a-139">また、メッセージの読み取り中および処理中にエラーが発生した場合、トランザクションはロールバックし、メッセージは後で処理できるようにキューに残るようにもなります。</span><span class="sxs-lookup"><span data-stu-id="e314a-139">It also ensures that if a failure occurs when reading and processing the message, the transaction rolls back and the message remains in the queue for later processing.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e314a-140">関連項目</span><span class="sxs-lookup"><span data-stu-id="e314a-140">See Also</span></span>  
 [<span data-ttu-id="e314a-141">配信不能メッセージ キューを使用して、メッセージの転送エラーを処理するには</span><span class="sxs-lookup"><span data-stu-id="e314a-141">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)  
 [<span data-ttu-id="e314a-142">有害メッセージ処理</span><span class="sxs-lookup"><span data-stu-id="e314a-142">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)
