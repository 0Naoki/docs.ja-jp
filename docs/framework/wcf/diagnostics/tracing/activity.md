---
title: アクティビティ
ms.date: 03/30/2017
ms.assetid: 70471705-f55f-4da1-919f-4b580f172665
ms.openlocfilehash: b93960d4006499c935c27ee18e066d091632d3d9
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/18/2019
ms.locfileid: "59170210"
---
# <a name="activity"></a><span data-ttu-id="2a3e4-102">アクティビティ</span><span class="sxs-lookup"><span data-stu-id="2a3e4-102">Activity</span></span>
<span data-ttu-id="2a3e4-103">このトピックでは、Windows Communication Foundation (WCF) トレース モデルでのアクティビティ トレースについて説明します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-103">This topic describes activity traces in the Windows Communication Foundation (WCF) tracing model.</span></span> <span data-ttu-id="2a3e4-104">アクティビティは、ユーザーがエラーの範囲を絞り込む上で役立つ処理単位です。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-104">Activities are processing units that help the user narrow down the scope of a failure.</span></span> <span data-ttu-id="2a3e4-105">同じアクティビティで発生したエラーは直接関連します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-105">Errors that occur in the same activity are directly related.</span></span> <span data-ttu-id="2a3e4-106">たとえば、メッセージを復号化できなかったために、ある操作が失敗したとします。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-106">For example, an operation fails because message decryption has failed.</span></span> <span data-ttu-id="2a3e4-107">この操作とメッセージ復号化失敗のトレースは同じアクティビティ内に表示され、復号化エラーと要求エラー間の直接相関関係が示されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-107">The traces for both the operation and message decryption failure appear in the same activity, showing direct correlation between the decryption error and the request error.</span></span>  
  
## <a name="configuring-activity-tracing"></a><span data-ttu-id="2a3e4-108">アクティビティ トレースの構成</span><span class="sxs-lookup"><span data-stu-id="2a3e4-108">Configuring Activity Tracing</span></span>  
 <span data-ttu-id="2a3e4-109">WCF には、アプリケーションを処理するための定義済みのアクティビティが用意されています (を参照してください[アクティビティ リスト](../../../../../docs/framework/wcf/diagnostics/tracing/activity-list.md))。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-109">WCF provides pre-defined activities for processing applications (see [Activity List](../../../../../docs/framework/wcf/diagnostics/tracing/activity-list.md)).</span></span> <span data-ttu-id="2a3e4-110">また、ユーザー トレースをグループ化するために、アクティビティをプログラムによって定義することもできます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-110">You can also define activities programmatically to group user traces.</span></span> <span data-ttu-id="2a3e4-111">詳細については、次を参照してください。[ユーザー コード トレースの出力](../../../../../docs/framework/wcf/diagnostics/tracing/emitting-user-code-traces.md)します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-111">For more information, see [Emitting User-Code Traces](../../../../../docs/framework/wcf/diagnostics/tracing/emitting-user-code-traces.md).</span></span>  
  
 <span data-ttu-id="2a3e4-112">実行時にアクティビティ トレースを出力するには使用、`ActivityTracing`の設定、`System.ServiceModel`構成コードを次に示すようにソース、またはその他の WCF またはカスタム トレース ソースをトレースします。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-112">To emit activity traces at run time, use the `ActivityTracing` setting for the `System.ServiceModel` trace source, or other WCF or custom trace sources, as demonstrated by the following configuration code.</span></span>  
  
```xml  
<source name="System.ServiceModel" switchValue="Verbose,ActivityTracing">  
```  
  
 <span data-ttu-id="2a3e4-113">構成要素と使用されている属性の詳細については、次を参照してください。、[トレースの構成](../../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)トピック。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-113">To understand more about the configuration element and attributes being used, see the [Configuring Tracing](../../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md) topic.</span></span>  
  
## <a name="viewing-activities"></a><span data-ttu-id="2a3e4-114">アクティビティの表示</span><span class="sxs-lookup"><span data-stu-id="2a3e4-114">Viewing Activities</span></span>  
 <span data-ttu-id="2a3e4-115">アクティビティとそのユーティリティで表示できます、[サービス トレース ビューアー ツール (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-115">You can view the activities and their utility in the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span></span> <span data-ttu-id="2a3e4-116">ActivityTracing が有効な場合、このツールはトレースを取得し、アクティビティに基づいて並べ替えます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-116">When ActivityTracing is enabled, this tool takes the traces and sorts them based on activity.</span></span> <span data-ttu-id="2a3e4-117">トレース転送を表示することもできます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-117">You can also see trace transfers.</span></span> <span data-ttu-id="2a3e4-118">トレース転送は、さまざまなアクティビティが相互にどのように関連しているかを示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-118">A trace transfer indicates how different activities are related to each other.</span></span> <span data-ttu-id="2a3e4-119">これにより、特定のアクティビティによって別のアクティビティが開始されたことを確認できます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-119">You can see that a particular activity caused another to start.</span></span> <span data-ttu-id="2a3e4-120">たとえば、Secure Conversation トークンを取得するために、あるメッセージ要求によってセキュリティ ハンドシェイクが開始されたことを確認できます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-120">For example, a message request started a security handshake to get a Secure Conversation Token.</span></span>  
  
### <a name="correlating-activities-in-service-trace-viewer"></a><span data-ttu-id="2a3e4-121">サービス トレース ビューアーでのアクティビティの関連付け</span><span class="sxs-lookup"><span data-stu-id="2a3e4-121">Correlating Activities in Service Trace Viewer</span></span>  
 <span data-ttu-id="2a3e4-122">次のように、サービス トレース ビューアー ツールには、アクティビティの 2 つのビューが用意されています。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-122">The Service Trace Viewer tool provides two views of activities:</span></span>  
  
-   <span data-ttu-id="2a3e4-123">**リスト**ビュー、アクティビティ ID を使用して、直接プロセス間でトレースを関連付けます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-123">**List** view, where the activity ID is used to directly correlate traces across processes.</span></span> <span data-ttu-id="2a3e4-124">異なるプロセス (クライアントとサービスなど) のトレースであっても、同じアクティビティ ID を持つトレースは、同じアクティビティにグループ化されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-124">Traces from different processes, for example, client and service, but with the same activity ID are grouped in the same activity.</span></span> <span data-ttu-id="2a3e4-125">したがって、サービスで発生したエラーによってクライアントでエラーが発生した場合、ツールの同じアクティビティ ビューに両方のエラーが表示されることになります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-125">Therefore, an error occurring on the service which then causes an error on the client will both show up in the same activity view in the tool.</span></span>  
  
-   <span data-ttu-id="2a3e4-126">**グラフ**アクティビティがプロセスによってグループ化を表示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-126">**Graph** view, where activities are grouped by processes.</span></span> <span data-ttu-id="2a3e4-127">このビューでは、クライアントとサービスのトレースは、アクティビティ ID が同じであっても、異なるアクティビティに表示されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-127">In this view, a client and service with the same activity ID have their traces in different activities.</span></span> <span data-ttu-id="2a3e4-128">アクティビティ ID は同じであるが、異なるプロセスに含まれるアクティビティを相互に関連付けるために、このツールでは、関連するアクティビティ間のメッセージ フローが示されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-128">To correlate activities with the same activity ID in different processes, the tool shows message flows across the related activities.</span></span>  
  
 <span data-ttu-id="2a3e4-129">詳細については、およびサービス トレース ビューアー ツールのグラフィカル ビューを表示するには、「[サービス トレース ビューアー ツール (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)と[相関トレースの表示のサービス トレース ビューアーを使用して、トラブルシューティング](../../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-129">For more information, and to see a graphical view of the Service Trace Viewer tool, see [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md) and [Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting](../../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md).</span></span>  
  
## <a name="defining-the-scope-of-an-activity"></a><span data-ttu-id="2a3e4-130">アクティビティ スコープの定義</span><span class="sxs-lookup"><span data-stu-id="2a3e4-130">Defining the Scope of an Activity</span></span>  
 <span data-ttu-id="2a3e4-131">アクティビティはデザイン時に定義され、作業の論理単位を表します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-131">An activity is defined at design time and denotes a logical unit of work.</span></span> <span data-ttu-id="2a3e4-132">同じアクティビティ識別子を使用して出力されたトレースは直接関連し、同じアクティビティに含まれます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-132">Emitted traces with the same activity identifier are directly related, they are part of the same activity.</span></span> <span data-ttu-id="2a3e4-133">アクティビティはエンドポイントの境界を越えることができるため (要求など)、アクティビティには 2 つのスコープが定義されています。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-133">Because an activity can cross endpoint boundaries (a request), two scopes for an activity are defined.</span></span>  
  
-   <span data-ttu-id="2a3e4-134">`Global` スコープ (アプリケーションごと)。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-134">`Global` scope, per application.</span></span> <span data-ttu-id="2a3e4-135">このスコープでは、アクティビティは 128 ビットの、グローバルに一意なアクティビティ識別子 (gAId) によって識別されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-135">In this scope, the activity is identified by its 128-bit globally unique activity identifier, the gAId.</span></span> <span data-ttu-id="2a3e4-136">gAId は、エンドポイント全体にわたって伝達されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-136">The gAid is what is propagated across endpoints.</span></span>  
  
-   <span data-ttu-id="2a3e4-137">`Local` スコープ (エンドポイントごと)。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-137">`Local` scope, per endpoint.</span></span> <span data-ttu-id="2a3e4-138">このスコープでは、アクティビティは、gAId、アクティビティ トレースを出力するトレース ソース名、およびプロセス ID によって識別されます。この 3 つの組み合わせによって、ローカル アクティビティ ID (lAId) が構成されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-138">In this scope, the activity is identified by its gAId, along with the trace source name emitting the activity traces and the process Id. This triplet constitutes the local activity id, lAId.</span></span> <span data-ttu-id="2a3e4-139">lAId は、アクティビティの (ローカル) 境界の定義に使用されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-139">The lAId is used to define the (local) boundaries of an activity.</span></span>  
  
## <a name="trace-schema"></a><span data-ttu-id="2a3e4-140">トレース スキーマ</span><span class="sxs-lookup"><span data-stu-id="2a3e4-140">Trace Schema</span></span>  
 <span data-ttu-id="2a3e4-141">トレースはスキーマを使用して Microsoft プラットフォーム間で出力できます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-141">Traces can be emitted using any schema, and across Microsoft platforms.</span></span> <span data-ttu-id="2a3e4-142">"e2e"(「エンド ツー エンド」) には、一般的に使用されるスキーマです。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-142">"e2e" (for "End to End") is a commonly used schema.</span></span> <span data-ttu-id="2a3e4-143">このスキーマには、128 ビット識別子 (gAId)、トレース ソース名、およびプロセス ID が含まれます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-143">This schema includes a 128 bit identifier (gAId), the trace source name, and process ID.</span></span> <span data-ttu-id="2a3e4-144">マネージド コードでは、<xref:System.Diagnostics.XmlWriterTraceListener> が e2e スキーマでトレースを出力します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-144">In managed code, <xref:System.Diagnostics.XmlWriterTraceListener> emits traces in the E2E schema.</span></span>  
  
 <span data-ttu-id="2a3e4-145">開発者は、スレッド ローカル ストレージ (TLS) の GUID を使用して <xref:System.Diagnostics.CorrelationManager.ActivityId%2A> プロパティを設定することにより、トレースで出力する AID を設定できます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-145">Developers can set the AID that is emitted with a trace by setting the <xref:System.Diagnostics.CorrelationManager.ActivityId%2A> property with a Guid on Thread Local Storage (TLS).</span></span> <span data-ttu-id="2a3e4-146">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-146">The following example demonstrates this.</span></span>  
  
```csharp
// set the current Activity ID to a new GUID.  
CorrelationManager.ActivityId = Guid.NewGuid();  
```
  
 <span data-ttu-id="2a3e4-147">次の例に示すように、トレース ソースを使用してトレースを出力すると、TLS での gAId の設定が明確に示されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-147">Setting the gAId in TLS will be evident when traces are emitted using a trace source, as shown by the following example.</span></span>  
  
```csharp
TraceSource traceSource = new TraceSource("myTraceSource");  
traceSource.TraceEvent(TraceEventType.Warning, eventId, "Information");  
```  
  
 <span data-ttu-id="2a3e4-148">出力されるトレースには、TLS の現在の gAId、トレース ソースのコンストラクターにパラメーターとして渡されるトレース ソース名、および現在のプロセスの ID が含まれます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-148">The trace emitted will contain the gAId currently in TLS, the trace source name passed as a parameter to the trace source’s constructor, and the current process’s ID.</span></span>  
  
## <a name="activity-lifetime"></a><span data-ttu-id="2a3e4-149">アクティビティの有効期間</span><span class="sxs-lookup"><span data-stu-id="2a3e4-149">Activity Lifetime</span></span>  
 <span data-ttu-id="2a3e4-150">最も厳密な意味では、アクティビティの形跡は、出力されたトレースでアクティビティ ID が初めて使用されたときに始まり、出力されたトレースでアクティビティ ID が最後に使用されたときに終わります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-150">In strictest terms, evidence of an activity starts the first time the activity ID is used in an emitted trace, and ends the last time it is used in an emitted trace.</span></span> <span data-ttu-id="2a3e4-151"><xref:System.Diagnostics> には、定義済みのトレースの種類のセットが用意されています。これは、アクティビティの有効期間の境界を明示的にマークするための Start トレースと Stop トレースを含みます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-151">A predefined set of trace types are provided by <xref:System.Diagnostics>, including Start and Stop, to explicitly mark the activity lifetime boundaries.</span></span>  
  
-   <span data-ttu-id="2a3e4-152">開始:アクティビティの開始を示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-152">Start: Indicates the beginning of an activity.</span></span> <span data-ttu-id="2a3e4-153">"Start"トレースは、新しい処理マイルス トーンの開始のレコードを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-153">A "Start" trace provides a record of beginning a new processing milestone.</span></span> <span data-ttu-id="2a3e4-154">このトレースには、特定のプロセスの特定のトレース ソースに使用される新しいアクティビティ ID が含まれます。ただし、エンドポイント間でアクティビティ ID が伝達される場合を除きます (この場合は、エンドポイントごとに 1 つの "Start" トレースが表示されます)。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-154">It contains a new activity ID for a given trace source in a given process, except when the activity ID is propagated across endpoints, in which case we see one "Start" per endpoint.</span></span> <span data-ttu-id="2a3e4-155">新しいアクティビティの開始の例として、新しい処理スレッドの作成や、新しいパブリック メソッドの入力などがあります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-155">Examples of starting a new activity include creating a new thread for processing, or entering a new public method.</span></span>  
  
-   <span data-ttu-id="2a3e4-156">停止:アクティビティの終了を示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-156">Stop: Indicates the end of an activity.</span></span> <span data-ttu-id="2a3e4-157">"Stop"トレースは、既存の処理マイルス トーンの終了のレコードを提供します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-157">A "Stop" trace provides a record of ending an existing processing milestone.</span></span> <span data-ttu-id="2a3e4-158">このトレースには、特定のプロセスの特定のトレース ソースに使用される既存のアクティビティ ID が含まれます。ただし、エンドポイント間でアクティビティ ID が伝達される場合を除きます (この場合は、エンドポイントごとに 1 つの "Stop" トレースが表示されます)。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-158">It contains an existing activity ID for a given trace source in a given process, except when the activity ID is propagated across endpoints, in which case we see one "Stop" per endpoint.</span></span>  <span data-ttu-id="2a3e4-159">アクティビティの停止の例には、処理スレッドを終了、または既存の"Start"トレースの開始が示されたメソッドが含まれます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-159">Examples of stopping an activity include terminating a processing thread, or exiting a method whose beginning was denoted with a "Start" trace.</span></span>  
  
-   <span data-ttu-id="2a3e4-160">中断します。アクティビティの処理の中断を示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-160">Suspend: Indicates suspension of processing of an activity.</span></span> <span data-ttu-id="2a3e4-161">"Suspend"トレースには、既存のアクティビティ ID は後で再開する処理が必要ですが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-161">A "Suspend" trace contains an existing activity ID whose processing is expected to resume at a later time.</span></span> <span data-ttu-id="2a3e4-162">中断イベントと再開イベントの間に、現在のトレース ソースからこの ID を使用してトレースが出力されることはありません。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-162">No traces are emitted with this ID between the Suspend and Resume events from the current trace source.</span></span> <span data-ttu-id="2a3e4-163">中断の例として、外部ライブラリ関数の呼び出し時、または I/O 完了ポートなどのリソースで待機する際のアクティビティの一時停止などがあります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-163">Examples include pausing an activity when calling into an external library function, or when waiting on a resource such as an I/O completion port.</span></span>  
  
-   <span data-ttu-id="2a3e4-164">再開:アクティビティの処理の再開を示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-164">Resume: Indicates the resumption of processing of an activity.</span></span> <span data-ttu-id="2a3e4-165">"Resume"トレースには、既存のアクティビティ id、現在のトレース ソースからの最後に出力されたトレースが"Suspend"トレースが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-165">A "Resume" trace contains an existing activity id whose last emitted trace from the current trace source was a "Suspend" trace.</span></span> <span data-ttu-id="2a3e4-166">再開の例として、外部ライブラリ関数の呼び出しからの復帰や、I/O 完了ポートなどのリソースによって処理の再開が通知された場合などがあります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-166">Examples include returning from a call to an external library function, or when signaled to resume processing by a resource such as an I/O completion port.</span></span>  
  
-   <span data-ttu-id="2a3e4-167">転送します。一部のアクティビティは、他のユーザーによるまたは他のユーザーに関連付ける、ため、"Transfer"トレースでは、他のアクティビティにアクティビティを関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-167">Transfer: Because some activities are caused by others, or relate to others, activities can be related to other activities through "Transfer" traces.</span></span> <span data-ttu-id="2a3e4-168">転送により、アクティビティ間の直接の関係が記録されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-168">A transfer records the directed relationship of one activity to another</span></span>  
  
 <span data-ttu-id="2a3e4-169">Start トレースと Stop トレースは、関連付けにとっては重要ではありません。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-169">Start and Stop traces are not critical for correlation.</span></span> <span data-ttu-id="2a3e4-170">ただし、これらのトレースは、パフォーマンスの向上、プロファイリング、およびアクティビティ スコープの検証に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-170">However, they can help in increasing performance, profiling, and activity scope validation.</span></span>  
  
 <span data-ttu-id="2a3e4-171">同じアクティビティの直接関連するイベントを検出するときや、転送トレースを追跡する場合に関連アクティビティのイベントを検出するときに、ツールはこれらのトレースを使用して、トレース ログのナビゲーションを最適化することができます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-171">Using these types, the tools can optimize navigating the trace logs to find the immediately related events of the same activity, or events in related activities if the tool follows transfer traces.</span></span> <span data-ttu-id="2a3e4-172">たとえば、ツールが Start/Stop トレースを確認したときに、特定のアクティビティのログの解析を中止できます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-172">For example, the tools will stop parsing the logs for a given activity when they see a Start/Stop trace.</span></span>  
  
 <span data-ttu-id="2a3e4-173">Start/Stop トレースは、プロファイリングに使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-173">These trace types can also be used for profiling.</span></span> <span data-ttu-id="2a3e4-174">開始マーカーと終了マーカーの間で使用されるリソースは、論理アクティビティを含むアクティビティの包括時間を表します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-174">Resources consumed between the start and stop markers represent the activity’s inclusive time including contained logical activities.</span></span> <span data-ttu-id="2a3e4-175">Suspend トレースから Resume トレースまでの時間間隔を減算することで、アクティビティの実際の時間がわかります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-175">Subtracting the time intervals between the Suspend and Resume traces provides the actual activity time.</span></span>  
  
 <span data-ttu-id="2a3e4-176">また、Stop トレースは、実装済みのアクティビティのスコープを検証する際に特に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-176">The Stop trace is also particularly useful for validating the scope of the implemented activities.</span></span> <span data-ttu-id="2a3e4-177">特定のアクティビティ内ではなく Stop トレースの後に出現する処理トレースがある場合、これはコードの欠陥を示している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-177">If some processing traces appear after the Stop trace instead of inside a given activity, this can suggests code defect.</span></span>  
  
## <a name="guidelines-for-using-activity-tracing"></a><span data-ttu-id="2a3e4-178">アクティビティ トレースを使用するためのガイドライン</span><span class="sxs-lookup"><span data-stu-id="2a3e4-178">Guidelines for Using Activity Tracing</span></span>  
 <span data-ttu-id="2a3e4-179">ActivityTracing トレース (Start、Stop、Suspend、Resume、および Transfer) を使用する際のガイドラインを以下に示します。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-179">The following is a guideline of using ActivityTracing traces (Start, Stop, Suspend, Resume, and Transfer).</span></span>  
  
-   <span data-ttu-id="2a3e4-180">トレースは、ツリーではなく循環有向グラフです。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-180">Tracing is a directed cyclic graph, not a tree.</span></span> <span data-ttu-id="2a3e4-181">あるアクティビティを発生させたアクティビティに制御を戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-181">You can return control to an activity which spawned an activity.</span></span>  
  
-   <span data-ttu-id="2a3e4-182">アクティビティは処理の境界を示します。処理の境界は、システム管理者にとって重要であり、サポートを容易にする上でも役立ちます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-182">An activity denotes a processing boundary which can be meaningful to the administrator of the system or for supportability.</span></span>  
  
-   <span data-ttu-id="2a3e4-183">クライアントとサーバーの両方で、各 WCF メソッドは制限されます (後の作業を完了すると)、新しいアクティビティを開始することで、新しいアクティビティを終了し、アンビエント アクティビティに返すことです。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-183">Each WCF method, both on the client and server, is bounded by beginning a new activity, then (after work is done) ending the new activity and returning to the ambient activity.</span></span>  
  
-   <span data-ttu-id="2a3e4-184">接続のリッスンやメッセージの待機など、長時間にわたって実行される (継続中の) アクティビティは、対応する開始マーカーと終了マーカーによって表されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-184">Long running (ongoing) activities such as listening for connections or waiting for messages are represented by corresponding start/stop markers.</span></span>  
  
-   <span data-ttu-id="2a3e4-185">メッセージの受信または処理によって起動されるアクティビティは、トレースの境界によって表されます。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-185">Activities triggered by the receipt or processing of a message are represented by trace boundaries.</span></span>  
  
-   <span data-ttu-id="2a3e4-186">アクティビティはアクティビティを表します。オブジェクトとは限りません。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-186">Activities represent activities, not necessarily objects.</span></span> <span data-ttu-id="2a3e4-187">アクティビティとして解釈する必要があります"これが発生しているときにします。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-187">An activity should be interpreted as "this was happening when .</span></span> <span data-ttu-id="2a3e4-188">.</span><span class="sxs-lookup"><span data-stu-id="2a3e4-188">.</span></span> <span data-ttu-id="2a3e4-189">.</span><span class="sxs-lookup"><span data-stu-id="2a3e4-189">.</span></span> <span data-ttu-id="2a3e4-190"> (有効なトレース出力が発生したときに) これが発生していた" と解釈する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2a3e4-190">(meaningful trace emission occurred)."</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2a3e4-191">関連項目</span><span class="sxs-lookup"><span data-stu-id="2a3e4-191">See also</span></span>

- [<span data-ttu-id="2a3e4-192">トレースの構成</span><span class="sxs-lookup"><span data-stu-id="2a3e4-192">Configuring Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/configuring-tracing.md)
- [<span data-ttu-id="2a3e4-193">サービス トレース ビューアーを使用した相関トレースの表示とトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="2a3e4-193">Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting.md)
- [<span data-ttu-id="2a3e4-194">エンドツーエンドのトレースのシナリオ</span><span class="sxs-lookup"><span data-stu-id="2a3e4-194">End-To-End Tracing Scenarios</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md)
- [<span data-ttu-id="2a3e4-195">サービス トレース ビューアー ツール (SvcTraceViewer.exe)</span><span class="sxs-lookup"><span data-stu-id="2a3e4-195">Service Trace Viewer Tool (SvcTraceViewer.exe)</span></span>](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)
- [<span data-ttu-id="2a3e4-196">ユーザー コード トレースの出力</span><span class="sxs-lookup"><span data-stu-id="2a3e4-196">Emitting User-Code Traces</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/emitting-user-code-traces.md)
