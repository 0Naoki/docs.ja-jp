---
title: Windows Identity Foundation 4.5 の新機能
ms.date: 03/30/2017
ms.assetid: 3b381f04-593b-471f-bd33-0362be1aade5
author: BrucePerlerMS
ms.openlocfilehash: 673294ccdb76e6016169a4e2b4e7713ba63fa1e7
ms.sourcegitcommit: 213292dfbb0c37d83f62709959ff55c50af5560d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/25/2018
ms.locfileid: "47109460"
---
# <a name="what39s-new-in-windows-identity-foundation-45"></a><span data-ttu-id="6ee14-102">Windows Identity Foundation 4.5 の新機能</span><span class="sxs-lookup"><span data-stu-id="6ee14-102">What&#39;s New in Windows Identity Foundation 4.5</span></span>
<span data-ttu-id="6ee14-103">Windows Identity Foundation (WIF) の最初のバージョンは、スタンドアロンのダウンロードとして提供され、.NET 3.5 SP1 タイム フレームで導入されたため、WIF 3.5 と呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-103">The first version of Windows Identity Foundation (WIF) shipped as a standalone download and is known as WIF 3.5 because it was introduced in the .NET 3.5 SP1 timeframe.</span></span> <span data-ttu-id="6ee14-104">.NET 4.5 以降、WIF は .NET Framework の一部になっています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-104">Starting with .NET 4.5, WIF is part of the .NET framework.</span></span> <span data-ttu-id="6ee14-105">.NET Framework で直接 WIF クラスを使用できるようになったため、.NET でクレーム ベースの ID をより深く統合できるようになり、クレームを簡単に使用できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-105">Having the WIF classes directly available in the framework allows for a much deeper integration of claims-based identity in .NET, making it easier to use claims.</span></span> <span data-ttu-id="6ee14-106">WIF 3.5 用に作成されたアプリケーションは、新しいモデルを利用するために、変更する必要があります。詳細については、「[Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md)」(WIF 3.5 でビルドされたアプリケーションを WIF 4.5 に移行するためのガイドライン) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-106">Applications written for WIF 3.5 will need to be modified in order to take advantage of the new model; for information, see [Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md).</span></span>  
  
 <span data-ttu-id="6ee14-107">主な変更点は、以下のとおりです。</span><span class="sxs-lookup"><span data-stu-id="6ee14-107">Below you can find some highlights of the main changes.</span></span>  
  
## <a name="wif-is-now-part-of-the-net-framework"></a><span data-ttu-id="6ee14-108">WIF の .NET Framework への組み込み</span><span class="sxs-lookup"><span data-stu-id="6ee14-108">WIF Is Now Part of the .NET Framework</span></span>  
 <span data-ttu-id="6ee14-109">WIF クラスは、複数のアセンブリに分散されています。主なものは、`mscorlib`、`System.IdentityModel`、`System.IdentityModel.Services`、および `System.ServiceModel` です。</span><span class="sxs-lookup"><span data-stu-id="6ee14-109">WIF classes are now spread across several assemblies, the main ones being `mscorlib`, `System.IdentityModel`, `System.IdentityModel.Services`, and `System.ServiceModel`.</span></span> <span data-ttu-id="6ee14-110">同様に、WIF クラスは、複数の名前空間 (<xref:System.Security.Claims?displayProperty=nameWithType>、複数の [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) 名前空間、および <xref:System.ServiceModel.Security?displayProperty=nameWithType>) に分散されています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-110">Likewise, the WIF classes are spread across several namespaces: <xref:System.Security.Claims?displayProperty=nameWithType>, several [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) namespaces, and <xref:System.ServiceModel.Security?displayProperty=nameWithType>.</span></span> <span data-ttu-id="6ee14-111"><xref:System.Security.Claims?displayProperty=nameWithType> 名前空間には、新しい <xref:System.Security.Claims.ClaimsPrincipal> クラスと <xref:System.Security.Claims.ClaimsIdentity> クラスが含まれています (以下を参照)。</span><span class="sxs-lookup"><span data-stu-id="6ee14-111">The <xref:System.Security.Claims?displayProperty=nameWithType> namespace contains the new <xref:System.Security.Claims.ClaimsPrincipal> and <xref:System.Security.Claims.ClaimsIdentity> classes (see below).</span></span> <span data-ttu-id="6ee14-112">.NET のすべての原則は、<xref:System.Security.Claims.ClaimsPrincipal> から派生しています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-112">All principals in .NET now derive from <xref:System.Security.Claims.ClaimsPrincipal>.</span></span> <span data-ttu-id="6ee14-113">WIF の名前空間およびそれに含まれるクラスの種類の詳細については、「[WIF API Reference](../../../docs/framework/security/wif-api-reference.md)」(WIF API リファレンス) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-113">For more detailed information about the WIF namespaces and the kinds of classes that they contain, see [WIF API Reference](../../../docs/framework/security/wif-api-reference.md).</span></span> <span data-ttu-id="6ee14-114">WIF 3.5 と WIF 4.5 間の名前空間のマッピング方法の詳細については、「[Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md)」(WIF 3.5 と WIF 4.5 間での名前空間マッピング) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-114">For information about how namespaces map between WIF 3.5 and WIF 4.5, see [Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md).</span></span>  
  
## <a name="new-claims-model-and-principal-object"></a><span data-ttu-id="6ee14-115">新しいクレームのモデルとプリンシパル オブジェクト</span><span class="sxs-lookup"><span data-stu-id="6ee14-115">New Claims Model and Principal Object</span></span>  
 <span data-ttu-id="6ee14-116">クレームは、.NET Framework 4.5 の中核にあります。</span><span class="sxs-lookup"><span data-stu-id="6ee14-116">Claims are at the very core of the .NET Framework 4.5.</span></span> <span data-ttu-id="6ee14-117">基本クレーム クラス (<xref:System.Security.Claims.Claim>、<xref:System.Security.Claims.ClaimsIdentity>、<xref:System.Security.Claims.ClaimsPrincipal>、<xref:System.Security.Claims.ClaimTypes>および <xref:System.Security.Claims.ClaimValueTypes>) はすべて、`mscorlib` 名前空間の <xref:System.Security.Claims?displayProperty=nameWithType> 直下に存在しています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-117">The base claim classes (<xref:System.Security.Claims.Claim>, <xref:System.Security.Claims.ClaimsIdentity>, <xref:System.Security.Claims.ClaimsPrincipal>, <xref:System.Security.Claims.ClaimTypes>, and <xref:System.Security.Claims.ClaimValueTypes>) all live directly in `mscorlib` in the <xref:System.Security.Claims?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="6ee14-118">インターフェイスを使用しなくても、.NET の ID システムにクレームを入力できるようになりました。<xref:System.Security.Principal.WindowsPrincipal>、<xref:System.Security.Principal.GenericPrincipal>、および <xref:System.Web.Security.RolePrincipal> は、<xref:System.Security.Claims.ClaimsPrincipal> から継承されるようになりました。また、<xref:System.Security.Principal.WindowsIdentity>、<xref:System.Security.Principal.GenericIdentity>、および <xref:System.Web.Security.FormsIdentity> は、<xref:System.Security.Claims.ClaimsIdentity> から継承されるようになりました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-118">It is no longer necessary to use interfaces in order to plug claims into the .NET identity system: <xref:System.Security.Principal.WindowsPrincipal>, <xref:System.Security.Principal.GenericPrincipal>, and <xref:System.Web.Security.RolePrincipal> now inherit from <xref:System.Security.Claims.ClaimsPrincipal>; and <xref:System.Security.Principal.WindowsIdentity>, <xref:System.Security.Principal.GenericIdentity>, and <xref:System.Web.Security.FormsIdentity> now inherit from <xref:System.Security.Claims.ClaimsIdentity>.</span></span> <span data-ttu-id="6ee14-119">つまり、主要なクラスはすべて、クレームに対応しています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-119">In short, every principal class will now serve claims.</span></span> <span data-ttu-id="6ee14-120">WIF 3.5 の統合クラスとインターフェイス (`WindowsClaimsIdentity`、`WindowsClaimsPrincipal`、`IClaimsPrincipal`、および `IClaimsIdentity`) は削除されました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-120">The WIF 3.5 integration classes and interfaces (`WindowsClaimsIdentity`, `WindowsClaimsPrincipal`, `IClaimsPrincipal`, `IClaimsIdentity`) have thus been removed.</span></span> <span data-ttu-id="6ee14-121">また、<xref:System.Security.Claims.ClaimsIdentity> クラスはメソッドを公開しているため、その ID のクレームのコレクションを照会しやすくなっています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-121">In addition, the <xref:System.Security.Claims.ClaimsIdentity> class now exposes methods which make it easier to query the identity’s claims collection.</span></span>  
  
## <a name="changes-to-the-wif-45-visual-studio-experience"></a><span data-ttu-id="6ee14-122">WIF 4.5 の Visual Studio の機能の変更点</span><span class="sxs-lookup"><span data-stu-id="6ee14-122">Changes to the WIF 4.5 Visual Studio Experience</span></span>  
  
-   <span data-ttu-id="6ee14-123">**[STS 参照の追加]**</span><span class="sxs-lookup"><span data-stu-id="6ee14-123">The **Add STS Reference …**</span></span> <span data-ttu-id="6ee14-124">という Visual Studio の機能 (cmdline ユーティリティの FedUtil) は既に存在しません。代わりに、新しい Visual Studio の拡張機能 **Identity and Access Tool for Visual Studio 2012** を使用できます。</span><span class="sxs-lookup"><span data-stu-id="6ee14-124">Visual Studio functionality (cmdline utility FedUtil) no longer exists; instead you can use the new Visual Studio extension **Identity and Access Tool for Visual Studio 2012**.</span></span> <span data-ttu-id="6ee14-125">これにより、既存の STS を使用してフェデレーションを行うか、LocalSTS を使用して、ソリューションをテストできるようになりました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-125">This allows you to federate with an existing STS or use LocalSTS to test your solutions.</span></span> <span data-ttu-id="6ee14-126">拡張機能をインストールした後で、プロジェクトを右クリックし、コンテキスト メニューで **[Identity and Access]\(ID とアクセス\)** を探してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-126">After installing the extension you can right-click on your project and look for **Identity and Access** in the context menu.</span></span>  
  
-   <span data-ttu-id="6ee14-127">ASP.NET、Web サイト、および WCF の既存のプロジェクト テンプレートでクレームを直接使用できるようになったため、ASP.NET および STS のテンプレートは現在提供されていません。</span><span class="sxs-lookup"><span data-stu-id="6ee14-127">The ASP.NET and STS templates are no longer provided as claims can be used directly in existing project templates for ASP.Net, web sites, and WCF.</span></span>  
  
-   <span data-ttu-id="6ee14-128">`Microsoft.IdentityModel.Web.Controls` 名前空間 (`SignInControl`、`FederatedPassiveSignInControl`、および `FederatedPassiveSignInStatus`) のコントロールは、WIF 4.5 に引き継がれません。</span><span class="sxs-lookup"><span data-stu-id="6ee14-128">The controls in the `Microsoft.IdentityModel.Web.Controls` namespace (`SignInControl`, `FederatedPassiveSignInControl`, and `FederatedPassiveSignInStatus`) are not carried over into WIF 4.5.</span></span>  
  
## <a name="changes-to-the-wif-45-api"></a><span data-ttu-id="6ee14-129">WIF 4.5 API の変更点</span><span class="sxs-lookup"><span data-stu-id="6ee14-129">Changes to the WIF 4.5 API</span></span>  
  
-   <span data-ttu-id="6ee14-130">一般的に、クレーム関連クラスは <xref:System.Security.Claims?displayProperty=nameWithType> 名前空間にあります。WCF 関連クラス (WS-Trust シナリオに使用されるサービス コントラクト、チャネル、チャネル ファクトリ、およびサービス ホスト) は <xref:System.ServiceModel.Security?displayProperty=nameWithType> にあります。また、他のすべての WIF クラスは、さまざまな [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) 名前空間 (たとえば、WS-\* および SAML 成果物を表すクラス、トークン ハンドラーおよび関連クラス、WS-Federation シナリオで使用されるクラスなど) に分散されています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-130">In general, claims related classes are in the <xref:System.Security.Claims?displayProperty=nameWithType> namespace; WCF related classes –- service contracts, channels, channel factories, and service hosts that are used for WS-Trust scenarios -- are in <xref:System.ServiceModel.Security?displayProperty=nameWithType>; and all other WIF classes are spread across various [System.IdentityModel](https://go.microsoft.com/fwlink/?LinkId=272004) namespaces – these include, for example, classes that represent WS-\* and SAML artifacts, token handlers and related classes, and classes used in WS-Federation scenarios.</span></span> <span data-ttu-id="6ee14-131">詳細については、「[Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md)」(WIF 3.5 と WIF 4.5 間での名前空間マッピング) と「[WIF API Reference](../../../docs/framework/security/wif-api-reference.md)」(WIF API リファレンス) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-131">For more information, see [Namespace Mapping between WIF 3.5 and WIF 4.5](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md) and [WIF API Reference](../../../docs/framework/security/wif-api-reference.md).</span></span>  
  
-   <span data-ttu-id="6ee14-132">マシン キーは、Web ファームのシナリオのセッション クッキーで使用できるように有効化されています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-132">Machine key has been enabled for use in session cookies for web farm scenarios.</span></span> <span data-ttu-id="6ee14-133">詳細については、「[WIF および Web ファーム](../../../docs/framework/security/wif-and-web-farms.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-133">For more information, see [WIF and Web Farms](../../../docs/framework/security/wif-and-web-farms.md).</span></span>  
  
-   <span data-ttu-id="6ee14-134">[\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) および [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md) 要素で、宣言によって WIF を構成できます。</span><span class="sxs-lookup"><span data-stu-id="6ee14-134">You now declaratively configure WIF under the [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) and [\<system.identityModel.services>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel-services.md) elements.</span></span> <span data-ttu-id="6ee14-135">WIF 構成の詳細については、「[WIF Configuration Reference](../../../docs/framework/security/wif-configuration-reference.md)」(WIF 構成のリファレンス) を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6ee14-135">For more information about WIF configuration, see [WIF Configuration Reference](../../../docs/framework/security/wif-configuration-reference.md).</span></span>  
  
## <a name="other-notable-net-changes-or-features-that-are-caused-by-the-integration-of-wif-into-net"></a><span data-ttu-id="6ee14-136">.NET に WIF を統合したことによるその他の主な .NET の変更点および機能</span><span class="sxs-lookup"><span data-stu-id="6ee14-136">Other notable .NET changes or features that are caused by the integration of WIF into .NET</span></span>  
  
-   <span data-ttu-id="6ee14-137">クレーム ベースの承認 (CBAC) を実行する潜在力が、.NET Framework に不可欠になりました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-137">The potential for performing claims-based authorization (CBAC) is now integral to the .NET framework.</span></span> <span data-ttu-id="6ee14-138"><xref:System.Security.Claims.ClaimsAuthorizationManager> オブジェクトを構成し、<xref:System.IdentityModel.Services.ClaimsPrincipalPermission> クラスおよび <xref:System.IdentityModel.Services.ClaimsPrincipalPermissionAttribute> クラスを使用して、強制アクセス チェックおよび宣言アクセス チェックをコードで実行できます。</span><span class="sxs-lookup"><span data-stu-id="6ee14-138">You can configure a <xref:System.Security.Claims.ClaimsAuthorizationManager> object and then use the <xref:System.IdentityModel.Services.ClaimsPrincipalPermission> and <xref:System.IdentityModel.Services.ClaimsPrincipalPermissionAttribute> classes to perform imperative and declarative access checks in your code.</span></span> <span data-ttu-id="6ee14-139">CBAC は、従来のロール ベース アクセス チェック (RBAC) より柔軟かつ詳細です。</span><span class="sxs-lookup"><span data-stu-id="6ee14-139">CBAC provides more flexibility and greater granularity than traditional role-based access checks (RBAC).</span></span> <span data-ttu-id="6ee14-140">また、ビジネス ロジックは特定のクレームまたはクレーム セットおよび承認ポリシーに基づいてアクセス チェックを実行でき、これらのクレームは宣言によって [\<claimsAuthorizationManager>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/claimsauthorizationmanager.md) 要素の下で構成できることから、承認ポリシーとビジネス ロジックの分離が向上しています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-140">It also allows greater separation of authorization policy from business logic because the business logic can base the access check on a specific claim or set of claims and the authorization policy for those claims can be configured declaratively under the [\<claimsAuthorizationManager>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/claimsauthorizationmanager.md) element.</span></span>  
  
## <a name="wcf-changes-as-a-result-of-wif-integration"></a><span data-ttu-id="6ee14-141">WIF 統合の結果としての WCF の変更点:</span><span class="sxs-lookup"><span data-stu-id="6ee14-141">WCF changes as a result of WIF integration:</span></span>  
  
-   <span data-ttu-id="6ee14-142">WCF クレーム ベース ID モデルは WIF に置き換えられています。</span><span class="sxs-lookup"><span data-stu-id="6ee14-142">The WCF claims-based identity model is superseded by WIF.</span></span> <span data-ttu-id="6ee14-143">これは、WIF クラスの使用を優先し、<xref:System.IdentityModel.Claims?displayProperty=nameWithType>、<xref:System.IdentityModel.Policy?displayProperty=nameWithType>、および <xref:System.IdentityModel.Selectors?displayProperty=nameWithType> 名前空間のクラスは削除する必要があることを意味します。</span><span class="sxs-lookup"><span data-stu-id="6ee14-143">This means that classes in the <xref:System.IdentityModel.Claims?displayProperty=nameWithType>, <xref:System.IdentityModel.Policy?displayProperty=nameWithType>, and <xref:System.IdentityModel.Selectors?displayProperty=nameWithType> namespaces should be dropped in favor of using WIF classes.</span></span>  
  
-   <span data-ttu-id="6ee14-144">次の XML に示すように `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` 要素で `useIdentityConfiguration` 属性が指定され、WCF サービス上で WIF が有効になりました。</span><span class="sxs-lookup"><span data-stu-id="6ee14-144">WIF is now enabled on a WCF service by specifying the `useIdentityConfiguration` attribute on the `<system.serviceModel>`/`<behaviors>`/`<serviceBehaviors>`/`<serviceCredentials>` element as in the following XML:</span></span>  
  
    ```xml  
    <serviceCredentials useIdentityConfiguration="true">  
        <!--Certificate added by Identity And Access VS Package.  Subject='CN=localhost', Issuer='CN=localhost'. Make sure you have this certificate installed. The Identity and Access tool does not install this certificate.-->  
        <serviceCertificate findValue="CN=localhost" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectDistinguishedName" />  
    </serviceCredentials>  
    ```  
  
     <span data-ttu-id="6ee14-145">**Identity and Access Tool for Visual Studio 2012** (前述の「**Visual Studio の機能の変更点**」を参照) を使用する場合、`useIdentityConfiguration` 属性が構成ファイルに設定された `<serviceCredentials>` 要素が追加されます。</span><span class="sxs-lookup"><span data-stu-id="6ee14-145">When you use the **Identity and Access Tool for Visual Studio 2012** (see **Changes to the Visual Studio Experience** above), the tool adds a `<serviceCredentials>` element with the `useIdentityConfiguration` attribute set to the configuration file for you.</span></span> <span data-ttu-id="6ee14-146">また、WIF 構成設定が含まれ、対応する [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) 要素も追加されます。選択した STS に認証を外部委託するために必要なバインディングやその他の設定も追加されます。</span><span class="sxs-lookup"><span data-stu-id="6ee14-146">It also adds a corresponding [\<system.identityModel>](../../../docs/framework/configure-apps/file-schema/windows-identity-foundation/system-identitymodel.md) element that contains the WIF configuration settings and adds a binding and other settings necessary to outsource authentication to your chosen STS.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6ee14-147">関連項目</span><span class="sxs-lookup"><span data-stu-id="6ee14-147">See Also</span></span>  
 [<span data-ttu-id="6ee14-148">WIF 3.5 でビルドされたアプリケーションを WIF 4.5 に移行するためのガイドライン</span><span class="sxs-lookup"><span data-stu-id="6ee14-148">Guidelines for Migrating an Application Built Using WIF 3.5 to WIF 4.5</span></span>](../../../docs/framework/security/guidelines-for-migrating-an-application-built-using-wif-3-5-to-wif-4-5.md)  
 [<span data-ttu-id="6ee14-149">WIF 3.5 と WIF 4.5 間での名前空間マッピング</span><span class="sxs-lookup"><span data-stu-id="6ee14-149">Namespace Mapping between WIF 3.5 and WIF 4.5</span></span>](../../../docs/framework/security/namespace-mapping-between-wif-3-5-and-wif-4-5.md)  
 [<span data-ttu-id="6ee14-150">WIF API リファレンス</span><span class="sxs-lookup"><span data-stu-id="6ee14-150">WIF API Reference</span></span>](../../../docs/framework/security/wif-api-reference.md)  
 [<span data-ttu-id="6ee14-151">WIF 構成のリファレンス</span><span class="sxs-lookup"><span data-stu-id="6ee14-151">WIF Configuration Reference</span></span>](../../../docs/framework/security/wif-configuration-reference.md)
