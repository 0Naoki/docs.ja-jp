---
ms.openlocfilehash: 47aa67096f8dcd250521d9c34dde97cb2eb368d7
ms.sourcegitcommit: d55e14eb63588830c0ba1ea95a24ce6c57ef8c8c
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/11/2019
ms.locfileid: "67803494"
---
### <a name="workflow-xoml-definition-and-sqltrackingservice-cache-keys-changed-from-md5-to-sha256"></a><span data-ttu-id="31b63-101">ワークフロー XOML 定義および SqlTrackingService キャッシュ キーの MD5 から SHA256 への変更</span><span class="sxs-lookup"><span data-stu-id="31b63-101">Workflow XOML definition and SqlTrackingService cache keys changed from MD5 to SHA256</span></span>

|   |   |
|---|---|
|<span data-ttu-id="31b63-102">説明</span><span class="sxs-lookup"><span data-stu-id="31b63-102">Details</span></span>|<span data-ttu-id="31b63-103">ワークフロー ランタイムでは、XOML で定義されているワークフロー定義のキャッシュが保持されます。</span><span class="sxs-lookup"><span data-stu-id="31b63-103">The Workflow Runtime in keeps a cache of workflow definitions defined in XOML.</span></span> <span data-ttu-id="31b63-104">また、SqlTrackingService では、文字列によってキー指定されるキャッシュが保持されます。</span><span class="sxs-lookup"><span data-stu-id="31b63-104">The SqlTrackingService also keeps a cache that is keyed by strings.</span></span> <span data-ttu-id="31b63-105">これらのキャッシュは、チェックサム ハッシュ値を含む値によってキー指定されます。</span><span class="sxs-lookup"><span data-stu-id="31b63-105">These caches are keyed by values that include checksum hash value.</span></span> <span data-ttu-id="31b63-106">.NET Framework 4.7.2 以前のバージョンでは、このチェックサムのハッシュで MD5 アルゴリズムが使用され、FIPS 対応システムで問題が発生していました。</span><span class="sxs-lookup"><span data-stu-id="31b63-106">In the .NET Framework 4.7.2 and earlier versions, this checksum hashing used the MD5 algorithm, which caused issues on FIPS-enabled systems.</span></span> <span data-ttu-id="31b63-107">.NET Framework 4.8 以降で使用されるアルゴリズムは SHA256 です。ワークフロー ランタイムと SqlTrackingService が開始されるたびに値が再計算されるため、この変更に関する互換性の問題は発生しないはずです。</span><span class="sxs-lookup"><span data-stu-id="31b63-107">Starting with the .NET Framework 4.8, the algorithm used is SHA256.There shouldn't be an compatability issue with this change because the values are recalculated each time the Workflow Runtime and SqlTrackingService is started.</span></span> <span data-ttu-id="31b63-108">しかし、後方互換が提供されるため、お客様は必要に応じて、従来のハッシュ アルゴリズムの使用に戻すことができます。</span><span class="sxs-lookup"><span data-stu-id="31b63-108">However, we have provided quirks to allow customers to revert back to usage of the legacy hashing algorithm, if necessary.</span></span>|
|<span data-ttu-id="31b63-109">提案される解決策</span><span class="sxs-lookup"><span data-stu-id="31b63-109">Suggestion</span></span>|<span data-ttu-id="31b63-110">この変更により、ワークフローの実行時に問題が生じる場合は、次のように、<code>AppContext</code> スイッチのいずれか、または両方を設定してみてください。</span><span class="sxs-lookup"><span data-stu-id="31b63-110">If this change presents a problem when executing workflows, try setting one or both of the <code>AppContext</code> switches:</span></span><ul><li><span data-ttu-id="31b63-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; を true にする。</span><span class="sxs-lookup"><span data-stu-id="31b63-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; to true.</span></span></li><li><span data-ttu-id="31b63-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; を true にする。</span><span class="sxs-lookup"><span data-stu-id="31b63-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; to true.</span></span></li></ul><span data-ttu-id="31b63-113">コードは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="31b63-113">In code:</span></span><pre><code class="lang-csharp">System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot;, true);&#13;&#10;System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot;, true);&#13;&#10;</code></pre><span data-ttu-id="31b63-114">または、構成ファイルで次のようにします (<xref:System.Workflow.Runtime.WorkflowRuntime> オブジェクトを作成しているアプリケーションの構成ファイルで、このようにする必要があります)。</span><span class="sxs-lookup"><span data-stu-id="31b63-114">Or in the configuration file (this needs to be in the config file for the application that is creating the <xref:System.Workflow.Runtime.WorkflowRuntime> object):</span></span><pre><code class="lang-xml">&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey=true&quot; /&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKeytrue&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="31b63-115">スコープ</span><span class="sxs-lookup"><span data-stu-id="31b63-115">Scope</span></span>|<span data-ttu-id="31b63-116">マイナー</span><span class="sxs-lookup"><span data-stu-id="31b63-116">Minor</span></span>|
|<span data-ttu-id="31b63-117">Version</span><span class="sxs-lookup"><span data-stu-id="31b63-117">Version</span></span>|<span data-ttu-id="31b63-118">4.8</span><span class="sxs-lookup"><span data-stu-id="31b63-118">4.8</span></span>|
|<span data-ttu-id="31b63-119">型</span><span class="sxs-lookup"><span data-stu-id="31b63-119">Type</span></span>|<span data-ttu-id="31b63-120">再ターゲット中</span><span class="sxs-lookup"><span data-stu-id="31b63-120">Retargeting</span></span>|

